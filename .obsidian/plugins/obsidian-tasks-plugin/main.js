/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source visit the plugins github repository
*/

/*
License obsidian-tasks:
MIT License

Copyright (c) 2021 Martin Schenck and Clare Macrae

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
*/

/*
License rrule (included library):
rrule.js: Library for working with recurrence rules for calendar dates.
=======================================================================

Copyright 2010, Jakub Roztocil <jakub@roztocil.name> and Lars Schöning

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:

    1. Redistributions of source code must retain the above copyright notice,
       this list of conditions and the following disclaimer.

    2. Redistributions in binary form must reproduce the above copyright
       notice, this list of conditions and the following disclaimer in the
       documentation and/or other materials provided with the distribution.

    3. Neither the name of The author nor the names of its contributors may
       be used to endorse or promote products derived from this software
       without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE AUTHOR AND CONTRIBUTORS "AS IS" AND
ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED. IN NO EVENT SHALL THE AUTHOR AND CONTRIBUTORS BE LIABLE FOR
ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.



./rrule.js and ./test/tests.js is based on python-dateutil. LICENCE:

python-dateutil - Extensions to the standard Python datetime module.
====================================================================

Copyright (c) 2003-2011 - Gustavo Niemeyer <gustavo@niemeyer.net>
Copyright (c) 2012 - Tomi Pieviläinen <tomi.pievilainen@iki.fi>

All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:

    * Redistributions of source code must retain the above copyright notice,
      this list of conditions and the following disclaimer.
    * Redistributions in binary form must reproduce the above copyright notice,
      this list of conditions and the following disclaimer in the documentation
      and/or other materials provided with the distribution.
    * Neither the name of the copyright holder nor the names of its
      contributors may be used to endorse or promote products derived from
      this software without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
"AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR
CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/

/*
License chrono-node (included library):
The MIT License

Copyright (c) 2014, Wanasit Tanakitrungruang

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.
*/

"use strict";var x_=Object.create;var Zi=Object.defineProperty,A_=Object.defineProperties,C_=Object.getOwnPropertyDescriptor,P_=Object.getOwnPropertyDescriptors,N_=Object.getOwnPropertyNames,Wp=Object.getOwnPropertySymbols,I_=Object.getPrototypeOf,$p=Object.prototype.hasOwnProperty,F_=Object.prototype.propertyIsEnumerable;var qp=(r,e,t)=>e in r?Zi(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,pe=(r,e)=>{for(var t in e||(e={}))$p.call(e,t)&&qp(r,t,e[t]);if(Wp)for(var t of Wp(e))F_.call(e,t)&&qp(r,t,e[t]);return r},Tt=(r,e)=>A_(r,P_(e));var b=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),L_=(r,e)=>{for(var t in e)Zi(r,t,{get:e[t],enumerable:!0})},Yp=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of N_(e))!$p.call(r,i)&&i!==t&&Zi(r,i,{get:()=>e[i],enumerable:!(n=C_(e,i))||n.enumerable});return r};var Ji=(r,e,t)=>(t=r!=null?x_(I_(r)):{},Yp(e||!r||!r.__esModule?Zi(t,"default",{value:r,enumerable:!0}):t,r)),U_=r=>Yp(Zi({},"__esModule",{value:!0}),r);var q=(r,e,t)=>new Promise((n,i)=>{var s=u=>{try{o(t.next(u))}catch(l){i(l)}},a=u=>{try{o(t.throw(u))}catch(l){i(l)}},o=u=>u.done?n(u.value):Promise.resolve(u.value).then(s,a);o((t=t.apply(r,e)).next())});var Ee=b(Zr=>{"use strict";Object.defineProperty(Zr,"__esModule",{value:!0});Zr.matchAnyPattern=Zr.extractTerms=Zr.repeatedTimeunitPattern=void 0;function Y_(r,e){let t=e.replace(/\((?!\?)/g,"(?:");return`${r}${t}\\s{0,5}(?:,?\\s{0,5}${t}){0,10}`}Zr.repeatedTimeunitPattern=Y_;function Gp(r){let e;return r instanceof Array?e=[...r]:r instanceof Map?e=Array.from(r.keys()):e=Object.keys(r),e}Zr.extractTerms=Gp;function G_(r){return`(?:${Gp(r).sort((t,n)=>n.length-t.length).join("|").replace(/\./g,"\\.")})`}Zr.matchAnyPattern=G_});var Te=b((Fu,Lu)=>{(function(r,e){typeof Fu=="object"&&typeof Lu!="undefined"?Lu.exports=e():typeof define=="function"&&define.amd?define(e):(r=typeof globalThis!="undefined"?globalThis:r||self).dayjs=e()})(Fu,function(){"use strict";var r=1e3,e=6e4,t=36e5,n="millisecond",i="second",s="minute",a="hour",o="day",u="week",l="month",c="quarter",p="year",h="date",_="Invalid Date",y=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,w=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,M={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},P=function(B,A,E){var H=String(B);return!H||H.length>=A?B:""+Array(A+1-H.length).join(E)+B},N={s:P,z:function(B){var A=-B.utcOffset(),E=Math.abs(A),H=Math.floor(E/60),C=E%60;return(A<=0?"+":"-")+P(H,2,"0")+":"+P(C,2,"0")},m:function B(A,E){if(A.date()<E.date())return-B(E,A);var H=12*(E.year()-A.year())+(E.month()-A.month()),C=A.clone().add(H,l),Z=E-C<0,d=A.clone().add(H+(Z?-1:1),l);return+(-(H+(E-C)/(Z?C-d:d-C))||0)},a:function(B){return B<0?Math.ceil(B)||0:Math.floor(B)},p:function(B){return{M:l,y:p,w:u,d:o,D:h,h:a,m:s,s:i,ms:n,Q:c}[B]||String(B||"").toLowerCase().replace(/s$/,"")},u:function(B){return B===void 0}},F="en",X={};X[F]=M;var V=function(B){return B instanceof Ce},he=function(B,A,E){var H;if(!B)return F;if(typeof B=="string")X[B]&&(H=B),A&&(X[B]=A,H=B);else{var C=B.name;X[C]=B,H=C}return!E&&H&&(F=H),H||!E&&F},G=function(B,A){if(V(B))return B.clone();var E=typeof A=="object"?A:{};return E.date=B,E.args=arguments,new Ce(E)},j=N;j.l=he,j.i=V,j.w=function(B,A){return G(B,{locale:A.$L,utc:A.$u,x:A.$x,$offset:A.$offset})};var Ce=function(){function B(E){this.$L=he(E.locale,null,!0),this.parse(E)}var A=B.prototype;return A.parse=function(E){this.$d=function(H){var C=H.date,Z=H.utc;if(C===null)return new Date(NaN);if(j.u(C))return new Date;if(C instanceof Date)return new Date(C);if(typeof C=="string"&&!/Z$/i.test(C)){var d=C.match(y);if(d){var f=d[2]-1||0,m=(d[7]||"0").substring(0,3);return Z?new Date(Date.UTC(d[1],f,d[3]||1,d[4]||0,d[5]||0,d[6]||0,m)):new Date(d[1],f,d[3]||1,d[4]||0,d[5]||0,d[6]||0,m)}}return new Date(C)}(E),this.$x=E.x||{},this.init()},A.init=function(){var E=this.$d;this.$y=E.getFullYear(),this.$M=E.getMonth(),this.$D=E.getDate(),this.$W=E.getDay(),this.$H=E.getHours(),this.$m=E.getMinutes(),this.$s=E.getSeconds(),this.$ms=E.getMilliseconds()},A.$utils=function(){return j},A.isValid=function(){return this.$d.toString()!==_},A.isSame=function(E,H){var C=G(E);return this.startOf(H)<=C&&C<=this.endOf(H)},A.isAfter=function(E,H){return G(E)<this.startOf(H)},A.isBefore=function(E,H){return this.endOf(H)<G(E)},A.$g=function(E,H,C){return j.u(E)?this[H]:this.set(C,E)},A.unix=function(){return Math.floor(this.valueOf()/1e3)},A.valueOf=function(){return this.$d.getTime()},A.startOf=function(E,H){var C=this,Z=!!j.u(H)||H,d=j.p(E),f=function(S,I){var me=j.w(C.$u?Date.UTC(C.$y,I,S):new Date(C.$y,I,S),C);return Z?me:me.endOf(o)},m=function(S,I){return j.w(C.toDate()[S].apply(C.toDate("s"),(Z?[0,0,0,0]:[23,59,59,999]).slice(I)),C)},g=this.$W,T=this.$M,v=this.$D,k="set"+(this.$u?"UTC":"");switch(d){case p:return Z?f(1,0):f(31,11);case l:return Z?f(1,T):f(0,T+1);case u:var D=this.$locale().weekStart||0,O=(g<D?g+7:g)-D;return f(Z?v-O:v+(6-O),T);case o:case h:return m(k+"Hours",0);case a:return m(k+"Minutes",1);case s:return m(k+"Seconds",2);case i:return m(k+"Milliseconds",3);default:return this.clone()}},A.endOf=function(E){return this.startOf(E,!1)},A.$set=function(E,H){var C,Z=j.p(E),d="set"+(this.$u?"UTC":""),f=(C={},C[o]=d+"Date",C[h]=d+"Date",C[l]=d+"Month",C[p]=d+"FullYear",C[a]=d+"Hours",C[s]=d+"Minutes",C[i]=d+"Seconds",C[n]=d+"Milliseconds",C)[Z],m=Z===o?this.$D+(H-this.$W):H;if(Z===l||Z===p){var g=this.clone().set(h,1);g.$d[f](m),g.init(),this.$d=g.set(h,Math.min(this.$D,g.daysInMonth())).$d}else f&&this.$d[f](m);return this.init(),this},A.set=function(E,H){return this.clone().$set(E,H)},A.get=function(E){return this[j.p(E)]()},A.add=function(E,H){var C,Z=this;E=Number(E);var d=j.p(H),f=function(T){var v=G(Z);return j.w(v.date(v.date()+Math.round(T*E)),Z)};if(d===l)return this.set(l,this.$M+E);if(d===p)return this.set(p,this.$y+E);if(d===o)return f(1);if(d===u)return f(7);var m=(C={},C[s]=e,C[a]=t,C[i]=r,C)[d]||1,g=this.$d.getTime()+E*m;return j.w(g,this)},A.subtract=function(E,H){return this.add(-1*E,H)},A.format=function(E){var H=this,C=this.$locale();if(!this.isValid())return C.invalidDate||_;var Z=E||"YYYY-MM-DDTHH:mm:ssZ",d=j.z(this),f=this.$H,m=this.$m,g=this.$M,T=C.weekdays,v=C.months,k=function(I,me,se,re){return I&&(I[me]||I(H,Z))||se[me].substr(0,re)},D=function(I){return j.s(f%12||12,I,"0")},O=C.meridiem||function(I,me,se){var re=I<12?"AM":"PM";return se?re.toLowerCase():re},S={YY:String(this.$y).slice(-2),YYYY:this.$y,M:g+1,MM:j.s(g+1,2,"0"),MMM:k(C.monthsShort,g,v,3),MMMM:k(v,g),D:this.$D,DD:j.s(this.$D,2,"0"),d:String(this.$W),dd:k(C.weekdaysMin,this.$W,T,2),ddd:k(C.weekdaysShort,this.$W,T,3),dddd:T[this.$W],H:String(f),HH:j.s(f,2,"0"),h:D(1),hh:D(2),a:O(f,m,!0),A:O(f,m,!1),m:String(m),mm:j.s(m,2,"0"),s:String(this.$s),ss:j.s(this.$s,2,"0"),SSS:j.s(this.$ms,3,"0"),Z:d};return Z.replace(w,function(I,me){return me||S[I]||d.replace(":","")})},A.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},A.diff=function(E,H,C){var Z,d=j.p(H),f=G(E),m=(f.utcOffset()-this.utcOffset())*e,g=this-f,T=j.m(this,f);return T=(Z={},Z[p]=T/12,Z[l]=T,Z[c]=T/3,Z[u]=(g-m)/6048e5,Z[o]=(g-m)/864e5,Z[a]=g/t,Z[s]=g/e,Z[i]=g/r,Z)[d]||g,C?T:j.a(T)},A.daysInMonth=function(){return this.endOf(l).$D},A.$locale=function(){return X[this.$L]},A.locale=function(E,H){if(!E)return this.$L;var C=this.clone(),Z=he(E,H,!0);return Z&&(C.$L=Z),C},A.clone=function(){return j.w(this.$d,this)},A.toDate=function(){return new Date(this.valueOf())},A.toJSON=function(){return this.isValid()?this.toISOString():null},A.toISOString=function(){return this.$d.toISOString()},A.toString=function(){return this.$d.toUTCString()},B}(),Ie=Ce.prototype;return G.prototype=Ie,[["$ms",n],["$s",i],["$m",s],["$H",a],["$W",o],["$M",l],["$y",p],["$D",h]].forEach(function(B){Ie[B[1]]=function(A){return this.$g(A,B[0],B[1])}}),G.extend=function(B,A){return B.$i||(B(A,Ce,G),B.$i=!0),G},G.locale=he,G.isDayjs=V,G.unix=function(B){return G(1e3*B)},G.en=X[F],G.Ls=X,G.p={},G})});var rt=b(Jr=>{"use strict";var j_=Jr&&Jr.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Jr,"__esModule",{value:!0});Jr.findYearClosestToRef=Jr.findMostLikelyADYear=void 0;var B_=j_(Te());function H_(r){return r<100&&(r>50?r=r+1900:r=r+2e3),r}Jr.findMostLikelyADYear=H_;function z_(r,e,t){let n=B_.default(r),i=n;i=i.month(t-1),i=i.date(e),i=i.year(n.year());let s=i.add(1,"y"),a=i.add(-1,"y");return Math.abs(s.diff(n))<Math.abs(i.diff(n))?i=s:Math.abs(a.diff(n))<Math.abs(i.diff(n))&&(i=a),i.year()}Jr.findYearClosestToRef=z_});var nt=b(ne=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0});ne.parseTimeUnits=ne.TIME_UNITS_PATTERN=ne.parseYear=ne.YEAR_PATTERN=ne.parseOrdinalNumberPattern=ne.ORDINAL_NUMBER_PATTERN=ne.parseNumberPattern=ne.NUMBER_PATTERN=ne.TIME_UNIT_DICTIONARY=ne.ORDINAL_WORD_DICTIONARY=ne.INTEGER_WORD_DICTIONARY=ne.MONTH_DICTIONARY=ne.FULL_MONTH_NAME_DICTIONARY=ne.WEEKDAY_DICTIONARY=void 0;var Fa=Ee(),K_=rt();ne.WEEKDAY_DICTIONARY={sunday:0,sun:0,"sun.":0,monday:1,mon:1,"mon.":1,tuesday:2,tue:2,"tue.":2,wednesday:3,wed:3,"wed.":3,thursday:4,thurs:4,"thurs.":4,thur:4,"thur.":4,thu:4,"thu.":4,friday:5,fri:5,"fri.":5,saturday:6,sat:6,"sat.":6};ne.FULL_MONTH_NAME_DICTIONARY={january:1,february:2,march:3,april:4,may:5,june:6,july:7,august:8,september:9,october:10,november:11,december:12};ne.MONTH_DICTIONARY=Object.assign(Object.assign({},ne.FULL_MONTH_NAME_DICTIONARY),{jan:1,"jan.":1,feb:2,"feb.":2,mar:3,"mar.":3,apr:4,"apr.":4,jun:6,"jun.":6,jul:7,"jul.":7,aug:8,"aug.":8,sep:9,"sep.":9,sept:9,"sept.":9,oct:10,"oct.":10,nov:11,"nov.":11,dec:12,"dec.":12});ne.INTEGER_WORD_DICTIONARY={one:1,two:2,three:3,four:4,five:5,six:6,seven:7,eight:8,nine:9,ten:10,eleven:11,twelve:12};ne.ORDINAL_WORD_DICTIONARY={first:1,second:2,third:3,fourth:4,fifth:5,sixth:6,seventh:7,eighth:8,ninth:9,tenth:10,eleventh:11,twelfth:12,thirteenth:13,fourteenth:14,fifteenth:15,sixteenth:16,seventeenth:17,eighteenth:18,nineteenth:19,twentieth:20,"twenty first":21,"twenty-first":21,"twenty second":22,"twenty-second":22,"twenty third":23,"twenty-third":23,"twenty fourth":24,"twenty-fourth":24,"twenty fifth":25,"twenty-fifth":25,"twenty sixth":26,"twenty-sixth":26,"twenty seventh":27,"twenty-seventh":27,"twenty eighth":28,"twenty-eighth":28,"twenty ninth":29,"twenty-ninth":29,thirtieth:30,"thirty first":31,"thirty-first":31};ne.TIME_UNIT_DICTIONARY={sec:"second",second:"second",seconds:"second",min:"minute",mins:"minute",minute:"minute",minutes:"minute",h:"hour",hr:"hour",hrs:"hour",hour:"hour",hours:"hour",day:"d",days:"d",week:"week",weeks:"week",month:"month",months:"month",qtr:"quarter",quarter:"quarter",quarters:"quarter",y:"year",yr:"year",year:"year",years:"year"};ne.NUMBER_PATTERN=`(?:${Fa.matchAnyPattern(ne.INTEGER_WORD_DICTIONARY)}|[0-9]+|[0-9]+\\.[0-9]+|half(?:\\s{0,2}an?)?|an?\\b(?:\\s{0,2}few)?|few|several|a?\\s{0,2}couple\\s{0,2}(?:of)?)`;function Bp(r){let e=r.toLowerCase();return ne.INTEGER_WORD_DICTIONARY[e]!==void 0?ne.INTEGER_WORD_DICTIONARY[e]:e==="a"||e==="an"?1:e.match(/few/)?3:e.match(/half/)?.5:e.match(/couple/)?2:e.match(/several/)?7:parseFloat(e)}ne.parseNumberPattern=Bp;ne.ORDINAL_NUMBER_PATTERN=`(?:${Fa.matchAnyPattern(ne.ORDINAL_WORD_DICTIONARY)}|[0-9]{1,2}(?:st|nd|rd|th)?)`;function V_(r){let e=r.toLowerCase();return ne.ORDINAL_WORD_DICTIONARY[e]!==void 0?ne.ORDINAL_WORD_DICTIONARY[e]:(e=e.replace(/(?:st|nd|rd|th)$/i,""),parseInt(e))}ne.parseOrdinalNumberPattern=V_;ne.YEAR_PATTERN="(?:[1-9][0-9]{0,3}\\s{0,2}(?:BE|AD|BC|BCE|CE)|[1-2][0-9]{3}|[5-9][0-9])";function Q_(r){if(/BE/i.test(r))return r=r.replace(/BE/i,""),parseInt(r)-543;if(/BCE?/i.test(r))return r=r.replace(/BCE?/i,""),-parseInt(r);if(/(AD|CE)/i.test(r))return r=r.replace(/(AD|CE)/i,""),parseInt(r);let e=parseInt(r);return K_.findMostLikelyADYear(e)}ne.parseYear=Q_;var Hp=`(${ne.NUMBER_PATTERN})\\s{0,3}(${Fa.matchAnyPattern(ne.TIME_UNIT_DICTIONARY)})`,jp=new RegExp(Hp,"i");ne.TIME_UNITS_PATTERN=Fa.repeatedTimeunitPattern("(?:(?:about|around)\\s{0,3})?",Hp);function X_(r){let e={},t=r,n=jp.exec(t);for(;n;)Z_(e,n),t=t.substring(n[0].length).trim(),n=jp.exec(t);return e}ne.parseTimeUnits=X_;function Z_(r,e){let t=Bp(e[1]),n=ne.TIME_UNIT_DICTIONARY[e[2].toLowerCase()];r[n]=t}});var zp=b((Uu,Wu)=>{(function(r,e){typeof Uu=="object"&&typeof Wu!="undefined"?Wu.exports=e():typeof define=="function"&&define.amd?define(e):(r=typeof globalThis!="undefined"?globalThis:r||self).dayjs_plugin_quarterOfYear=e()})(Uu,function(){"use strict";var r="month",e="quarter";return function(t,n){var i=n.prototype;i.quarter=function(o){return this.$utils().u(o)?Math.ceil((this.month()+1)/3):this.month(this.month()%3+3*(o-1))};var s=i.add;i.add=function(o,u){return o=Number(o),this.$utils().p(u)===e?this.add(3*o,r):s.bind(this)(o,u)};var a=i.startOf;i.startOf=function(o,u){var l=this.$utils(),c=!!l.u(u)||u;if(l.p(o)===e){var p=this.quarter()-1;return c?this.month(3*p).startOf(r).startOf("day"):this.month(3*p+2).endOf(r).endOf("day")}return a.bind(this)(o,u)}}})});var $t=b(pr=>{"use strict";Object.defineProperty(pr,"__esModule",{value:!0});pr.implySimilarTime=pr.assignSimilarTime=pr.assignSimilarDate=pr.assignTheNextDay=void 0;var Kp=Ge();function J_(r,e){e=e.add(1,"day"),Vp(r,e),Qp(r,e)}pr.assignTheNextDay=J_;function Vp(r,e){r.assign("day",e.date()),r.assign("month",e.month()+1),r.assign("year",e.year())}pr.assignSimilarDate=Vp;function ev(r,e){r.assign("hour",e.hour()),r.assign("minute",e.minute()),r.assign("second",e.second()),r.assign("millisecond",e.millisecond()),r.get("hour")<12?r.assign("meridiem",Kp.Meridiem.AM):r.assign("meridiem",Kp.Meridiem.PM)}pr.assignSimilarTime=ev;function Qp(r,e){r.imply("hour",e.hour()),r.imply("minute",e.minute()),r.imply("second",e.second()),r.imply("millisecond",e.millisecond())}pr.implySimilarTime=Qp});var Xp=b(bn=>{"use strict";Object.defineProperty(bn,"__esModule",{value:!0});bn.toTimezoneOffset=bn.TIMEZONE_ABBR_MAP=void 0;bn.TIMEZONE_ABBR_MAP={ACDT:630,ACST:570,ADT:-180,AEDT:660,AEST:600,AFT:270,AKDT:-480,AKST:-540,ALMT:360,AMST:-180,AMT:-240,ANAST:720,ANAT:720,AQTT:300,ART:-180,AST:-240,AWDT:540,AWST:480,AZOST:0,AZOT:-60,AZST:300,AZT:240,BNT:480,BOT:-240,BRST:-120,BRT:-180,BST:60,BTT:360,CAST:480,CAT:120,CCT:390,CDT:-300,CEST:120,CET:60,CHADT:825,CHAST:765,CKT:-600,CLST:-180,CLT:-240,COT:-300,CST:-360,CVT:-60,CXT:420,ChST:600,DAVT:420,EASST:-300,EAST:-360,EAT:180,ECT:-300,EDT:-240,EEST:180,EET:120,EGST:0,EGT:-60,EST:-300,ET:-300,FJST:780,FJT:720,FKST:-180,FKT:-240,FNT:-120,GALT:-360,GAMT:-540,GET:240,GFT:-180,GILT:720,GMT:0,GST:240,GYT:-240,HAA:-180,HAC:-300,HADT:-540,HAE:-240,HAP:-420,HAR:-360,HAST:-600,HAT:-90,HAY:-480,HKT:480,HLV:-210,HNA:-240,HNC:-360,HNE:-300,HNP:-480,HNR:-420,HNT:-150,HNY:-540,HOVT:420,ICT:420,IDT:180,IOT:360,IRDT:270,IRKST:540,IRKT:540,IRST:210,IST:330,JST:540,KGT:360,KRAST:480,KRAT:480,KST:540,KUYT:240,LHDT:660,LHST:630,LINT:840,MAGST:720,MAGT:720,MART:-510,MAWT:300,MDT:-360,MESZ:120,MEZ:60,MHT:720,MMT:390,MSD:240,MSK:180,MST:-420,MUT:240,MVT:300,MYT:480,NCT:660,NDT:-90,NFT:690,NOVST:420,NOVT:360,NPT:345,NST:-150,NUT:-660,NZDT:780,NZST:720,OMSST:420,OMST:420,PDT:-420,PET:-300,PETST:720,PETT:720,PGT:600,PHOT:780,PHT:480,PKT:300,PMDT:-120,PMST:-180,PONT:660,PST:-480,PT:-480,PWT:540,PYST:-180,PYT:-240,RET:240,SAMT:240,SAST:120,SBT:660,SCT:240,SGT:480,SRT:-180,SST:-660,TAHT:-600,TFT:300,TJT:300,TKT:780,TLT:540,TMT:300,TVT:720,ULAT:480,UTC:0,UYST:-120,UYT:-180,UZT:300,VET:-210,VLAST:660,VLAT:660,VUT:660,WAST:120,WAT:60,WEST:60,WESZ:60,WET:0,WEZ:0,WFT:720,WGST:-120,WGT:-180,WIB:420,WIT:540,WITA:480,WST:780,WT:0,YAKST:600,YAKT:600,YAPT:600,YEKST:360,YEKT:360};function tv(r){var e;return r==null?null:typeof r=="number"?r:(e=bn.TIMEZONE_ABBR_MAP[r])!==null&&e!==void 0?e:null}bn.toTimezoneOffset=tv});var Pe=b(hr=>{"use strict";var Zp=hr&&hr.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(hr,"__esModule",{value:!0});hr.ParsingResult=hr.ParsingComponents=hr.ReferenceWithTimezone=void 0;var rv=Zp(zp()),La=Zp(Te()),qu=$t(),nv=Xp();La.default.extend(rv.default);var $u=class{constructor(e){var t;e=e!=null?e:new Date,e instanceof Date?this.instant=e:(this.instant=(t=e.instant)!==null&&t!==void 0?t:new Date,this.timezoneOffset=nv.toTimezoneOffset(e.timezone))}};hr.ReferenceWithTimezone=$u;var _n=class{constructor(e,t){if(this.reference=e,this.knownValues={},this.impliedValues={},t)for(let i in t)this.knownValues[i]=t[i];let n=La.default(e.instant);this.imply("day",n.date()),this.imply("month",n.month()+1),this.imply("year",n.year()),this.imply("hour",12),this.imply("minute",0),this.imply("second",0),this.imply("millisecond",0)}get(e){return e in this.knownValues?this.knownValues[e]:e in this.impliedValues?this.impliedValues[e]:null}isCertain(e){return e in this.knownValues}getCertainComponents(){return Object.keys(this.knownValues)}imply(e,t){return e in this.knownValues?this:(this.impliedValues[e]=t,this)}assign(e,t){return this.knownValues[e]=t,delete this.impliedValues[e],this}delete(e){delete this.knownValues[e],delete this.impliedValues[e]}clone(){let e=new _n(this.reference);e.knownValues={},e.impliedValues={};for(let t in this.knownValues)e.knownValues[t]=this.knownValues[t];for(let t in this.impliedValues)e.impliedValues[t]=this.impliedValues[t];return e}isOnlyDate(){return!this.isCertain("hour")&&!this.isCertain("minute")&&!this.isCertain("second")}isOnlyTime(){return!this.isCertain("weekday")&&!this.isCertain("day")&&!this.isCertain("month")}isOnlyWeekdayComponent(){return this.isCertain("weekday")&&!this.isCertain("day")&&!this.isCertain("month")}isOnlyDayMonthComponent(){return this.isCertain("day")&&this.isCertain("month")&&!this.isCertain("year")}isValidDate(){let e=this.dateWithoutTimezoneAdjustment();return!(e.getFullYear()!==this.get("year")||e.getMonth()!==this.get("month")-1||e.getDate()!==this.get("day")||this.get("hour")!=null&&e.getHours()!=this.get("hour")||this.get("minute")!=null&&e.getMinutes()!=this.get("minute"))}toString(){return`[ParsingComponents {knownValues: ${JSON.stringify(this.knownValues)}, impliedValues: ${JSON.stringify(this.impliedValues)}}, reference: ${JSON.stringify(this.reference)}]`}dayjs(){return La.default(this.date())}date(){let e=this.dateWithoutTimezoneAdjustment();return new Date(e.getTime()+this.getSystemTimezoneAdjustmentMinute(e)*6e4)}dateWithoutTimezoneAdjustment(){let e=new Date(this.get("year"),this.get("month")-1,this.get("day"),this.get("hour"),this.get("minute"),this.get("second"),this.get("millisecond"));return e.setFullYear(this.get("year")),e}getSystemTimezoneAdjustmentMinute(e){var t,n;(!e||e.getTime()<0)&&(e=new Date);let i=-e.getTimezoneOffset(),s=(n=(t=this.get("timezoneOffset"))!==null&&t!==void 0?t:this.reference.timezoneOffset)!==null&&n!==void 0?n:i;return i-s}static createRelativeFromReference(e,t){let n=La.default(e.instant);for(let s in t)n=n.add(t[s],s);let i=new _n(e);return t.hour||t.minute||t.second?(qu.assignSimilarTime(i,n),qu.assignSimilarDate(i,n),e.timezoneOffset!==null&&i.assign("timezoneOffset",-e.instant.getTimezoneOffset())):(qu.implySimilarTime(i,n),e.timezoneOffset!==null&&i.imply("timezoneOffset",-e.instant.getTimezoneOffset()),t.d?(i.assign("day",n.date()),i.assign("month",n.month()+1),i.assign("year",n.year())):(t.week&&i.imply("weekday",n.day()),i.imply("day",n.date()),t.month?(i.assign("month",n.month()+1),i.assign("year",n.year())):(i.imply("month",n.month()+1),t.year?i.assign("year",n.year()):i.imply("year",n.year())))),i}};hr.ParsingComponents=_n;var es=class{constructor(e,t,n,i,s){this.reference=e,this.refDate=e.instant,this.index=t,this.text=n,this.start=i||new _n(e),this.end=s}clone(){let e=new es(this.reference,this.index,this.text);return e.start=this.start?this.start.clone():null,e.end=this.end?this.end.clone():null,e}date(){return this.start.date()}toString(){return`[ParsingResult {index: ${this.index}, text: '${this.text}', ...}]`}};hr.ParsingResult=es});var W=b(Ua=>{"use strict";Object.defineProperty(Ua,"__esModule",{value:!0});Ua.AbstractParserWithWordBoundaryChecking=void 0;var Yu=class{constructor(){this.cachedInnerPattern=null,this.cachedPattern=null}patternLeftBoundary(){return"(\\W|^)"}pattern(e){let t=this.innerPattern(e);return t==this.cachedInnerPattern?this.cachedPattern:(this.cachedPattern=new RegExp(`${this.patternLeftBoundary()}${t.source}`,t.flags),this.cachedInnerPattern=t,this.cachedPattern)}extract(e,t){var n;let i=(n=t[1])!==null&&n!==void 0?n:"";t.index=t.index+i.length,t[0]=t[0].substring(i.length);for(let s=2;s<t.length;s++)t[s-1]=t[s];return this.innerExtract(e,t)}};Ua.AbstractParserWithWordBoundaryChecking=Yu});var Jp=b(Bu=>{"use strict";Object.defineProperty(Bu,"__esModule",{value:!0});var ju=nt(),iv=Pe(),sv=W(),av=new RegExp(`(?:within|in|for)\\s*(?:(?:about|around|roughly|approximately|just)\\s*(?:~\\s*)?)?(${ju.TIME_UNITS_PATTERN})(?=\\W|$)`,"i"),ov=new RegExp(`(?:(?:about|around|roughly|approximately|just)\\s*(?:~\\s*)?)?(${ju.TIME_UNITS_PATTERN})(?=\\W|$)`,"i"),Gu=class extends sv.AbstractParserWithWordBoundaryChecking{innerPattern(e){return e.option.forwardDate?ov:av}innerExtract(e,t){let n=ju.parseTimeUnits(t[1]);return iv.ParsingComponents.createRelativeFromReference(e.reference,n)}};Bu.default=Gu});var sh=b(zu=>{"use strict";Object.defineProperty(zu,"__esModule",{value:!0});var uv=rt(),nh=nt(),ih=nt(),Wa=nt(),lv=Ee(),cv=W(),dv=new RegExp(`(?:on\\s{0,3})?(${Wa.ORDINAL_NUMBER_PATTERN})(?:\\s{0,3}(?:to|\\-|\\\u2013|until|through|till)?\\s{0,3}(${Wa.ORDINAL_NUMBER_PATTERN}))?(?:-|/|\\s{0,3}(?:of)?\\s{0,3})(${lv.matchAnyPattern(nh.MONTH_DICTIONARY)})(?:(?:-|/|,?\\s{0,3})(${ih.YEAR_PATTERN}(?![^\\s]\\d)))?(?=\\W|$)`,"i"),eh=1,th=2,fv=3,rh=4,Hu=class extends cv.AbstractParserWithWordBoundaryChecking{innerPattern(){return dv}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=nh.MONTH_DICTIONARY[t[fv].toLowerCase()],s=Wa.parseOrdinalNumberPattern(t[eh]);if(s>31)return t.index=t.index+t[eh].length,null;if(n.start.assign("month",i),n.start.assign("day",s),t[rh]){let a=ih.parseYear(t[rh]);n.start.assign("year",a)}else{let a=uv.findYearClosestToRef(e.refDate,s,i);n.start.imply("year",a)}if(t[th]){let a=Wa.parseOrdinalNumberPattern(t[th]);n.end=n.start.clone(),n.end.assign("day",a)}return n}};zu.default=Hu});var ch=b(Vu=>{"use strict";Object.defineProperty(Vu,"__esModule",{value:!0});var pv=rt(),uh=nt(),qa=nt(),lh=nt(),hv=Ee(),mv=W(),gv=new RegExp(`(${hv.matchAnyPattern(uh.MONTH_DICTIONARY)})(?:-|/|\\s*,?\\s*)(${qa.ORDINAL_NUMBER_PATTERN})(?!\\s*(?:am|pm))\\s*(?:(?:to|\\-)\\s*(${qa.ORDINAL_NUMBER_PATTERN})\\s*)?(?:(?:-|/|\\s*,?\\s*)(${lh.YEAR_PATTERN}))?(?=\\W|$)(?!\\:\\d)`,"i"),yv=1,Tv=2,ah=3,oh=4,Ku=class extends mv.AbstractParserWithWordBoundaryChecking{innerPattern(){return gv}innerExtract(e,t){let n=uh.MONTH_DICTIONARY[t[yv].toLowerCase()],i=qa.parseOrdinalNumberPattern(t[Tv]);if(i>31)return null;let s=e.createParsingComponents({day:i,month:n});if(t[oh]){let u=lh.parseYear(t[oh]);s.assign("year",u)}else{let u=pv.findYearClosestToRef(e.refDate,i,n);s.imply("year",u)}if(!t[ah])return s;let a=qa.parseOrdinalNumberPattern(t[ah]),o=e.createParsingResult(t.index,t[0]);return o.start=s,o.end=s.clone(),o.end.assign("day",a),o}};Vu.default=Ku});var ph=b(Zu=>{"use strict";Object.defineProperty(Zu,"__esModule",{value:!0});var Qu=nt(),bv=rt(),_v=Ee(),fh=nt(),vv=W(),Ev=new RegExp(`((?:in)\\s*)?(${_v.matchAnyPattern(Qu.MONTH_DICTIONARY)})\\s*(?:[,-]?\\s*(${fh.YEAR_PATTERN})?)?(?=[^\\s\\w]|\\s+[^0-9]|\\s+$|$)`,"i"),wv=1,kv=2,dh=3,Xu=class extends vv.AbstractParserWithWordBoundaryChecking{innerPattern(){return Ev}innerExtract(e,t){let n=t[kv].toLowerCase();if(t[0].length<=3&&!Qu.FULL_MONTH_NAME_DICTIONARY[n])return null;let i=e.createParsingResult(t.index+(t[wv]||"").length,t.index+t[0].length);i.start.imply("day",1);let s=Qu.MONTH_DICTIONARY[n];if(i.start.assign("month",s),t[dh]){let a=fh.parseYear(t[dh]);i.start.assign("year",a)}else{let a=bv.findYearClosestToRef(e.refDate,1,s);i.start.imply("year",a)}return i}};Zu.default=Xu});var gh=b(el=>{"use strict";Object.defineProperty(el,"__esModule",{value:!0});var mh=nt(),Ov=Ee(),Sv=W(),Dv=new RegExp(`([0-9]{4})[\\.\\/\\s](?:(${Ov.matchAnyPattern(mh.MONTH_DICTIONARY)})|([0-9]{1,2}))[\\.\\/\\s]([0-9]{1,2})(?=\\W|$)`,"i"),Rv=1,Mv=2,hh=3,xv=4,Ju=class extends Sv.AbstractParserWithWordBoundaryChecking{innerPattern(){return Dv}innerExtract(e,t){let n=t[hh]?parseInt(t[hh]):mh.MONTH_DICTIONARY[t[Mv].toLowerCase()];if(n<1||n>12)return null;let i=parseInt(t[Rv]);return{day:parseInt(t[xv]),month:n,year:i}}};el.default=Ju});var yh=b(rl=>{"use strict";Object.defineProperty(rl,"__esModule",{value:!0});var Av=W(),Cv=new RegExp("([0-9]|0[1-9]|1[012])/([0-9]{4})","i"),Pv=1,Nv=2,tl=class extends Av.AbstractParserWithWordBoundaryChecking{innerPattern(){return Cv}innerExtract(e,t){let n=parseInt(t[Nv]),i=parseInt(t[Pv]);return e.createParsingComponents().imply("day",1).assign("month",i).assign("year",n)}};rl.default=tl});var vn=b(Ga=>{"use strict";Object.defineProperty(Ga,"__esModule",{value:!0});Ga.AbstractTimeExpressionParser=void 0;var bt=Ge();function Iv(r,e,t,n){return new RegExp(`${r}${e}(\\d{1,4})(?:(?:\\.|:|\uFF1A)(\\d{1,2})(?:(?::|\uFF1A)(\\d{2})(?:\\.(\\d{1,6}))?)?)?(?:\\s*(a\\.m\\.|p\\.m\\.|am?|pm?))?${t}`,n)}function Fv(r,e){return new RegExp(`^(${r})(\\d{1,4})(?:(?:\\.|\\:|\\\uFF1A)(\\d{1,2})(?:(?:\\.|\\:|\\\uFF1A)(\\d{1,2})(?:\\.(\\d{1,6}))?)?)?(?:\\s*(a\\.m\\.|p\\.m\\.|am?|pm?))?${e}`,"i")}var Th=2,ei=3,$a=4,Ya=5,ts=6,nl=class{constructor(e=!1){this.cachedPrimaryPrefix=null,this.cachedPrimarySuffix=null,this.cachedPrimaryTimePattern=null,this.cachedFollowingPhase=null,this.cachedFollowingSuffix=null,this.cachedFollowingTimePatten=null,this.strictMode=e}patternFlags(){return"i"}primaryPatternLeftBoundary(){return"(^|\\s|T|\\b)"}primarySuffix(){return"(?=\\W|$)"}followingSuffix(){return"(?=\\W|$)"}pattern(e){return this.getPrimaryTimePatternThroughCache()}extract(e,t){let n=this.extractPrimaryTimeComponents(e,t);if(!n)return t.index+=t[0].length,null;let i=t.index+t[1].length,s=t[0].substring(t[1].length),a=e.createParsingResult(i,s,n);t.index+=t[0].length;let o=e.text.substring(t.index),l=this.getFollowingTimePatternThroughCache().exec(o);return s.match(/^\d{3,4}/)&&l&&l[0].match(/^\s*([+-])\s*\d{2,4}$/)?null:!l||l[0].match(/^\s*([+-])\s*\d{3,4}$/)?this.checkAndReturnWithoutFollowingPattern(a):(a.end=this.extractFollowingTimeComponents(e,l,a),a.end&&(a.text+=l[0]),this.checkAndReturnWithFollowingPattern(a))}extractPrimaryTimeComponents(e,t,n=!1){let i=e.createParsingComponents(),s=0,a=null,o=parseInt(t[Th]);if(o>100){if(this.strictMode||t[ei]!=null)return null;s=o%100,o=Math.floor(o/100)}if(o>24)return null;if(t[ei]!=null){if(t[ei].length==1&&!t[ts])return null;s=parseInt(t[ei])}if(s>=60)return null;if(o>12&&(a=bt.Meridiem.PM),t[ts]!=null){if(o>12)return null;let u=t[ts][0].toLowerCase();u=="a"&&(a=bt.Meridiem.AM,o==12&&(o=0)),u=="p"&&(a=bt.Meridiem.PM,o!=12&&(o+=12))}if(i.assign("hour",o),i.assign("minute",s),a!==null?i.assign("meridiem",a):o<12?i.imply("meridiem",bt.Meridiem.AM):i.imply("meridiem",bt.Meridiem.PM),t[Ya]!=null){let u=parseInt(t[Ya].substring(0,3));if(u>=1e3)return null;i.assign("millisecond",u)}if(t[$a]!=null){let u=parseInt(t[$a]);if(u>=60)return null;i.assign("second",u)}return i}extractFollowingTimeComponents(e,t,n){let i=e.createParsingComponents();if(t[Ya]!=null){let u=parseInt(t[Ya].substring(0,3));if(u>=1e3)return null;i.assign("millisecond",u)}if(t[$a]!=null){let u=parseInt(t[$a]);if(u>=60)return null;i.assign("second",u)}let s=parseInt(t[Th]),a=0,o=-1;if(t[ei]!=null?a=parseInt(t[ei]):s>100&&(a=s%100,s=Math.floor(s/100)),a>=60||s>24)return null;if(s>=12&&(o=bt.Meridiem.PM),t[ts]!=null){if(s>12)return null;let u=t[ts][0].toLowerCase();u=="a"&&(o=bt.Meridiem.AM,s==12&&(s=0,i.isCertain("day")||i.imply("day",i.get("day")+1))),u=="p"&&(o=bt.Meridiem.PM,s!=12&&(s+=12)),n.start.isCertain("meridiem")||(o==bt.Meridiem.AM?(n.start.imply("meridiem",bt.Meridiem.AM),n.start.get("hour")==12&&n.start.assign("hour",0)):(n.start.imply("meridiem",bt.Meridiem.PM),n.start.get("hour")!=12&&n.start.assign("hour",n.start.get("hour")+12)))}return i.assign("hour",s),i.assign("minute",a),o>=0?i.assign("meridiem",o):n.start.isCertain("meridiem")&&n.start.get("hour")>12?n.start.get("hour")-12>s?i.imply("meridiem",bt.Meridiem.AM):s<=12&&(i.assign("hour",s+12),i.assign("meridiem",bt.Meridiem.PM)):s>12?i.imply("meridiem",bt.Meridiem.PM):s<=12&&i.imply("meridiem",bt.Meridiem.AM),i.date().getTime()<n.start.date().getTime()&&i.imply("day",i.get("day")+1),i}checkAndReturnWithoutFollowingPattern(e){if(e.text.match(/^\d$/)||e.text.match(/^\d\d\d+$/)||e.text.match(/\d[apAP]$/))return null;let t=e.text.match(/[^\d:.](\d[\d.]+)$/);if(t){let n=t[1];if(this.strictMode||n.includes(".")&&!n.match(/\d(\.\d{2})+$/)||parseInt(n)>24)return null}return e}checkAndReturnWithFollowingPattern(e){if(e.text.match(/^\d+-\d+$/))return null;let t=e.text.match(/[^\d:.](\d[\d.]+)\s*-\s*(\d[\d.]+)$/);if(t){if(this.strictMode)return null;let n=t[1],i=t[2];if(i.includes(".")&&!i.match(/\d(\.\d{2})+$/))return null;let s=parseInt(i),a=parseInt(n);if(s>24||a>24)return null}return e}getPrimaryTimePatternThroughCache(){let e=this.primaryPrefix(),t=this.primarySuffix();return this.cachedPrimaryPrefix===e&&this.cachedPrimarySuffix===t?this.cachedPrimaryTimePattern:(this.cachedPrimaryTimePattern=Iv(this.primaryPatternLeftBoundary(),e,t,this.patternFlags()),this.cachedPrimaryPrefix=e,this.cachedPrimarySuffix=t,this.cachedPrimaryTimePattern)}getFollowingTimePatternThroughCache(){let e=this.followingPhase(),t=this.followingSuffix();return this.cachedFollowingPhase===e&&this.cachedFollowingSuffix===t?this.cachedFollowingTimePatten:(this.cachedFollowingTimePatten=Fv(e,t),this.cachedFollowingPhase=e,this.cachedFollowingSuffix=t,this.cachedFollowingTimePatten)}};Ga.AbstractTimeExpressionParser=nl});var bh=b(sl=>{"use strict";Object.defineProperty(sl,"__esModule",{value:!0});var ja=Ge(),Lv=vn(),il=class extends Lv.AbstractTimeExpressionParser{constructor(e){super(e)}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|to|\\?)\\s*"}primaryPrefix(){return"(?:(?:at|from)\\s*)??"}primarySuffix(){return"(?:\\s*(?:o\\W*clock|at\\s*night|in\\s*the\\s*(?:morning|afternoon)))?(?!/)(?=\\W|$)"}extractPrimaryTimeComponents(e,t){let n=super.extractPrimaryTimeComponents(e,t);if(n){if(t[0].endsWith("night")){let i=n.get("hour");i>=6&&i<12?(n.assign("hour",n.get("hour")+12),n.assign("meridiem",ja.Meridiem.PM)):i<6&&n.assign("meridiem",ja.Meridiem.AM)}if(t[0].endsWith("afternoon")){n.assign("meridiem",ja.Meridiem.PM);let i=n.get("hour");i>=0&&i<=6&&n.assign("hour",n.get("hour")+12)}t[0].endsWith("morning")&&(n.assign("meridiem",ja.Meridiem.AM),n.get("hour")<12&&n.assign("hour",n.get("hour")))}return n}};sl.default=il});var Yt=b(ti=>{"use strict";Object.defineProperty(ti,"__esModule",{value:!0});ti.addImpliedTimeUnits=ti.reverseTimeUnits=void 0;function Uv(r){let e={};for(let t in r)e[t]=-r[t];return e}ti.reverseTimeUnits=Uv;function Wv(r,e){let t=r.clone(),n=r.dayjs();for(let i in e)n=n.add(e[i],i);return("day"in e||"d"in e||"week"in e||"month"in e||"year"in e)&&(t.imply("day",n.date()),t.imply("month",n.month()+1),t.imply("year",n.year())),("second"in e||"minute"in e||"hour"in e)&&(t.imply("second",n.second()),t.imply("minute",n.minute()),t.imply("hour",n.hour())),t}ti.addImpliedTimeUnits=Wv});var _h=b(ul=>{"use strict";Object.defineProperty(ul,"__esModule",{value:!0});var ol=nt(),qv=Pe(),$v=W(),Yv=Yt(),Gv=new RegExp(`(${ol.TIME_UNITS_PATTERN})\\s{0,5}(?:ago|before|earlier)(?=(?:\\W|$))`,"i"),jv=new RegExp(`(${ol.TIME_UNITS_PATTERN})\\s{0,5}ago(?=(?:\\W|$))`,"i"),al=class extends $v.AbstractParserWithWordBoundaryChecking{constructor(e){super(),this.strictMode=e}innerPattern(){return this.strictMode?jv:Gv}innerExtract(e,t){let n=ol.parseTimeUnits(t[1]),i=Yv.reverseTimeUnits(n);return qv.ParsingComponents.createRelativeFromReference(e.reference,i)}};ul.default=al});var vh=b(dl=>{"use strict";Object.defineProperty(dl,"__esModule",{value:!0});var cl=nt(),Bv=Pe(),Hv=W(),zv=new RegExp(`(${cl.TIME_UNITS_PATTERN})\\s{0,5}(?:later|after|from now|henceforth|forward|out)(?=(?:\\W|$))`,"i"),Kv=new RegExp("("+cl.TIME_UNITS_PATTERN+")(later|from now)(?=(?:\\W|$))","i"),Vv=1,ll=class extends Hv.AbstractParserWithWordBoundaryChecking{constructor(e){super(),this.strictMode=e}innerPattern(){return this.strictMode?Kv:zv}innerExtract(e,t){let n=cl.parseTimeUnits(t[Vv]);return Bv.ParsingComponents.createRelativeFromReference(e.reference,n)}};dl.default=ll});var ni=b(ri=>{"use strict";Object.defineProperty(ri,"__esModule",{value:!0});ri.MergingRefiner=ri.Filter=void 0;var fl=class{refine(e,t){return t.filter(n=>this.isValid(e,n))}};ri.Filter=fl;var pl=class{refine(e,t){if(t.length<2)return t;let n=[],i=t[0],s=null;for(let a=1;a<t.length;a++){s=t[a];let o=e.text.substring(i.index+i.text.length,s.index);if(!this.shouldMergeResults(o,i,s,e))n.push(i),i=s;else{let u=i,l=s,c=this.mergeResults(o,u,l,e);e.debug(()=>{console.log(`${this.constructor.name} merged ${u} and ${l} into ${c}`)}),i=c}}return i!=null&&n.push(i),n}};ri.MergingRefiner=pl});var mr=b(ml=>{"use strict";Object.defineProperty(ml,"__esModule",{value:!0});var Qv=ni(),hl=class extends Qv.MergingRefiner{shouldMergeResults(e,t,n){return!t.end&&!n.end&&e.match(this.patternBetween())!=null}mergeResults(e,t,n){if(!t.start.isOnlyWeekdayComponent()&&!n.start.isOnlyWeekdayComponent()&&(n.start.getCertainComponents().forEach(s=>{t.start.isCertain(s)||t.start.assign(s,n.start.get(s))}),t.start.getCertainComponents().forEach(s=>{n.start.isCertain(s)||n.start.assign(s,t.start.get(s))})),t.start.date().getTime()>n.start.date().getTime()){let s=t.start.dayjs(),a=n.start.dayjs();t.start.isOnlyWeekdayComponent()&&s.add(-7,"days").isBefore(a)?(s=s.add(-7,"days"),t.start.imply("day",s.date()),t.start.imply("month",s.month()+1),t.start.imply("year",s.year())):n.start.isOnlyWeekdayComponent()&&a.add(7,"days").isAfter(s)?(a=a.add(7,"days"),n.start.imply("day",a.date()),n.start.imply("month",a.month()+1),n.start.imply("year",a.year())):[n,t]=[t,n]}let i=t.clone();return i.start=t.start,i.end=n.start,i.index=Math.min(t.index,n.index),t.index<n.index?i.text=t.text+e+n.text:i.text=n.text+e+t.text,i}};ml.default=hl});var Eh=b(rs=>{"use strict";var Xv=rs&&rs.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(rs,"__esModule",{value:!0});var Zv=Xv(mr()),gl=class extends Zv.default{patternBetween(){return/^\s*(to|-)\s*$/i}};rs.default=gl});var wh=b(ii=>{"use strict";Object.defineProperty(ii,"__esModule",{value:!0});ii.mergeDateTimeComponent=ii.mergeDateTimeResult=void 0;var Jv=Ge();function eE(r,e){let t=r.clone(),n=r.start,i=e.start;if(t.start=yl(n,i),r.end!=null||e.end!=null){let s=r.end==null?r.start:r.end,a=e.end==null?e.start:e.end,o=yl(s,a);r.end==null&&o.date().getTime()<t.start.date().getTime()&&(o.isCertain("day")?o.assign("day",o.get("day")+1):o.imply("day",o.get("day")+1)),t.end=o}return t}ii.mergeDateTimeResult=eE;function yl(r,e){let t=r.clone();return e.isCertain("hour")?(t.assign("hour",e.get("hour")),t.assign("minute",e.get("minute")),e.isCertain("second")?(t.assign("second",e.get("second")),e.isCertain("millisecond")?t.assign("millisecond",e.get("millisecond")):t.imply("millisecond",e.get("millisecond"))):(t.imply("second",e.get("second")),t.imply("millisecond",e.get("millisecond")))):(t.imply("hour",e.get("hour")),t.imply("minute",e.get("minute")),t.imply("second",e.get("second")),t.imply("millisecond",e.get("millisecond"))),e.isCertain("timezoneOffset")&&t.assign("timezoneOffset",e.get("timezoneOffset")),e.isCertain("meridiem")?t.assign("meridiem",e.get("meridiem")):e.get("meridiem")!=null&&t.get("meridiem")==null&&t.imply("meridiem",e.get("meridiem")),t.get("meridiem")==Jv.Meridiem.PM&&t.get("hour")<12&&(e.isCertain("hour")?t.assign("hour",t.get("hour")+12):t.imply("hour",t.get("hour")+12)),t}ii.mergeDateTimeComponent=yl});var Rr=b(bl=>{"use strict";Object.defineProperty(bl,"__esModule",{value:!0});var tE=ni(),kh=wh(),Tl=class extends tE.MergingRefiner{shouldMergeResults(e,t,n){return(t.start.isOnlyDate()&&n.start.isOnlyTime()||n.start.isOnlyDate()&&t.start.isOnlyTime())&&e.match(this.patternBetween())!=null}mergeResults(e,t,n){let i=t.start.isOnlyDate()?kh.mergeDateTimeResult(t,n):kh.mergeDateTimeResult(n,t);return i.index=t.index,i.text=t.text+e+n.text,i}};bl.default=Tl});var Oh=b(ns=>{"use strict";var rE=ns&&ns.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ns,"__esModule",{value:!0});var nE=rE(Rr()),_l=class extends nE.default{patternBetween(){return new RegExp("^\\s*(T|at|after|before|on|of|,|-)?\\s*$")}};ns.default=_l});var Sh=b(El=>{"use strict";Object.defineProperty(El,"__esModule",{value:!0});var iE=new RegExp("^\\s*,?\\s*\\(?([A-Z]{2,4})\\)?(?=\\W|$)","i"),sE={ACDT:630,ACST:570,ADT:-180,AEDT:660,AEST:600,AFT:270,AKDT:-480,AKST:-540,ALMT:360,AMST:-180,AMT:-240,ANAST:720,ANAT:720,AQTT:300,ART:-180,AST:-240,AWDT:540,AWST:480,AZOST:0,AZOT:-60,AZST:300,AZT:240,BNT:480,BOT:-240,BRST:-120,BRT:-180,BST:60,BTT:360,CAST:480,CAT:120,CCT:390,CDT:-300,CEST:120,CET:60,CHADT:825,CHAST:765,CKT:-600,CLST:-180,CLT:-240,COT:-300,CST:-360,CVT:-60,CXT:420,ChST:600,DAVT:420,EASST:-300,EAST:-360,EAT:180,ECT:-300,EDT:-240,EEST:180,EET:120,EGST:0,EGT:-60,EST:-300,ET:-300,FJST:780,FJT:720,FKST:-180,FKT:-240,FNT:-120,GALT:-360,GAMT:-540,GET:240,GFT:-180,GILT:720,GMT:0,GST:240,GYT:-240,HAA:-180,HAC:-300,HADT:-540,HAE:-240,HAP:-420,HAR:-360,HAST:-600,HAT:-90,HAY:-480,HKT:480,HLV:-210,HNA:-240,HNC:-360,HNE:-300,HNP:-480,HNR:-420,HNT:-150,HNY:-540,HOVT:420,ICT:420,IDT:180,IOT:360,IRDT:270,IRKST:540,IRKT:540,IRST:210,IST:330,JST:540,KGT:360,KRAST:480,KRAT:480,KST:540,KUYT:240,LHDT:660,LHST:630,LINT:840,MAGST:720,MAGT:720,MART:-510,MAWT:300,MDT:-360,MESZ:120,MEZ:60,MHT:720,MMT:390,MSD:240,MSK:240,MST:-420,MUT:240,MVT:300,MYT:480,NCT:660,NDT:-90,NFT:690,NOVST:420,NOVT:360,NPT:345,NST:-150,NUT:-660,NZDT:780,NZST:720,OMSST:420,OMST:420,PDT:-420,PET:-300,PETST:720,PETT:720,PGT:600,PHOT:780,PHT:480,PKT:300,PMDT:-120,PMST:-180,PONT:660,PST:-480,PT:-480,PWT:540,PYST:-180,PYT:-240,RET:240,SAMT:240,SAST:120,SBT:660,SCT:240,SGT:480,SRT:-180,SST:-660,TAHT:-600,TFT:300,TJT:300,TKT:780,TLT:540,TMT:300,TVT:720,ULAT:480,UTC:0,UYST:-120,UYT:-180,UZT:300,VET:-210,VLAST:660,VLAT:660,VUT:660,WAST:120,WAT:60,WEST:60,WESZ:60,WET:0,WEZ:0,WFT:720,WGST:-120,WGT:-180,WIB:420,WIT:540,WITA:480,WST:780,WT:0,YAKST:600,YAKT:600,YAPT:600,YEKST:360,YEKT:360},vl=class{constructor(e){this.timezone=Object.assign(Object.assign({},sE),e)}refine(e,t){var n;let i=(n=e.option.timezones)!==null&&n!==void 0?n:{};return t.forEach(s=>{var a,o;let u=e.text.substring(s.index+s.text.length),l=iE.exec(u);if(!l)return;let c=l[1].toUpperCase(),p=(o=(a=i[c])!==null&&a!==void 0?a:this.timezone[c])!==null&&o!==void 0?o:null;if(p===null)return;e.debug(()=>{console.log(`Extracting timezone: '${c}' into: ${p} for: ${s.start}`)});let h=s.start.get("timezoneOffset");h!==null&&p!=h&&(s.start.isCertain("timezoneOffset")||c!=l[1])||s.start.isOnlyDate()&&c!=l[1]||(s.text+=l[0],s.start.isCertain("timezoneOffset")||s.start.assign("timezoneOffset",p),s.end!=null&&!s.end.isCertain("timezoneOffset")&&s.end.assign("timezoneOffset",p))}),t}};El.default=vl});var Ba=b(kl=>{"use strict";Object.defineProperty(kl,"__esModule",{value:!0});var aE=new RegExp("^\\s*(?:\\(?(?:GMT|UTC)\\s?)?([+-])(\\d{1,2})(?::?(\\d{2}))?\\)?","i"),oE=1,uE=2,lE=3,wl=class{refine(e,t){return t.forEach(function(n){if(n.start.isCertain("timezoneOffset"))return;let i=e.text.substring(n.index+n.text.length),s=aE.exec(i);if(!s)return;e.debug(()=>{console.log(`Extracting timezone: '${s[0]}' into : ${n}`)});let a=parseInt(s[uE]),o=parseInt(s[lE]||"0"),u=a*60+o;u>14*60||(s[oE]==="-"&&(u=-u),n.end!=null&&n.end.assign("timezoneOffset",u),n.start.assign("timezoneOffset",u),n.text+=s[0])}),t}};kl.default=wl});var Dh=b(Sl=>{"use strict";Object.defineProperty(Sl,"__esModule",{value:!0});var Ol=class{refine(e,t){if(t.length<2)return t;let n=[],i=t[0];for(let s=1;s<t.length;s++){let a=t[s];a.index<i.index+i.text.length?a.text.length>i.text.length&&(i=a):(n.push(i),i=a)}return i!=null&&n.push(i),n}};Sl.default=Ol});var Rh=b(is=>{"use strict";var cE=is&&is.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(is,"__esModule",{value:!0});var dE=cE(Te()),Dl=class{refine(e,t){return e.option.forwardDate&&t.forEach(function(n){let i=dE.default(e.refDate);if(n.start.isOnlyDayMonthComponent()&&i.isAfter(n.start.dayjs()))for(let s=0;s<3&&i.isAfter(n.start.dayjs());s++)n.start.imply("year",n.start.get("year")+1),e.debug(()=>{console.log(`Forward yearly adjusted for ${n} (${n.start})`)}),n.end&&!n.end.isCertain("year")&&(n.end.imply("year",n.end.get("year")+1),e.debug(()=>{console.log(`Forward yearly adjusted for ${n} (${n.end})`)}));n.start.isOnlyWeekdayComponent()&&i.isAfter(n.start.dayjs())&&(i.day()>=n.start.get("weekday")?i=i.day(n.start.get("weekday")+7):i=i.day(n.start.get("weekday")),n.start.imply("day",i.date()),n.start.imply("month",i.month()+1),n.start.imply("year",i.year()),e.debug(()=>{console.log(`Forward weekly adjusted for ${n} (${n.start})`)}),n.end&&n.end.isOnlyWeekdayComponent()&&(i.day()>n.end.get("weekday")?i=i.day(n.end.get("weekday")+7):i=i.day(n.end.get("weekday")),n.end.imply("day",i.date()),n.end.imply("month",i.month()+1),n.end.imply("year",i.year()),e.debug(()=>{console.log(`Forward weekly adjusted for ${n} (${n.end})`)})))}),t}};is.default=Dl});var Mh=b(Ml=>{"use strict";Object.defineProperty(Ml,"__esModule",{value:!0});var fE=ni(),Rl=class extends fE.Filter{constructor(e){super(),this.strictMode=e}isValid(e,t){return t.text.replace(" ","").match(/^\d*(\.\d*)?$/)?(e.debug(()=>{console.log(`Removing unlikely result '${t.text}'`)}),!1):t.start.isValidDate()?t.end&&!t.end.isValidDate()?(e.debug(()=>{console.log(`Removing invalid result: ${t} (${t.end})`)}),!1):this.strictMode?this.isStrictModeValid(e,t):!0:(e.debug(()=>{console.log(`Removing invalid result: ${t} (${t.start})`)}),!1)}isStrictModeValid(e,t){return t.start.isOnlyWeekdayComponent()?(e.debug(()=>{console.log(`(Strict) Removing weekday only component: ${t} (${t.end})`)}),!1):t.start.isOnlyTime()&&(!t.start.isCertain("hour")||!t.start.isCertain("minute"))?(e.debug(()=>{console.log(`(Strict) Removing uncertain time component: ${t} (${t.end})`)}),!1):!0}};Ml.default=Rl});var Cl=b(Al=>{"use strict";Object.defineProperty(Al,"__esModule",{value:!0});var pE=W(),hE=new RegExp("([0-9]{4})\\-([0-9]{1,2})\\-([0-9]{1,2})(?:T([0-9]{1,2}):([0-9]{1,2})(?::([0-9]{1,2})(?:\\.(\\d{1,4}))?)?(?:Z|([+-]\\d{2}):?(\\d{2})?)?)?(?=\\W|$)","i"),mE=1,gE=2,yE=3,xh=4,TE=5,Ah=6,Ch=7,Ph=8,Nh=9,xl=class extends pE.AbstractParserWithWordBoundaryChecking{innerPattern(){return hE}innerExtract(e,t){let n={};if(n.year=parseInt(t[mE]),n.month=parseInt(t[gE]),n.day=parseInt(t[yE]),t[xh]!=null)if(n.hour=parseInt(t[xh]),n.minute=parseInt(t[TE]),t[Ah]!=null&&(n.second=parseInt(t[Ah])),t[Ch]!=null&&(n.millisecond=parseInt(t[Ch])),t[Ph]==null)n.timezoneOffset=0;else{let i=parseInt(t[Ph]),s=0;t[Nh]!=null&&(s=parseInt(t[Nh]));let a=i*60;a<0?a-=s:a+=s,n.timezoneOffset=a}return n}};Al.default=xl});var Ih=b(Nl=>{"use strict";Object.defineProperty(Nl,"__esModule",{value:!0});var bE=ni(),Pl=class extends bE.MergingRefiner{mergeResults(e,t,n){let i=n.clone();return i.index=t.index,i.text=t.text+e+i.text,i.start.assign("weekday",t.start.get("weekday")),i.end&&i.end.assign("weekday",t.start.get("weekday")),i}shouldMergeResults(e,t,n){return t.start.isOnlyWeekdayComponent()&&!t.start.isCertain("hour")&&n.start.isCertain("day")&&e.match(/^,?\s*$/)!=null}};Nl.default=Pl});var Mr=b(si=>{"use strict";var En=si&&si.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(si,"__esModule",{value:!0});si.includeCommonConfiguration=void 0;var _E=En(Sh()),vE=En(Ba()),Fh=En(Dh()),EE=En(Rh()),wE=En(Mh()),kE=En(Cl()),OE=En(Ih());function SE(r,e=!1){return r.parsers.unshift(new kE.default),r.refiners.unshift(new OE.default),r.refiners.unshift(new _E.default),r.refiners.unshift(new vE.default),r.refiners.unshift(new Fh.default),r.refiners.push(new Fh.default),r.refiners.push(new EE.default),r.refiners.push(new wE.default(e)),r}si.includeCommonConfiguration=SE});var Ar=b(_e=>{"use strict";var DE=_e&&_e.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(_e,"__esModule",{value:!0});_e.noon=_e.morning=_e.midnight=_e.yesterdayEvening=_e.evening=_e.lastNight=_e.tonight=_e.theDayAfter=_e.tomorrow=_e.theDayBefore=_e.yesterday=_e.today=_e.now=void 0;var gr=Pe(),ai=DE(Te()),xr=$t(),ss=Ge();function RE(r){let e=ai.default(r.instant),t=new gr.ParsingComponents(r,{});return xr.assignSimilarDate(t,e),xr.assignSimilarTime(t,e),r.timezoneOffset!==null&&t.assign("timezoneOffset",e.utcOffset()),t}_e.now=RE;function ME(r){let e=ai.default(r.instant),t=new gr.ParsingComponents(r,{});return xr.assignSimilarDate(t,e),xr.implySimilarTime(t,e),t}_e.today=ME;function xE(r){return Lh(r,1)}_e.yesterday=xE;function Lh(r,e){return Il(r,-e)}_e.theDayBefore=Lh;function AE(r){return Il(r,1)}_e.tomorrow=AE;function Il(r,e){let t=ai.default(r.instant),n=new gr.ParsingComponents(r,{});return t=t.add(e,"day"),xr.assignSimilarDate(n,t),xr.implySimilarTime(n,t),n}_e.theDayAfter=Il;function CE(r,e=22){let t=ai.default(r.instant),n=new gr.ParsingComponents(r,{});return n.imply("hour",e),n.imply("meridiem",ss.Meridiem.PM),xr.assignSimilarDate(n,t),n}_e.tonight=CE;function PE(r,e=0){let t=ai.default(r.instant),n=new gr.ParsingComponents(r,{});return t.hour()<6&&(t=t.add(-1,"day")),xr.assignSimilarDate(n,t),n.imply("hour",e),n}_e.lastNight=PE;function NE(r,e=20){let t=new gr.ParsingComponents(r,{});return t.imply("meridiem",ss.Meridiem.PM),t.imply("hour",e),t}_e.evening=NE;function IE(r,e=20){let t=ai.default(r.instant),n=new gr.ParsingComponents(r,{});return t=t.add(-1,"day"),xr.assignSimilarDate(n,t),n.imply("hour",e),n.imply("meridiem",ss.Meridiem.PM),n}_e.yesterdayEvening=IE;function FE(r){let e=new gr.ParsingComponents(r,{});return e.imply("hour",0),e.imply("minute",0),e.imply("second",0),e}_e.midnight=FE;function LE(r,e=6){let t=new gr.ParsingComponents(r,{});return t.imply("meridiem",ss.Meridiem.AM),t.imply("hour",e),t}_e.morning=LE;function UE(r){let e=new gr.ParsingComponents(r,{});return e.imply("meridiem",ss.Meridiem.AM),e.imply("hour",12),e}_e.noon=UE});var Uh=b(er=>{"use strict";var WE=er&&er.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),qE=er&&er.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),$E=er&&er.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&WE(e,r,t);return qE(e,r),e},YE=er&&er.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(er,"__esModule",{value:!0});var GE=YE(Te()),jE=W(),BE=$t(),as=$E(Ar()),HE=/(now|today|tonight|tomorrow|tmr|tmrw|yesterday|last\s*night)(?=\W|$)/i,Fl=class extends jE.AbstractParserWithWordBoundaryChecking{innerPattern(e){return HE}innerExtract(e,t){let n=GE.default(e.refDate),i=t[0].toLowerCase(),s=e.createParsingComponents();switch(i){case"now":return as.now(e.reference);case"today":return as.today(e.reference);case"yesterday":return as.yesterday(e.reference);case"tomorrow":case"tmr":case"tmrw":return as.tomorrow(e.reference);case"tonight":return as.tonight(e.reference);default:i.match(/last\s*night/)&&(n.hour()>6&&(n=n.add(-1,"day")),BE.assignSimilarDate(s,n),s.imply("hour",0));break}return s}};er.default=Fl});var Wh=b(os=>{"use strict";var zE=os&&os.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(os,"__esModule",{value:!0});var Ha=Ge(),KE=W(),VE=zE(Te()),QE=$t(),XE=/(?:this)?\s{0,3}(morning|afternoon|evening|night|midnight|noon)(?=\W|$)/i,Ll=class extends KE.AbstractParserWithWordBoundaryChecking{innerPattern(){return XE}innerExtract(e,t){let n=VE.default(e.refDate),i=e.createParsingComponents();switch(t[1].toLowerCase()){case"afternoon":i.imply("meridiem",Ha.Meridiem.PM),i.imply("hour",15);break;case"evening":case"night":i.imply("meridiem",Ha.Meridiem.PM),i.imply("hour",20);break;case"midnight":QE.assignTheNextDay(i,n),i.imply("hour",0),i.imply("minute",0),i.imply("second",0);break;case"morning":i.imply("meridiem",Ha.Meridiem.AM),i.imply("hour",6);break;case"noon":i.imply("meridiem",Ha.Meridiem.AM),i.imply("hour",12);break}return i}};os.default=Ll});var wn=b(en=>{"use strict";var ZE=en&&en.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(en,"__esModule",{value:!0});en.toDayJSClosestWeekday=en.toDayJSWeekday=void 0;var qh=ZE(Te());function JE(r,e,t){if(!t)return $h(r,e);let n=qh.default(r);switch(t){case"this":n=n.day(e);break;case"next":n=n.day(e+7);break;case"last":n=n.day(e-7);break}return n}en.toDayJSWeekday=JE;function $h(r,e){let t=qh.default(r),n=t.day();return Math.abs(e-7-n)<Math.abs(e-n)?t=t.day(e-7):Math.abs(e+7-n)<Math.abs(e-n)?t=t.day(e+7):t=t.day(e),t}en.toDayJSClosestWeekday=$h});var Gh=b(Wl=>{"use strict";Object.defineProperty(Wl,"__esModule",{value:!0});var Yh=nt(),ew=Ee(),tw=W(),rw=wn(),nw=new RegExp(`(?:(?:\\,|\\(|\\\uFF08)\\s*)?(?:on\\s*?)?(?:(this|last|past|next)\\s*)?(${ew.matchAnyPattern(Yh.WEEKDAY_DICTIONARY)})(?:\\s*(?:\\,|\\)|\\\uFF09))?(?:\\s*(this|last|past|next)\\s*week)?(?=\\W|$)`,"i"),iw=1,sw=2,aw=3,Ul=class extends tw.AbstractParserWithWordBoundaryChecking{innerPattern(){return nw}innerExtract(e,t){let n=t[sw].toLowerCase(),i=Yh.WEEKDAY_DICTIONARY[n],s=t[iw],a=t[aw],o=s||a;o=o||"",o=o.toLowerCase();let u=null;o=="last"||o=="past"?u="last":o=="next"?u="next":o=="this"&&(u="this");let l=rw.toDayJSWeekday(e.refDate,i,u);return e.createParsingComponents().assign("weekday",i).imply("day",l.date()).imply("month",l.month()+1).imply("year",l.year())}};Wl.default=Ul});var Hh=b(us=>{"use strict";var ow=us&&us.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(us,"__esModule",{value:!0});var Bh=nt(),jh=Pe(),uw=ow(Te()),lw=W(),cw=Ee(),dw=new RegExp(`(this|last|past|next|after\\s*this)\\s*(${cw.matchAnyPattern(Bh.TIME_UNIT_DICTIONARY)})(?=\\s*)(?=\\W|$)`,"i"),fw=1,pw=2,ql=class extends lw.AbstractParserWithWordBoundaryChecking{innerPattern(){return dw}innerExtract(e,t){let n=t[fw].toLowerCase(),i=t[pw].toLowerCase(),s=Bh.TIME_UNIT_DICTIONARY[i];if(n=="next"||n.startsWith("after")){let u={};return u[s]=1,jh.ParsingComponents.createRelativeFromReference(e.reference,u)}if(n=="last"||n=="past"){let u={};return u[s]=-1,jh.ParsingComponents.createRelativeFromReference(e.reference,u)}let a=e.createParsingComponents(),o=uw.default(e.reference.instant);return i.match(/week/i)?(o=o.add(-o.get("d"),"d"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.imply("year",o.year())):i.match(/month/i)?(o=o.add(-o.date()+1,"d"),a.imply("day",o.date()),a.assign("year",o.year()),a.assign("month",o.month()+1)):i.match(/year/i)&&(o=o.add(-o.date()+1,"d"),o=o.add(-o.month(),"month"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.assign("year",o.year())),a}};us.default=ql});var tr=b(li=>{"use strict";Object.defineProperty(li,"__esModule",{value:!0});li.ParsingContext=li.Chrono=void 0;var oi=Pe(),hw=$l(),ui=class{constructor(e){e=e||hw.createCasualConfiguration(),this.parsers=[...e.parsers],this.refiners=[...e.refiners]}clone(){return new ui({parsers:[...this.parsers],refiners:[...this.refiners]})}parseDate(e,t,n){let i=this.parse(e,t,n);return i.length>0?i[0].start.date():null}parse(e,t,n){let i=new za(e,t,n),s=[];return this.parsers.forEach(a=>{let o=ui.executeParser(i,a);s=s.concat(o)}),s.sort((a,o)=>a.index-o.index),this.refiners.forEach(function(a){s=a.refine(i,s)}),s}static executeParser(e,t){let n=[],i=t.pattern(e),s=e.text,a=e.text,o=i.exec(a);for(;o;){let u=o.index+s.length-a.length;o.index=u;let l=t.extract(e,o);if(!l){a=s.substring(o.index+1),o=i.exec(a);continue}let c=null;l instanceof oi.ParsingResult?c=l:l instanceof oi.ParsingComponents?(c=e.createParsingResult(o.index,o[0]),c.start=l):c=e.createParsingResult(o.index,o[0],l),e.debug(()=>console.log(`${t.constructor.name} extracted result ${c}`)),n.push(c),a=s.substring(u+c.text.length),o=i.exec(a)}return n}};li.Chrono=ui;var za=class{constructor(e,t,n){this.text=e,this.reference=new oi.ReferenceWithTimezone(t),this.option=n!=null?n:{},this.refDate=this.reference.instant}createParsingComponents(e){return e instanceof oi.ParsingComponents?e:new oi.ParsingComponents(this.reference,e)}createParsingResult(e,t,n,i){let s=typeof t=="string"?t:this.text.substring(e,t),a=n?this.createParsingComponents(n):null,o=i?this.createParsingComponents(i):null;return new oi.ParsingResult(this.reference,e,s,a,o)}debug(e){this.option.debug&&(this.option.debug instanceof Function?this.option.debug(e):this.option.debug.debug(e))}};li.ParsingContext=za});var kn=b(jl=>{"use strict";Object.defineProperty(jl,"__esModule",{value:!0});var zh=rt(),mw=new RegExp("([^\\d]|^)([0-3]{0,1}[0-9]{1})[\\/\\.\\-]([0-3]{0,1}[0-9]{1})(?:[\\/\\.\\-]([0-9]{4}|[0-9]{2}))?(\\W|$)","i"),Ka=1,Kh=5,Vh=2,Qh=3,Yl=4,Gl=class{constructor(e){this.groupNumberMonth=e?Qh:Vh,this.groupNumberDay=e?Vh:Qh}pattern(){return mw}extract(e,t){if(t[Ka]=="/"||t[Kh]=="/"){t.index+=t[0].length;return}let n=t.index+t[Ka].length,i=t[0].substr(t[Ka].length,t[0].length-t[Ka].length-t[Kh].length);if(i.match(/^\d\.\d$/)||i.match(/^\d\.\d{1,2}\.\d{1,2}\s*$/)||!t[Yl]&&t[0].indexOf("/")<0)return;let s=e.createParsingResult(n,i),a=parseInt(t[this.groupNumberMonth]),o=parseInt(t[this.groupNumberDay]);if((a<1||a>12)&&a>12)if(o>=1&&o<=12&&a<=31)[o,a]=[a,o];else return null;if(o<1||o>31)return null;if(s.start.assign("day",o),s.start.assign("month",a),t[Yl]){let u=parseInt(t[Yl]),l=zh.findMostLikelyADYear(u);s.start.assign("year",l)}else{let u=zh.findYearClosestToRef(e.refDate,o,a);s.start.imply("year",u)}return s}};jl.default=Gl});var Zh=b(Hl=>{"use strict";Object.defineProperty(Hl,"__esModule",{value:!0});var Xh=nt(),gw=Pe(),yw=W(),Tw=Yt(),bw=new RegExp(`(this|last|past|next|after|\\+|-)\\s*(${Xh.TIME_UNITS_PATTERN})(?=\\W|$)`,"i"),Bl=class extends yw.AbstractParserWithWordBoundaryChecking{innerPattern(){return bw}innerExtract(e,t){let n=t[1].toLowerCase(),i=Xh.parseTimeUnits(t[2]);switch(n){case"last":case"past":case"-":i=Tw.reverseTimeUnits(i);break}return gw.ParsingComponents.createRelativeFromReference(e.reference,i)}};Hl.default=Bl});var em=b(Vl=>{"use strict";Object.defineProperty(Vl,"__esModule",{value:!0});var _w=ni(),zl=Pe(),vw=nt(),Ew=Yt();function Jh(r){return r.text.match(/\s+(before|from)$/i)!=null}function ww(r){return r.text.match(/\s+(after|since)$/i)!=null}var Kl=class extends _w.MergingRefiner{patternBetween(){return/^\s*$/i}shouldMergeResults(e,t,n){return!e.match(this.patternBetween())||!Jh(t)&&!ww(t)?!1:!!n.start.get("day")&&!!n.start.get("month")&&!!n.start.get("year")}mergeResults(e,t,n){let i=vw.parseTimeUnits(t.text);Jh(t)&&(i=Ew.reverseTimeUnits(i));let s=zl.ParsingComponents.createRelativeFromReference(new zl.ReferenceWithTimezone(n.start.date()),i);return new zl.ParsingResult(n.reference,t.index,`${t.text}${e}${n.text}`,s)}};Vl.default=Kl});var $l=b(We=>{"use strict";var Be=We&&We.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(We,"__esModule",{value:!0});We.createConfiguration=We.createCasualConfiguration=We.parseDate=We.parse=We.GB=We.strict=We.casual=void 0;var kw=Be(Jp()),Ow=Be(sh()),Sw=Be(ch()),Dw=Be(ph()),Rw=Be(gh()),Mw=Be(yh()),xw=Be(bh()),Aw=Be(_h()),Cw=Be(vh()),Pw=Be(Eh()),Nw=Be(Oh()),Iw=Mr(),Fw=Be(Uh()),Lw=Be(Wh()),Uw=Be(Gh()),Ww=Be(Hh()),Ql=tr(),qw=Be(kn()),$w=Be(Zh()),Yw=Be(em());We.casual=new Ql.Chrono(tm(!1));We.strict=new Ql.Chrono(Va(!0,!1));We.GB=new Ql.Chrono(Va(!1,!0));function Gw(r,e,t){return We.casual.parse(r,e,t)}We.parse=Gw;function jw(r,e,t){return We.casual.parseDate(r,e,t)}We.parseDate=jw;function tm(r=!1){let e=Va(!1,r);return e.parsers.unshift(new Fw.default),e.parsers.unshift(new Lw.default),e.parsers.unshift(new Dw.default),e.parsers.unshift(new Ww.default),e.parsers.unshift(new $w.default),e}We.createCasualConfiguration=tm;function Va(r=!0,e=!1){return Iw.includeCommonConfiguration({parsers:[new qw.default(e),new kw.default,new Ow.default,new Sw.default,new Uw.default,new Rw.default,new Mw.default,new xw.default(r),new Aw.default(r),new Cw.default(r)],refiners:[new Yw.default,new Nw.default,new Pw.default]},r)}We.createConfiguration=Va});var rm=b(Zl=>{"use strict";Object.defineProperty(Zl,"__esModule",{value:!0});var Bw=vn(),Xl=class extends Bw.AbstractTimeExpressionParser{primaryPrefix(){return"(?:(?:um|von)\\s*)?"}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|bis)\\s*"}extractPrimaryTimeComponents(e,t){return t[0].match(/^\s*\d{4}\s*$/)?null:super.extractPrimaryTimeComponents(e,t)}};Zl.default=Xl});var ls=b(Oe=>{"use strict";Object.defineProperty(Oe,"__esModule",{value:!0});Oe.parseTimeUnits=Oe.TIME_UNITS_PATTERN=Oe.parseYear=Oe.YEAR_PATTERN=Oe.parseNumberPattern=Oe.NUMBER_PATTERN=Oe.TIME_UNIT_DICTIONARY=Oe.INTEGER_WORD_DICTIONARY=Oe.MONTH_DICTIONARY=Oe.WEEKDAY_DICTIONARY=void 0;var Jl=Ee(),Hw=rt();Oe.WEEKDAY_DICTIONARY={sonntag:0,so:0,montag:1,mo:1,dienstag:2,di:2,mittwoch:3,mi:3,donnerstag:4,do:4,freitag:5,fr:5,samstag:6,sa:6};Oe.MONTH_DICTIONARY={januar:1,j\u00E4nner:1,janner:1,jan:1,"jan.":1,februar:2,feber:2,feb:2,"feb.":2,m\u00E4rz:3,maerz:3,m\u00E4r:3,"m\xE4r.":3,mrz:3,"mrz.":3,april:4,apr:4,"apr.":4,mai:5,juni:6,jun:6,"jun.":6,juli:7,jul:7,"jul.":7,august:8,aug:8,"aug.":8,september:9,sep:9,"sep.":9,sept:9,"sept.":9,oktober:10,okt:10,"okt.":10,november:11,nov:11,"nov.":11,dezember:12,dez:12,"dez.":12};Oe.INTEGER_WORD_DICTIONARY={eins:1,eine:1,einem:1,einen:1,einer:1,zwei:2,drei:3,vier:4,f\u00FCnf:5,fuenf:5,sechs:6,sieben:7,acht:8,neun:9,zehn:10,elf:11,zw\u00F6lf:12,zwoelf:12};Oe.TIME_UNIT_DICTIONARY={sek:"second",sekunde:"second",sekunden:"second",min:"minute",minute:"minute",minuten:"minute",h:"hour",std:"hour",stunde:"hour",stunden:"hour",tag:"d",tage:"d",tagen:"d",woche:"week",wochen:"week",monat:"month",monate:"month",monaten:"month",monats:"month",quartal:"quarter",quartals:"quarter",quartale:"quarter",quartalen:"quarter",a:"year",j:"year",jr:"year",jahr:"year",jahre:"year",jahren:"year",jahres:"year"};Oe.NUMBER_PATTERN=`(?:${Jl.matchAnyPattern(Oe.INTEGER_WORD_DICTIONARY)}|[0-9]+|[0-9]+\\.[0-9]+|half(?:\\s*an?)?|an?\\b(?:\\s*few)?|few|several|a?\\s*couple\\s*(?:of)?)`;function im(r){let e=r.toLowerCase();return Oe.INTEGER_WORD_DICTIONARY[e]!==void 0?Oe.INTEGER_WORD_DICTIONARY[e]:e==="a"||e==="an"?1:e.match(/few/)?3:e.match(/half/)?.5:e.match(/couple/)?2:e.match(/several/)?7:parseFloat(e)}Oe.parseNumberPattern=im;Oe.YEAR_PATTERN="(?:[0-9]{1,4}(?:\\s*[vn]\\.?\\s*(?:C(?:hr)?|(?:u\\.?|d\\.?(?:\\s*g\\.?)?)?\\s*Z)\\.?|\\s*(?:u\\.?|d\\.?(?:\\s*g\\.)?)\\s*Z\\.?)?)";function zw(r){if(/v/i.test(r))return-parseInt(r.replace(/[^0-9]+/gi,""));if(/n/i.test(r))return parseInt(r.replace(/[^0-9]+/gi,""));if(/z/i.test(r))return parseInt(r.replace(/[^0-9]+/gi,""));let e=parseInt(r);return Hw.findMostLikelyADYear(e)}Oe.parseYear=zw;var sm=`(${Oe.NUMBER_PATTERN})\\s{0,5}(${Jl.matchAnyPattern(Oe.TIME_UNIT_DICTIONARY)})\\s{0,5}`,nm=new RegExp(sm,"i");Oe.TIME_UNITS_PATTERN=Jl.repeatedTimeunitPattern("",sm);function Kw(r){let e={},t=r,n=nm.exec(t);for(;n;)Vw(e,n),t=t.substring(n[0].length),n=nm.exec(t);return e}Oe.parseTimeUnits=Kw;function Vw(r,e){let t=im(e[1]),n=Oe.TIME_UNIT_DICTIONARY[e[2].toLowerCase()];r[n]=t}});var om=b(tc=>{"use strict";Object.defineProperty(tc,"__esModule",{value:!0});var am=ls(),Qw=Ee(),Xw=W(),Zw=wn(),Jw=new RegExp(`(?:(?:\\,|\\(|\\\uFF08)\\s*)?(?:a[mn]\\s*?)?(?:(diese[mn]|letzte[mn]|n(?:\xE4|ae)chste[mn])\\s*)?(${Qw.matchAnyPattern(am.WEEKDAY_DICTIONARY)})(?:\\s*(?:\\,|\\)|\\\uFF09))?(?:\\s*(diese|letzte|n(?:\xE4|ae)chste)\\s*woche)?(?=\\W|$)`,"i"),ek=1,tk=3,rk=2,ec=class extends Xw.AbstractParserWithWordBoundaryChecking{innerPattern(){return Jw}innerExtract(e,t){let n=t[rk].toLowerCase(),i=am.WEEKDAY_DICTIONARY[n],s=t[ek],a=t[tk],o=s||a;o=o||"",o=o.toLowerCase();let u=null;o.match(/letzte/)?u="last":o.match(/chste/)?u="next":o.match(/diese/)&&(u="this");let l=Zw.toDayJSWeekday(e.refDate,i,u);return e.createParsingComponents().assign("weekday",i).imply("day",l.date()).imply("month",l.month()+1).imply("year",l.year())}};tc.default=ec});var dm=b(rc=>{"use strict";Object.defineProperty(rc,"__esModule",{value:!0});var tn=Ge(),nk=new RegExp("(^|\\s|T)(?:(?:um|von)\\s*)?(\\d{1,2})(?:h|:)?(?:(\\d{1,2})(?:m|:)?)?(?:(\\d{1,2})(?:s)?)?(?:\\s*Uhr)?(?:\\s*(morgens|vormittags|nachmittags|abends|nachts|am\\s+(?:Morgen|Vormittag|Nachmittag|Abend)|in\\s+der\\s+Nacht))?(?=\\W|$)","i"),ik=new RegExp("^\\s*(\\-|\\\u2013|\\~|\\\u301C|bis(?:\\s+um)?|\\?)\\s*(\\d{1,2})(?:h|:)?(?:(\\d{1,2})(?:m|:)?)?(?:(\\d{1,2})(?:s)?)?(?:\\s*Uhr)?(?:\\s*(morgens|vormittags|nachmittags|abends|nachts|am\\s+(?:Morgen|Vormittag|Nachmittag|Abend)|in\\s+der\\s+Nacht))?(?=\\W|$)","i"),sk=2,um=3,lm=4,cm=5,ci=class{pattern(e){return nk}extract(e,t){let n=e.createParsingResult(t.index+t[1].length,t[0].substring(t[1].length));if(n.text.match(/^\d{4}$/)||(n.start=ci.extractTimeComponent(n.start.clone(),t),!n.start))return t.index+=t[0].length,null;let i=e.text.substring(t.index+t[0].length),s=ik.exec(i);return s&&(n.end=ci.extractTimeComponent(n.start.clone(),s),n.end&&(n.text+=s[0])),n}static extractTimeComponent(e,t){let n=0,i=0,s=null;if(n=parseInt(t[sk]),t[um]!=null&&(i=parseInt(t[um])),i>=60||n>24)return null;if(n>=12&&(s=tn.Meridiem.PM),t[cm]!=null){if(n>12)return null;let a=t[cm].toLowerCase();a.match(/morgen|vormittag/)&&(s=tn.Meridiem.AM,n==12&&(n=0)),a.match(/nachmittag|abend/)&&(s=tn.Meridiem.PM,n!=12&&(n+=12)),a.match(/nacht/)&&(n==12?(s=tn.Meridiem.AM,n=0):n<6?s=tn.Meridiem.AM:(s=tn.Meridiem.PM,n+=12))}if(e.assign("hour",n),e.assign("minute",i),s!==null?e.assign("meridiem",s):n<12?e.imply("meridiem",tn.Meridiem.AM):e.imply("meridiem",tn.Meridiem.PM),t[lm]!=null){let a=parseInt(t[lm]);if(a>=60)return null;e.assign("second",a)}return e}};rc.default=ci});var fm=b(cs=>{"use strict";var ak=cs&&cs.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(cs,"__esModule",{value:!0});var ok=ak(mr()),nc=class extends ok.default{patternBetween(){return/^\s*(bis(?:\s*(?:am|zum))?|-)\s*$/i}};cs.default=nc});var pm=b(ds=>{"use strict";var uk=ds&&ds.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ds,"__esModule",{value:!0});var lk=uk(Rr()),ic=class extends lk.default{patternBetween(){return new RegExp("^\\s*(T|um|am|,|-)?\\s*$")}};ds.default=ic});var sc=b(ps=>{"use strict";var ck=ps&&ps.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ps,"__esModule",{value:!0});var dk=ck(Te()),On=Ge(),fk=W(),pk=$t(),hk=Yt(),fs=class extends fk.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(diesen)?\s*(morgen|vormittag|mittags?|nachmittag|abend|nacht|mitternacht)(?=\W|$)/i}innerExtract(e,t){let n=dk.default(e.refDate),i=t[2].toLowerCase(),s=e.createParsingComponents();return pk.implySimilarTime(s,n),fs.extractTimeComponents(s,i)}static extractTimeComponents(e,t){switch(t){case"morgen":e.imply("hour",6),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",On.Meridiem.AM);break;case"vormittag":e.imply("hour",9),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",On.Meridiem.AM);break;case"mittag":case"mittags":e.imply("hour",12),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",On.Meridiem.AM);break;case"nachmittag":e.imply("hour",15),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",On.Meridiem.PM);break;case"abend":e.imply("hour",18),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",On.Meridiem.PM);break;case"nacht":e.imply("hour",22),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",On.Meridiem.PM);break;case"mitternacht":e.get("hour")>1&&(e=hk.addImpliedTimeUnits(e,{day:1})),e.imply("hour",0),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",On.Meridiem.AM);break}return e}};ps.default=fs});var gm=b(rr=>{"use strict";var mk=rr&&rr.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),gk=rr&&rr.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),yk=rr&&rr.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&mk(e,r,t);return gk(e,r),e},mm=rr&&rr.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(rr,"__esModule",{value:!0});var Tk=mm(Te()),bk=W(),Sn=$t(),_k=mm(sc()),hm=yk(Ar()),vk=new RegExp("(jetzt|heute|morgen|\xFCbermorgen|uebermorgen|gestern|vorgestern|letzte\\s*nacht)(?:\\s*(morgen|vormittag|mittags?|nachmittag|abend|nacht|mitternacht))?(?=\\W|$)","i"),Ek=1,wk=2,ac=class extends bk.AbstractParserWithWordBoundaryChecking{innerPattern(e){return vk}innerExtract(e,t){let n=Tk.default(e.refDate),i=(t[Ek]||"").toLowerCase(),s=(t[wk]||"").toLowerCase(),a=e.createParsingComponents();switch(i){case"jetzt":a=hm.now(e.reference);break;case"heute":a=hm.today(e.reference);break;case"morgen":Sn.assignTheNextDay(a,n);break;case"\xFCbermorgen":case"uebermorgen":n=n.add(1,"day"),Sn.assignTheNextDay(a,n);break;case"gestern":n=n.add(-1,"day"),Sn.assignSimilarDate(a,n),Sn.implySimilarTime(a,n);break;case"vorgestern":n=n.add(-2,"day"),Sn.assignSimilarDate(a,n),Sn.implySimilarTime(a,n);break;default:i.match(/letzte\s*nacht/)&&(n.hour()>6&&(n=n.add(-1,"day")),Sn.assignSimilarDate(a,n),a.imply("hour",0));break}return s&&(a=_k.default.extractTimeComponents(a,s)),a}};rr.default=ac});var Em=b(uc=>{"use strict";Object.defineProperty(uc,"__esModule",{value:!0});var kk=rt(),_m=ls(),vm=ls(),Ok=Ee(),Sk=W(),Dk=new RegExp(`(?:am\\s*?)?(?:den\\s*?)?([0-9]{1,2})\\.(?:\\s*(?:bis(?:\\s*(?:am|zum))?|\\-|\\\u2013|\\s)\\s*([0-9]{1,2})\\.?)?\\s*(${Ok.matchAnyPattern(_m.MONTH_DICTIONARY)})(?:(?:-|/|,?\\s*)(${vm.YEAR_PATTERN}(?![^\\s]\\d)))?(?=\\W|$)`,"i"),ym=1,Tm=2,Rk=3,bm=4,oc=class extends Sk.AbstractParserWithWordBoundaryChecking{innerPattern(){return Dk}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=_m.MONTH_DICTIONARY[t[Rk].toLowerCase()],s=parseInt(t[ym]);if(s>31)return t.index=t.index+t[ym].length,null;if(n.start.assign("month",i),n.start.assign("day",s),t[bm]){let a=vm.parseYear(t[bm]);n.start.assign("year",a)}else{let a=kk.findYearClosestToRef(e.refDate,s,i);n.start.imply("year",a)}if(t[Tm]){let a=parseInt(t[Tm]);n.end=n.start.clone(),n.end.assign("day",a)}return n}};uc.default=oc});var wm=b(cc=>{"use strict";Object.defineProperty(cc,"__esModule",{value:!0});var Qa=ls(),Mk=Pe(),xk=W(),Ak=Yt(),Ck=Ee(),lc=class extends xk.AbstractParserWithWordBoundaryChecking{constructor(){super()}innerPattern(){return new RegExp(`(?:\\s*((?:n\xE4chste|kommende|folgende|letzte|vergangene|vorige|vor(?:her|an)gegangene)(?:s|n|m|r)?|vor|in)\\s*)?(${Qa.NUMBER_PATTERN})?(?:\\s*(n\xE4chste|kommende|folgende|letzte|vergangene|vorige|vor(?:her|an)gegangene)(?:s|n|m|r)?)?\\s*(${Ck.matchAnyPattern(Qa.TIME_UNIT_DICTIONARY)})`,"i")}innerExtract(e,t){let n=t[2]?Qa.parseNumberPattern(t[2]):1,i=Qa.TIME_UNIT_DICTIONARY[t[4].toLowerCase()],s={};s[i]=n;let a=t[1]||t[3]||"";if(a=a.toLowerCase(),!!a)return(/vor/.test(a)||/letzte/.test(a)||/vergangen/.test(a))&&(s=Ak.reverseTimeUnits(s)),Mk.ParsingComponents.createRelativeFromReference(e.reference,s)}};cc.default=lc});var Sm=b(He=>{"use strict";var nr=He&&He.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(He,"__esModule",{value:!0});He.createConfiguration=He.createCasualConfiguration=He.parseDate=He.parse=He.strict=He.casual=void 0;var Pk=Mr(),km=tr(),Nk=nr(kn()),Ik=nr(Cl()),Fk=nr(rm()),Lk=nr(om()),Uk=nr(dm()),Wk=nr(fm()),qk=nr(pm()),$k=nr(gm()),Yk=nr(sc()),Gk=nr(Em()),jk=nr(wm());He.casual=new km.Chrono(Om());He.strict=new km.Chrono(dc(!0));function Bk(r,e,t){return He.casual.parse(r,e,t)}He.parse=Bk;function Hk(r,e,t){return He.casual.parseDate(r,e,t)}He.parseDate=Hk;function Om(r=!0){let e=dc(!1,r);return e.parsers.unshift(new Yk.default),e.parsers.unshift(new $k.default),e.parsers.unshift(new jk.default),e}He.createCasualConfiguration=Om;function dc(r=!0,e=!0){return Pk.includeCommonConfiguration({parsers:[new Ik.default,new Nk.default(e),new Fk.default,new Uk.default,new Gk.default,new Lk.default],refiners:[new Wk.default,new qk.default]},r)}He.createConfiguration=dc});var Rm=b(ir=>{"use strict";var zk=ir&&ir.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),Kk=ir&&ir.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),Vk=ir&&ir.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&zk(e,r,t);return Kk(e,r),e},Qk=ir&&ir.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ir,"__esModule",{value:!0});var Xk=Qk(Te()),Zk=Ge(),Jk=W(),Dm=$t(),Xa=Vk(Ar()),fc=class extends Jk.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(maintenant|aujourd'hui|demain|hier|cette\s*nuit|la\s*veille)(?=\W|$)/i}innerExtract(e,t){let n=Xk.default(e.refDate),i=t[0].toLowerCase(),s=e.createParsingComponents();switch(i){case"maintenant":return Xa.now(e.reference);case"aujourd'hui":return Xa.today(e.reference);case"hier":return Xa.yesterday(e.reference);case"demain":return Xa.tomorrow(e.reference);default:i.match(/cette\s*nuit/)?(Dm.assignSimilarDate(s,n),s.imply("hour",22),s.imply("meridiem",Zk.Meridiem.PM)):i.match(/la\s*veille/)&&(n=n.add(-1,"day"),Dm.assignSimilarDate(s,n),s.imply("hour",0))}return s}};ir.default=fc});var Mm=b(hc=>{"use strict";Object.defineProperty(hc,"__esModule",{value:!0});var hs=Ge(),e1=W(),pc=class extends e1.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(cet?)?\s*(matin|soir|après-midi|aprem|a midi|à minuit)(?=\W|$)/i}innerExtract(e,t){let n=t[2].toLowerCase(),i=e.createParsingComponents();switch(n){case"apr\xE8s-midi":case"aprem":i.imply("hour",14),i.imply("minute",0),i.imply("meridiem",hs.Meridiem.PM);break;case"soir":i.imply("hour",18),i.imply("minute",0),i.imply("meridiem",hs.Meridiem.PM);break;case"matin":i.imply("hour",8),i.imply("minute",0),i.imply("meridiem",hs.Meridiem.AM);break;case"a midi":i.imply("hour",12),i.imply("minute",0),i.imply("meridiem",hs.Meridiem.AM);break;case"\xE0 minuit":i.imply("hour",0),i.imply("meridiem",hs.Meridiem.AM);break}return i}};hc.default=pc});var xm=b(gc=>{"use strict";Object.defineProperty(gc,"__esModule",{value:!0});var t1=vn(),mc=class extends t1.AbstractTimeExpressionParser{primaryPrefix(){return"(?:(?:[\xE0a])\\s*)?"}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|[\xE0a]|\\?)\\s*"}extractPrimaryTimeComponents(e,t){return t[0].match(/^\s*\d{4}\s*$/)?null:super.extractPrimaryTimeComponents(e,t)}};gc.default=mc});var Am=b(ms=>{"use strict";var r1=ms&&ms.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ms,"__esModule",{value:!0});var n1=r1(Rr()),yc=class extends n1.default{patternBetween(){return new RegExp("^\\s*(T|\xE0|a|vers|de|,|-)?\\s*$")}};ms.default=yc});var Cm=b(gs=>{"use strict";var i1=gs&&gs.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(gs,"__esModule",{value:!0});var s1=i1(mr()),Tc=class extends s1.default{patternBetween(){return/^\s*(à|a|-)\s*$/i}};gs.default=Tc});var rn=b(be=>{"use strict";Object.defineProperty(be,"__esModule",{value:!0});be.parseTimeUnits=be.TIME_UNITS_PATTERN=be.parseYear=be.YEAR_PATTERN=be.parseOrdinalNumberPattern=be.ORDINAL_NUMBER_PATTERN=be.parseNumberPattern=be.NUMBER_PATTERN=be.TIME_UNIT_DICTIONARY=be.INTEGER_WORD_DICTIONARY=be.MONTH_DICTIONARY=be.WEEKDAY_DICTIONARY=void 0;var bc=Ee();be.WEEKDAY_DICTIONARY={dimanche:0,dim:0,lundi:1,lun:1,mardi:2,mar:2,mercredi:3,mer:3,jeudi:4,jeu:4,vendredi:5,ven:5,samedi:6,sam:6};be.MONTH_DICTIONARY={janvier:1,jan:1,"jan.":1,f\u00E9vrier:2,f\u00E9v:2,"f\xE9v.":2,fevrier:2,fev:2,"fev.":2,mars:3,mar:3,"mar.":3,avril:4,avr:4,"avr.":4,mai:5,juin:6,jun:6,juillet:7,juil:7,jul:7,"jul.":7,ao\u00FBt:8,aout:8,septembre:9,sep:9,"sep.":9,sept:9,"sept.":9,octobre:10,oct:10,"oct.":10,novembre:11,nov:11,"nov.":11,d\u00E9cembre:12,decembre:12,dec:12,"dec.":12};be.INTEGER_WORD_DICTIONARY={un:1,deux:2,trois:3,quatre:4,cinq:5,six:6,sept:7,huit:8,neuf:9,dix:10,onze:11,douze:12,treize:13};be.TIME_UNIT_DICTIONARY={sec:"second",seconde:"second",secondes:"second",min:"minute",mins:"minute",minute:"minute",minutes:"minute",h:"hour",hr:"hour",hrs:"hour",heure:"hour",heures:"hour",jour:"d",jours:"d",semaine:"week",semaines:"week",mois:"month",trimestre:"quarter",trimestres:"quarter",ans:"year",ann\u00E9e:"year",ann\u00E9es:"year"};be.NUMBER_PATTERN=`(?:${bc.matchAnyPattern(be.INTEGER_WORD_DICTIONARY)}|[0-9]+|[0-9]+\\.[0-9]+|une?\\b|quelques?|demi-?)`;function Nm(r){let e=r.toLowerCase();return be.INTEGER_WORD_DICTIONARY[e]!==void 0?be.INTEGER_WORD_DICTIONARY[e]:e==="une"||e==="un"?1:e.match(/quelques?/)?3:e.match(/demi-?/)?.5:parseFloat(e)}be.parseNumberPattern=Nm;be.ORDINAL_NUMBER_PATTERN="(?:[0-9]{1,2}(?:er)?)";function a1(r){let e=r.toLowerCase();return e=e.replace(/(?:er)$/i,""),parseInt(e)}be.parseOrdinalNumberPattern=a1;be.YEAR_PATTERN="(?:[1-9][0-9]{0,3}\\s*(?:AC|AD|p\\.\\s*C(?:hr?)?\\.\\s*n\\.)|[1-2][0-9]{3}|[5-9][0-9])";function o1(r){if(/AC/i.test(r))return r=r.replace(/BC/i,""),-parseInt(r);if(/AD/i.test(r)||/C/i.test(r))return r=r.replace(/[^\d]+/i,""),parseInt(r);let e=parseInt(r);return e<100&&(e>50?e=e+1900:e=e+2e3),e}be.parseYear=o1;var Im=`(${be.NUMBER_PATTERN})\\s{0,5}(${bc.matchAnyPattern(be.TIME_UNIT_DICTIONARY)})\\s{0,5}`,Pm=new RegExp(Im,"i");be.TIME_UNITS_PATTERN=bc.repeatedTimeunitPattern("",Im);function u1(r){let e={},t=r,n=Pm.exec(t);for(;n;)l1(e,n),t=t.substring(n[0].length),n=Pm.exec(t);return e}be.parseTimeUnits=u1;function l1(r,e){let t=Nm(e[1]),n=be.TIME_UNIT_DICTIONARY[e[2].toLowerCase()];r[n]=t}});var Lm=b(vc=>{"use strict";Object.defineProperty(vc,"__esModule",{value:!0});var Fm=rn(),c1=Ee(),d1=W(),f1=wn(),p1=new RegExp(`(?:(?:\\,|\\(|\\\uFF08)\\s*)?(?:(?:ce)\\s*)?(${c1.matchAnyPattern(Fm.WEEKDAY_DICTIONARY)})(?:\\s*(?:\\,|\\)|\\\uFF09))?(?:\\s*(dernier|prochain)\\s*)?(?=\\W|\\d|$)`,"i"),h1=1,m1=2,_c=class extends d1.AbstractParserWithWordBoundaryChecking{innerPattern(){return p1}innerExtract(e,t){let n=t[h1].toLowerCase(),i=Fm.WEEKDAY_DICTIONARY[n];if(i===void 0)return null;let s=t[m1];s=s||"",s=s.toLowerCase();let a=null;s=="dernier"?a="last":s=="prochain"&&(a="next");let o=f1.toDayJSWeekday(e.refDate,i,a);return e.createParsingComponents().assign("weekday",i).imply("day",o.date()).imply("month",o.month()+1).imply("year",o.year())}};vc.default=_c});var $m=b(Ec=>{"use strict";Object.defineProperty(Ec,"__esModule",{value:!0});var ys=Ge(),g1=new RegExp("(^|\\s|T)(?:(?:[\xE0a])\\s*)?(\\d{1,2})(?:h|:)?(?:(\\d{1,2})(?:m|:)?)?(?:(\\d{1,2})(?:s|:)?)?(?:\\s*(A\\.M\\.|P\\.M\\.|AM?|PM?))?(?=\\W|$)","i"),y1=new RegExp("^\\s*(\\-|\\\u2013|\\~|\\\u301C|[\xE0a]|\\?)\\s*(\\d{1,2})(?:h|:)?(?:(\\d{1,2})(?:m|:)?)?(?:(\\d{1,2})(?:s|:)?)?(?:\\s*(A\\.M\\.|P\\.M\\.|AM?|PM?))?(?=\\W|$)","i"),T1=2,Um=3,Wm=4,qm=5,di=class{pattern(e){return g1}extract(e,t){let n=e.createParsingResult(t.index+t[1].length,t[0].substring(t[1].length));if(n.text.match(/^\d{4}$/)||(n.start=di.extractTimeComponent(n.start.clone(),t),!n.start))return t.index+=t[0].length,null;let i=e.text.substring(t.index+t[0].length),s=y1.exec(i);return s&&(n.end=di.extractTimeComponent(n.start.clone(),s),n.end&&(n.text+=s[0])),n}static extractTimeComponent(e,t){let n=0,i=0,s=null;if(n=parseInt(t[T1]),t[Um]!=null&&(i=parseInt(t[Um])),i>=60||n>24)return null;if(n>=12&&(s=ys.Meridiem.PM),t[qm]!=null){if(n>12)return null;let a=t[qm][0].toLowerCase();a=="a"&&(s=ys.Meridiem.AM,n==12&&(n=0)),a=="p"&&(s=ys.Meridiem.PM,n!=12&&(n+=12))}if(e.assign("hour",n),e.assign("minute",i),s!==null?e.assign("meridiem",s):n<12?e.imply("meridiem",ys.Meridiem.AM):e.imply("meridiem",ys.Meridiem.PM),t[Wm]!=null){let a=parseInt(t[Wm]);if(a>=60)return null;e.assign("second",a)}return e}};Ec.default=di});var zm=b(kc=>{"use strict";Object.defineProperty(kc,"__esModule",{value:!0});var b1=rt(),Bm=rn(),Hm=rn(),Za=rn(),_1=Ee(),v1=W(),E1=new RegExp(`(?:on\\s*?)?(${Za.ORDINAL_NUMBER_PATTERN})(?:\\s*(?:au|\\-|\\\u2013|jusqu'au?|\\s)\\s*(${Za.ORDINAL_NUMBER_PATTERN}))?(?:-|/|\\s*(?:de)?\\s*)(${_1.matchAnyPattern(Bm.MONTH_DICTIONARY)})(?:(?:-|/|,?\\s*)(${Hm.YEAR_PATTERN}(?![^\\s]\\d)))?(?=\\W|$)`,"i"),Ym=1,Gm=2,w1=3,jm=4,wc=class extends v1.AbstractParserWithWordBoundaryChecking{innerPattern(){return E1}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=Bm.MONTH_DICTIONARY[t[w1].toLowerCase()],s=Za.parseOrdinalNumberPattern(t[Ym]);if(s>31)return t.index=t.index+t[Ym].length,null;if(n.start.assign("month",i),n.start.assign("day",s),t[jm]){let a=Hm.parseYear(t[jm]);n.start.assign("year",a)}else{let a=b1.findYearClosestToRef(e.refDate,s,i);n.start.imply("year",a)}if(t[Gm]){let a=Za.parseOrdinalNumberPattern(t[Gm]);n.end=n.start.clone(),n.end.assign("day",a)}return n}};kc.default=wc});var Vm=b(Sc=>{"use strict";Object.defineProperty(Sc,"__esModule",{value:!0});var Km=rn(),k1=Pe(),O1=W(),S1=Yt(),Oc=class extends O1.AbstractParserWithWordBoundaryChecking{constructor(){super()}innerPattern(){return new RegExp(`il y a\\s*(${Km.TIME_UNITS_PATTERN})(?=(?:\\W|$))`,"i")}innerExtract(e,t){let n=Km.parseTimeUnits(t[1]),i=S1.reverseTimeUnits(n);return k1.ParsingComponents.createRelativeFromReference(e.reference,i)}};Sc.default=Oc});var Xm=b(Rc=>{"use strict";Object.defineProperty(Rc,"__esModule",{value:!0});var Qm=rn(),D1=Pe(),R1=W(),Dc=class extends R1.AbstractParserWithWordBoundaryChecking{innerPattern(){return new RegExp(`(?:dans|en|pour|pendant|de)\\s*(${Qm.TIME_UNITS_PATTERN})(?=\\W|$)`,"i")}innerExtract(e,t){let n=Qm.parseTimeUnits(t[1]);return D1.ParsingComponents.createRelativeFromReference(e.reference,n)}};Rc.default=Dc});var Zm=b(xc=>{"use strict";Object.defineProperty(xc,"__esModule",{value:!0});var Ja=rn(),M1=Pe(),x1=W(),A1=Yt(),C1=Ee(),Mc=class extends x1.AbstractParserWithWordBoundaryChecking{constructor(){super()}innerPattern(){return new RegExp(`(?:les?|la|l'|du|des?)\\s*(${Ja.NUMBER_PATTERN})?(?:\\s*(prochaine?s?|derni[e\xE8]re?s?|pass[\xE9e]e?s?|pr[\xE9e]c[\xE9e]dents?|suivante?s?))?\\s*(${C1.matchAnyPattern(Ja.TIME_UNIT_DICTIONARY)})(?:\\s*(prochaine?s?|derni[e\xE8]re?s?|pass[\xE9e]e?s?|pr[\xE9e]c[\xE9e]dents?|suivante?s?))?`,"i")}innerExtract(e,t){let n=t[1]?Ja.parseNumberPattern(t[1]):1,i=Ja.TIME_UNIT_DICTIONARY[t[3].toLowerCase()],s={};s[i]=n;let a=t[2]||t[4]||"";if(a=a.toLowerCase(),!!a)return(/derni[eè]re?s?/.test(a)||/pass[ée]e?s?/.test(a)||/pr[ée]c[ée]dents?/.test(a))&&(s=A1.reverseTimeUnits(s)),M1.ParsingComponents.createRelativeFromReference(e.reference,s)}};xc.default=Mc});var tg=b(ze=>{"use strict";var Gt=ze&&ze.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ze,"__esModule",{value:!0});ze.createConfiguration=ze.createCasualConfiguration=ze.parseDate=ze.parse=ze.strict=ze.casual=void 0;var P1=Mr(),Jm=tr(),N1=Gt(Rm()),I1=Gt(Mm()),F1=Gt(kn()),L1=Gt(xm()),U1=Gt(Am()),W1=Gt(Cm()),q1=Gt(Lm()),$1=Gt($m()),Y1=Gt(zm()),G1=Gt(Vm()),j1=Gt(Xm()),B1=Gt(Zm());ze.casual=new Jm.Chrono(eg());ze.strict=new Jm.Chrono(Ac(!0));function H1(r,e,t){return ze.casual.parse(r,e,t)}ze.parse=H1;function z1(r,e,t){return ze.casual.parseDate(r,e,t)}ze.parseDate=z1;function eg(r=!0){let e=Ac(!1,r);return e.parsers.unshift(new N1.default),e.parsers.unshift(new I1.default),e.parsers.unshift(new B1.default),e}ze.createCasualConfiguration=eg;function Ac(r=!0,e=!0){return P1.includeCommonConfiguration({parsers:[new F1.default(e),new Y1.default,new L1.default,new $1.default,new G1.default,new j1.default,new q1.default],refiners:[new U1.default,new W1.default]},r)}ze.createConfiguration=Ac});var rg=b(eo=>{"use strict";Object.defineProperty(eo,"__esModule",{value:!0});eo.toHankaku=void 0;function K1(r){return String(r).replace(/\u2019/g,"'").replace(/\u201D/g,'"').replace(/\u3000/g," ").replace(/\uFFE5/g,"\xA5").replace(/[\uFF01\uFF03-\uFF06\uFF08\uFF09\uFF0C-\uFF19\uFF1C-\uFF1F\uFF21-\uFF3B\uFF3D\uFF3F\uFF41-\uFF5B\uFF5D\uFF5E]/g,V1)}eo.toHankaku=K1;function V1(r){return String.fromCharCode(r.charCodeAt(0)-65248)}});var ig=b(Ts=>{"use strict";var Q1=Ts&&Ts.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ts,"__esModule",{value:!0});var Cc=rg(),X1=rt(),Z1=Q1(Te()),J1=/(?:(?:([同今本])|((昭和|平成|令和)?([0-9０-９]{1,4}|元)))年\s*)?([0-9０-９]{1,2})月\s*([0-9０-９]{1,2})日/i,ng=1,eO=2,Pc=3,tO=4,rO=5,nO=6,Nc=class{pattern(){return J1}extract(e,t){let n=parseInt(Cc.toHankaku(t[rO])),i=parseInt(Cc.toHankaku(t[nO])),s=e.createParsingComponents({day:i,month:n});if(t[ng]&&t[ng].match("\u540C|\u4ECA|\u672C")){let a=Z1.default(e.refDate);s.assign("year",a.year())}if(t[eO]){let a=t[tO],o=a=="\u5143"?1:parseInt(Cc.toHankaku(a));t[Pc]=="\u4EE4\u548C"?o+=2018:t[Pc]=="\u5E73\u6210"?o+=1988:t[Pc]=="\u662D\u548C"&&(o+=1925),s.assign("year",o)}else{let a=X1.findYearClosestToRef(e.refDate,i,n);s.imply("year",a)}return s}};Ts.default=Nc});var sg=b(bs=>{"use strict";var iO=bs&&bs.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(bs,"__esModule",{value:!0});var sO=iO(mr()),Ic=class extends sO.default{patternBetween(){return/^\s*(から|ー|-)\s*$/i}};bs.default=Ic});var og=b(sr=>{"use strict";var aO=sr&&sr.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),oO=sr&&sr.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),uO=sr&&sr.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&aO(e,r,t);return oO(e,r),e},lO=sr&&sr.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(sr,"__esModule",{value:!0});var cO=lO(Te()),ag=Ge(),Fc=uO(Ar()),dO=/今日|当日|昨日|明日|今夜|今夕|今晩|今朝/i,Lc=class{pattern(){return dO}extract(e,t){let n=t[0],i=cO.default(e.refDate),s=e.createParsingComponents();switch(n){case"\u6628\u65E5":return Fc.yesterday(e.reference);case"\u660E\u65E5":return Fc.tomorrow(e.reference);case"\u4ECA\u65E5":case"\u5F53\u65E5":return Fc.today(e.reference)}return n=="\u4ECA\u591C"||n=="\u4ECA\u5915"||n=="\u4ECA\u6669"?(s.imply("hour",22),s.assign("meridiem",ag.Meridiem.PM)):n.match("\u4ECA\u671D")&&(s.imply("hour",6),s.assign("meridiem",ag.Meridiem.AM)),s.assign("day",i.date()),s.assign("month",i.month()+1),s.assign("year",i.year()),s}};sr.default=Lc});var cg=b(Ke=>{"use strict";var Uc=Ke&&Ke.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ke,"__esModule",{value:!0});Ke.createConfiguration=Ke.createCasualConfiguration=Ke.parseDate=Ke.parse=Ke.strict=Ke.casual=void 0;var fO=Uc(ig()),pO=Uc(sg()),hO=Uc(og()),ug=tr();Ke.casual=new ug.Chrono(lg());Ke.strict=new ug.Chrono(Wc());function mO(r,e,t){return Ke.casual.parse(r,e,t)}Ke.parse=mO;function gO(r,e,t){return Ke.casual.parseDate(r,e,t)}Ke.parseDate=gO;function lg(){let r=Wc();return r.parsers.unshift(new hO.default),r}Ke.createCasualConfiguration=lg;function Wc(){return{parsers:[new fO.default],refiners:[new pO.default]}}Ke.createConfiguration=Wc});var to=b(yr=>{"use strict";Object.defineProperty(yr,"__esModule",{value:!0});yr.parseYear=yr.YEAR_PATTERN=yr.MONTH_DICTIONARY=yr.WEEKDAY_DICTIONARY=void 0;yr.WEEKDAY_DICTIONARY={domingo:0,dom:0,segunda:1,"segunda-feira":1,seg:1,ter\u00E7a:2,"ter\xE7a-feira":2,ter:2,quarta:3,"quarta-feira":3,qua:3,quinta:4,"quinta-feira":4,qui:4,sexta:5,"sexta-feira":5,sex:5,s\u00E1bado:6,sabado:6,sab:6};yr.MONTH_DICTIONARY={janeiro:1,jan:1,"jan.":1,fevereiro:2,fev:2,"fev.":2,mar\u00E7o:3,mar:3,"mar.":3,abril:4,abr:4,"abr.":4,maio:5,mai:5,"mai.":5,junho:6,jun:6,"jun.":6,julho:7,jul:7,"jul.":7,agosto:8,ago:8,"ago.":8,setembro:9,set:9,"set.":9,outubro:10,out:10,"out.":10,novembro:11,nov:11,"nov.":11,dezembro:12,dez:12,"dez.":12};yr.YEAR_PATTERN="[0-9]{1,4}(?![^\\s]\\d)(?:\\s*[a|d]\\.?\\s*c\\.?|\\s*a\\.?\\s*d\\.?)?";function yO(r){if(r.match(/^[0-9]{1,4}$/)){let e=parseInt(r);return e<100&&(e>50?e=e+1900:e=e+2e3),e}return r.match(/a\.?\s*c\.?/i)?(r=r.replace(/a\.?\s*c\.?/i,""),-parseInt(r)):parseInt(r)}yr.parseYear=yO});var fg=b($c=>{"use strict";Object.defineProperty($c,"__esModule",{value:!0});var dg=to(),TO=Ee(),bO=W(),_O=wn(),vO=new RegExp(`(?:(?:\\,|\\(|\\\uFF08)\\s*)?(?:(este|esta|passado|pr[o\xF3]ximo)\\s*)?(${TO.matchAnyPattern(dg.WEEKDAY_DICTIONARY)})(?:\\s*(?:\\,|\\)|\\\uFF09))?(?:\\s*(este|esta|passado|pr[\xF3o]ximo)\\s*semana)?(?=\\W|\\d|$)`,"i"),EO=1,wO=2,kO=3,qc=class extends bO.AbstractParserWithWordBoundaryChecking{innerPattern(){return vO}innerExtract(e,t){let n=t[wO].toLowerCase(),i=dg.WEEKDAY_DICTIONARY[n];if(i===void 0)return null;let s=t[EO],a=t[kO],o=s||a||"";o=o.toLowerCase();let u=null;o=="passado"?u="this":o=="pr\xF3ximo"||o=="proximo"?u="next":o=="este"&&(u="this");let l=_O.toDayJSWeekday(e.refDate,i,u);return e.createParsingComponents().assign("weekday",i).imply("day",l.date()).imply("month",l.month()+1).imply("year",l.year())}};$c.default=qc});var pg=b(Gc=>{"use strict";Object.defineProperty(Gc,"__esModule",{value:!0});var OO=vn(),Yc=class extends OO.AbstractTimeExpressionParser{primaryPrefix(){return"(?:(?:ao?|\xE0s?|das|da|de|do)\\s*)?"}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|a(?:o)?|\\?)\\s*"}};Gc.default=Yc});var hg=b(_s=>{"use strict";var SO=_s&&_s.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(_s,"__esModule",{value:!0});var DO=SO(Rr()),jc=class extends DO.default{patternBetween(){return new RegExp("^\\s*(?:,|\xE0)?\\s*$")}};_s.default=jc});var mg=b(vs=>{"use strict";var RO=vs&&vs.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(vs,"__esModule",{value:!0});var MO=RO(mr()),Bc=class extends MO.default{patternBetween(){return/^\s*(?:-)\s*$/i}};vs.default=Bc});var vg=b(zc=>{"use strict";Object.defineProperty(zc,"__esModule",{value:!0});var xO=rt(),bg=to(),_g=to(),AO=Ee(),CO=W(),PO=new RegExp(`([0-9]{1,2})(?:\xBA|\xAA|\xB0)?(?:\\s*(?:desde|de|\\-|\\\u2013|ao?|\\s)\\s*([0-9]{1,2})(?:\xBA|\xAA|\xB0)?)?\\s*(?:de)?\\s*(?:-|/|\\s*(?:de|,)?\\s*)(${AO.matchAnyPattern(bg.MONTH_DICTIONARY)})(?:\\s*(?:de|,)?\\s*(${_g.YEAR_PATTERN}))?(?=\\W|$)`,"i"),gg=1,yg=2,NO=3,Tg=4,Hc=class extends CO.AbstractParserWithWordBoundaryChecking{innerPattern(){return PO}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=bg.MONTH_DICTIONARY[t[NO].toLowerCase()],s=parseInt(t[gg]);if(s>31)return t.index=t.index+t[gg].length,null;if(n.start.assign("month",i),n.start.assign("day",s),t[Tg]){let a=_g.parseYear(t[Tg]);n.start.assign("year",a)}else{let a=xO.findYearClosestToRef(e.refDate,s,i);n.start.imply("year",a)}if(t[yg]){let a=parseInt(t[yg]);n.end=n.start.clone(),n.end.assign("day",a)}return n}};zc.default=Hc});var Eg=b(Cr=>{"use strict";var IO=Cr&&Cr.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),FO=Cr&&Cr.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),LO=Cr&&Cr.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&IO(e,r,t);return FO(e,r),e};Object.defineProperty(Cr,"__esModule",{value:!0});var UO=W(),ro=LO(Ar()),Kc=class extends UO.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(agora|hoje|amanha|amanhã|ontem)(?=\W|$)/i}innerExtract(e,t){let n=t[0].toLowerCase(),i=e.createParsingComponents();switch(n){case"agora":return ro.now(e.reference);case"hoje":return ro.today(e.reference);case"amanha":case"amanh\xE3":return ro.tomorrow(e.reference);case"ontem":return ro.yesterday(e.reference)}return i}};Cr.default=Kc});var wg=b(Es=>{"use strict";var WO=Es&&Es.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Es,"__esModule",{value:!0});var no=Ge(),qO=W(),$O=$t(),YO=WO(Te()),Vc=class extends qO.AbstractParserWithWordBoundaryChecking{innerPattern(){return/(?:esta\s*)?(manha|manhã|tarde|meia-noite|meio-dia|noite)(?=\W|$)/i}innerExtract(e,t){let n=YO.default(e.refDate),i=e.createParsingComponents();switch(t[1].toLowerCase()){case"tarde":i.imply("meridiem",no.Meridiem.PM),i.imply("hour",15);break;case"noite":i.imply("meridiem",no.Meridiem.PM),i.imply("hour",22);break;case"manha":case"manh\xE3":i.imply("meridiem",no.Meridiem.AM),i.imply("hour",6);break;case"meia-noite":$O.assignTheNextDay(i,n),i.imply("hour",0),i.imply("minute",0),i.imply("second",0);break;case"meio-dia":i.imply("meridiem",no.Meridiem.AM),i.imply("hour",12);break}return i}};Es.default=Vc});var Sg=b(Ve=>{"use strict";var nn=Ve&&Ve.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ve,"__esModule",{value:!0});Ve.createConfiguration=Ve.createCasualConfiguration=Ve.parseDate=Ve.parse=Ve.strict=Ve.casual=void 0;var GO=Mr(),kg=tr(),jO=nn(kn()),BO=nn(fg()),HO=nn(pg()),zO=nn(hg()),KO=nn(mg()),VO=nn(vg()),QO=nn(Eg()),XO=nn(wg());Ve.casual=new kg.Chrono(Og());Ve.strict=new kg.Chrono(Qc(!0));function ZO(r,e,t){return Ve.casual.parse(r,e,t)}Ve.parse=ZO;function JO(r,e,t){return Ve.casual.parseDate(r,e,t)}Ve.parseDate=JO;function Og(r=!0){let e=Qc(!1,r);return e.parsers.push(new QO.default),e.parsers.push(new XO.default),e}Ve.createCasualConfiguration=Og;function Qc(r=!0,e=!0){return GO.includeCommonConfiguration({parsers:[new jO.default(e),new BO.default,new HO.default,new VO.default],refiners:[new zO.default,new KO.default]},r)}Ve.createConfiguration=Qc});var Dg=b(ws=>{"use strict";var e0=ws&&ws.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ws,"__esModule",{value:!0});var t0=e0(mr()),Xc=class extends t0.default{patternBetween(){return/^\s*(tot|-)\s*$/i}};ws.default=Xc});var Rg=b(ks=>{"use strict";var r0=ks&&ks.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ks,"__esModule",{value:!0});var n0=r0(Rr()),Zc=class extends n0.default{patternBetween(){return new RegExp("^\\s*(om|na|voor|in de|,|-)?\\s*$")}};ks.default=Zc});var Mg=b(Pr=>{"use strict";var i0=Pr&&Pr.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),s0=Pr&&Pr.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),a0=Pr&&Pr.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&i0(e,r,t);return s0(e,r),e};Object.defineProperty(Pr,"__esModule",{value:!0});var o0=W(),io=a0(Ar()),Jc=class extends o0.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(nu|vandaag|morgen|morgend|gisteren)(?=\W|$)/i}innerExtract(e,t){let n=t[0].toLowerCase(),i=e.createParsingComponents();switch(n){case"nu":return io.now(e.reference);case"vandaag":return io.today(e.reference);case"morgen":case"morgend":return io.tomorrow(e.reference);case"gisteren":return io.yesterday(e.reference)}return i}};Pr.default=Jc});var xg=b(Os=>{"use strict";var u0=Os&&Os.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Os,"__esModule",{value:!0});var so=Ge(),l0=W(),c0=u0(Te()),d0=$t(),f0=1,p0=2,ed=class extends l0.AbstractParserWithWordBoundaryChecking{innerPattern(){return/(deze)?\s*(namiddag|avond|middernacht|ochtend|middag|'s middags|'s avonds|'s ochtends)(?=\W|$)/i}innerExtract(e,t){let n=c0.default(e.refDate),i=e.createParsingComponents();switch(t[f0]==="deze"&&(i.assign("day",e.refDate.getDate()),i.assign("month",e.refDate.getMonth()+1),i.assign("year",e.refDate.getFullYear())),t[p0].toLowerCase()){case"namiddag":case"'s namiddags":i.imply("meridiem",so.Meridiem.PM),i.imply("hour",15);break;case"avond":case"'s avonds'":i.imply("meridiem",so.Meridiem.PM),i.imply("hour",20);break;case"middernacht":d0.assignTheNextDay(i,n),i.imply("hour",0),i.imply("minute",0),i.imply("second",0);break;case"ochtend":case"'s ochtends":i.imply("meridiem",so.Meridiem.AM),i.imply("hour",6);break;case"middag":case"'s middags":i.imply("meridiem",so.Meridiem.AM),i.imply("hour",12);break}return i}};Os.default=ed});var Mt=b(oe=>{"use strict";Object.defineProperty(oe,"__esModule",{value:!0});oe.parseTimeUnits=oe.TIME_UNITS_PATTERN=oe.parseYear=oe.YEAR_PATTERN=oe.parseOrdinalNumberPattern=oe.ORDINAL_NUMBER_PATTERN=oe.parseNumberPattern=oe.NUMBER_PATTERN=oe.TIME_UNIT_DICTIONARY=oe.ORDINAL_WORD_DICTIONARY=oe.INTEGER_WORD_DICTIONARY=oe.MONTH_DICTIONARY=oe.WEEKDAY_DICTIONARY=void 0;var ao=Ee(),h0=rt();oe.WEEKDAY_DICTIONARY={zondag:0,zon:0,"zon.":0,zo:0,"zo.":0,maandag:1,ma:1,"ma.":1,dinsdag:2,din:2,"din.":2,di:2,"di.":2,woensdag:3,woe:3,"woe.":3,wo:3,"wo.":3,donderdag:4,dond:4,"dond.":4,do:4,"do.":4,vrijdag:5,vrij:5,"vrij.":5,vr:5,"vr.":5,zaterdag:6,zat:6,"zat.":6,za:6,"za.":6};oe.MONTH_DICTIONARY={januari:1,jan:1,"jan.":1,februari:2,feb:2,"feb.":2,maart:3,mar:3,"mar.":3,april:4,apr:4,"apr.":4,mei:5,juni:6,jun:6,"jun.":6,juli:7,jul:7,"jul.":7,augustus:8,aug:8,"aug.":8,september:9,sep:9,"sep.":9,sept:9,"sept.":9,oktober:10,okt:10,"okt.":10,november:11,nov:11,"nov.":11,december:12,dec:12,"dec.":12};oe.INTEGER_WORD_DICTIONARY={een:1,twee:2,drie:3,vier:4,vijf:5,zes:6,zeven:7,acht:8,negen:9,tien:10,elf:11,twaalf:12};oe.ORDINAL_WORD_DICTIONARY={eerste:1,tweede:2,derde:3,vierde:4,vijfde:5,zesde:6,zevende:7,achtste:8,negende:9,tiende:10,elfde:11,twaalfde:12,dertiende:13,veertiende:14,vijftiende:15,zestiende:16,zeventiende:17,achttiende:18,negentiende:19,twintigste:20,eenentwintigste:21,twee\u00EBntwintigste:22,drieentwintigste:23,vierentwintigste:24,vijfentwintigste:25,zesentwintigste:26,zevenentwintigste:27,achtentwintig:28,negenentwintig:29,dertigste:30,eenendertigste:31};oe.TIME_UNIT_DICTIONARY={sec:"second",second:"second",seconden:"second",min:"minute",mins:"minute",minute:"minute",minuut:"minute",minuten:"minute",minuutje:"minute",h:"hour",hr:"hour",hrs:"hour",uur:"hour",u:"hour",uren:"hour",dag:"d",dagen:"d",week:"week",weken:"week",maand:"month",maanden:"month",jaar:"year",jr:"year",jaren:"year"};oe.NUMBER_PATTERN=`(?:${ao.matchAnyPattern(oe.INTEGER_WORD_DICTIONARY)}|[0-9]+|[0-9]+[\\.,][0-9]+|halve?|half|paar)`;function Cg(r){let e=r.toLowerCase();return oe.INTEGER_WORD_DICTIONARY[e]!==void 0?oe.INTEGER_WORD_DICTIONARY[e]:e==="paar"?2:e==="half"||e.match(/halve?/)?.5:parseFloat(e.replace(",","."))}oe.parseNumberPattern=Cg;oe.ORDINAL_NUMBER_PATTERN=`(?:${ao.matchAnyPattern(oe.ORDINAL_WORD_DICTIONARY)}|[0-9]{1,2}(?:ste|de)?)`;function m0(r){let e=r.toLowerCase();return oe.ORDINAL_WORD_DICTIONARY[e]!==void 0?oe.ORDINAL_WORD_DICTIONARY[e]:(e=e.replace(/(?:ste|de)$/i,""),parseInt(e))}oe.parseOrdinalNumberPattern=m0;oe.YEAR_PATTERN="(?:[1-9][0-9]{0,3}\\s*(?:voor Christus|na Christus)|[1-2][0-9]{3}|[5-9][0-9])";function g0(r){if(/voor Christus/i.test(r))return r=r.replace(/voor Christus/i,""),-parseInt(r);if(/na Christus/i.test(r))return r=r.replace(/na Christus/i,""),parseInt(r);let e=parseInt(r);return h0.findMostLikelyADYear(e)}oe.parseYear=g0;var Pg=`(${oe.NUMBER_PATTERN})\\s{0,5}(${ao.matchAnyPattern(oe.TIME_UNIT_DICTIONARY)})\\s{0,5}`,Ag=new RegExp(Pg,"i");oe.TIME_UNITS_PATTERN=ao.repeatedTimeunitPattern("(?:(?:binnen|in)\\s*)?",Pg);function y0(r){let e={},t=r,n=Ag.exec(t);for(;n;)T0(e,n),t=t.substring(n[0].length),n=Ag.exec(t);return e}oe.parseTimeUnits=y0;function T0(r,e){let t=Cg(e[1]),n=oe.TIME_UNIT_DICTIONARY[e[2].toLowerCase()];r[n]=t}});var Ig=b(rd=>{"use strict";Object.defineProperty(rd,"__esModule",{value:!0});var Ng=Mt(),b0=Pe(),_0=W(),td=class extends _0.AbstractParserWithWordBoundaryChecking{innerPattern(){return new RegExp("(?:binnen|in|binnen de|voor)\\s*("+Ng.TIME_UNITS_PATTERN+")(?=\\W|$)","i")}innerExtract(e,t){let n=Ng.parseTimeUnits(t[1]);return b0.ParsingComponents.createRelativeFromReference(e.reference,n)}};rd.default=td});var Lg=b(id=>{"use strict";Object.defineProperty(id,"__esModule",{value:!0});var Fg=Mt(),v0=Ee(),E0=W(),w0=wn(),k0=new RegExp(`(?:(?:\\,|\\(|\\\uFF08)\\s*)?(?:op\\s*?)?(?:(deze|vorige|volgende)\\s*(?:week\\s*)?)?(${v0.matchAnyPattern(Fg.WEEKDAY_DICTIONARY)})(?=\\W|$)`,"i"),O0=1,S0=2,D0=3,nd=class extends E0.AbstractParserWithWordBoundaryChecking{innerPattern(){return k0}innerExtract(e,t){let n=t[S0].toLowerCase(),i=Fg.WEEKDAY_DICTIONARY[n],s=t[O0],a=t[D0],o=s||a;o=o||"",o=o.toLowerCase();let u=null;o=="vorige"?u="last":o=="volgende"?u="next":o=="deze"&&(u="this");let l=w0.toDayJSWeekday(e.refDate,i,u);return e.createParsingComponents().assign("weekday",i).imply("day",l.date()).imply("month",l.month()+1).imply("year",l.year())}};id.default=nd});var Gg=b(ad=>{"use strict";Object.defineProperty(ad,"__esModule",{value:!0});var R0=rt(),$g=Mt(),oo=Mt(),Yg=Mt(),M0=Ee(),x0=W(),A0=new RegExp(`(?:on\\s*?)?(${oo.ORDINAL_NUMBER_PATTERN})(?:\\s*(?:tot|\\-|\\\u2013|until|through|till|\\s)\\s*(${oo.ORDINAL_NUMBER_PATTERN}))?(?:-|/|\\s*(?:of)?\\s*)(`+M0.matchAnyPattern($g.MONTH_DICTIONARY)+`)(?:(?:-|/|,?\\s*)(${Yg.YEAR_PATTERN}(?![^\\s]\\d)))?(?=\\W|$)`,"i"),C0=3,Ug=1,Wg=2,qg=4,sd=class extends x0.AbstractParserWithWordBoundaryChecking{innerPattern(){return A0}innerExtract(e,t){let n=$g.MONTH_DICTIONARY[t[C0].toLowerCase()],i=oo.parseOrdinalNumberPattern(t[Ug]);if(i>31)return t.index=t.index+t[Ug].length,null;let s=e.createParsingComponents({day:i,month:n});if(t[qg]){let u=Yg.parseYear(t[qg]);s.assign("year",u)}else{let u=R0.findYearClosestToRef(e.refDate,i,n);s.imply("year",u)}if(!t[Wg])return s;let a=oo.parseOrdinalNumberPattern(t[Wg]),o=e.createParsingResult(t.index,t[0]);return o.start=s,o.end=s.clone(),o.end.assign("day",a),o}};ad.default=sd});var zg=b(ud=>{"use strict";Object.defineProperty(ud,"__esModule",{value:!0});var Bg=Mt(),P0=rt(),N0=Ee(),Hg=Mt(),I0=W(),F0=new RegExp(`(${N0.matchAnyPattern(Bg.MONTH_DICTIONARY)})\\s*(?:[,-]?\\s*(${Hg.YEAR_PATTERN})?)?(?=[^\\s\\w]|\\s+[^0-9]|\\s+$|$)`,"i"),L0=1,jg=2,od=class extends I0.AbstractParserWithWordBoundaryChecking{innerPattern(){return F0}innerExtract(e,t){let n=e.createParsingComponents();n.imply("day",1);let i=t[L0],s=Bg.MONTH_DICTIONARY[i.toLowerCase()];if(n.assign("month",s),t[jg]){let a=Hg.parseYear(t[jg]);n.assign("year",a)}else{let a=P0.findYearClosestToRef(e.refDate,1,s);n.imply("year",a)}return n}};ud.default=od});var Kg=b(cd=>{"use strict";Object.defineProperty(cd,"__esModule",{value:!0});var U0=W(),W0=new RegExp("([0-9]|0[1-9]|1[012])/([0-9]{4})","i"),q0=1,$0=2,ld=class extends U0.AbstractParserWithWordBoundaryChecking{innerPattern(){return W0}innerExtract(e,t){let n=parseInt(t[$0]),i=parseInt(t[q0]);return e.createParsingComponents().imply("day",1).assign("month",i).assign("year",n)}};cd.default=ld});var Vg=b(fd=>{"use strict";Object.defineProperty(fd,"__esModule",{value:!0});var Y0=vn(),dd=class extends Y0.AbstractTimeExpressionParser{primaryPrefix(){return"(?:(?:om)\\s*)?"}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|om|\\?)\\s*"}primarySuffix(){return"(?:\\s*(?:uur))?(?!/)(?=\\W|$)"}extractPrimaryTimeComponents(e,t){return t[0].match(/^\s*\d{4}\s*$/)?null:super.extractPrimaryTimeComponents(e,t)}};fd.default=dd});var Zg=b(hd=>{"use strict";Object.defineProperty(hd,"__esModule",{value:!0});var Xg=Mt(),G0=Ee(),j0=W(),B0=new RegExp(`([0-9]{4})[\\.\\/\\s](?:(${G0.matchAnyPattern(Xg.MONTH_DICTIONARY)})|([0-9]{1,2}))[\\.\\/\\s]([0-9]{1,2})(?=\\W|$)`,"i"),H0=1,z0=2,Qg=3,K0=4,pd=class extends j0.AbstractParserWithWordBoundaryChecking{innerPattern(){return B0}innerExtract(e,t){let n=t[Qg]?parseInt(t[Qg]):Xg.MONTH_DICTIONARY[t[z0].toLowerCase()];if(n<1||n>12)return null;let i=parseInt(t[H0]);return{day:parseInt(t[K0]),month:n,year:i}}};hd.default=pd});var Jg=b(Ss=>{"use strict";var V0=Ss&&Ss.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ss,"__esModule",{value:!0});var Q0=W(),uo=Ge(),md=$t(),X0=V0(Te()),Z0=1,J0=2,gd=class extends Q0.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(gisteren|morgen|van)(ochtend|middag|namiddag|avond|nacht)(?=\W|$)/i}innerExtract(e,t){let n=t[Z0].toLowerCase(),i=t[J0].toLowerCase(),s=e.createParsingComponents(),a=X0.default(e.refDate);switch(n){case"gisteren":md.assignSimilarDate(s,a.add(-1,"day"));break;case"van":md.assignSimilarDate(s,a);break;case"morgen":md.assignTheNextDay(s,a);break}switch(i){case"ochtend":s.imply("meridiem",uo.Meridiem.AM),s.imply("hour",6);break;case"middag":s.imply("meridiem",uo.Meridiem.AM),s.imply("hour",12);break;case"namiddag":s.imply("meridiem",uo.Meridiem.PM),s.imply("hour",15);break;case"avond":s.imply("meridiem",uo.Meridiem.PM),s.imply("hour",20);break}return s}};Ss.default=gd});var ty=b(Td=>{"use strict";Object.defineProperty(Td,"__esModule",{value:!0});var ey=Mt(),eS=Pe(),tS=W(),rS=Yt(),nS=new RegExp(`(deze|vorige|afgelopen|komende|over|\\+|-)\\s*(${ey.TIME_UNITS_PATTERN})(?=\\W|$)`,"i"),yd=class extends tS.AbstractParserWithWordBoundaryChecking{innerPattern(){return nS}innerExtract(e,t){let n=t[1].toLowerCase(),i=ey.parseTimeUnits(t[2]);switch(n){case"vorige":case"afgelopen":case"-":i=rS.reverseTimeUnits(i);break}return eS.ParsingComponents.createRelativeFromReference(e.reference,i)}};Td.default=yd});var iy=b(Ds=>{"use strict";var iS=Ds&&Ds.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ds,"__esModule",{value:!0});var ny=Mt(),ry=Pe(),sS=iS(Te()),aS=W(),oS=Ee(),uS=new RegExp(`(dit|deze|komende|volgend|volgende|afgelopen|vorige)\\s*(${oS.matchAnyPattern(ny.TIME_UNIT_DICTIONARY)})(?=\\s*)(?=\\W|$)`,"i"),lS=1,cS=2,bd=class extends aS.AbstractParserWithWordBoundaryChecking{innerPattern(){return uS}innerExtract(e,t){let n=t[lS].toLowerCase(),i=t[cS].toLowerCase(),s=ny.TIME_UNIT_DICTIONARY[i];if(n=="volgend"||n=="volgende"||n=="komende"){let u={};return u[s]=1,ry.ParsingComponents.createRelativeFromReference(e.reference,u)}if(n=="afgelopen"||n=="vorige"){let u={};return u[s]=-1,ry.ParsingComponents.createRelativeFromReference(e.reference,u)}let a=e.createParsingComponents(),o=sS.default(e.reference.instant);return i.match(/week/i)?(o=o.add(-o.get("d"),"d"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.imply("year",o.year())):i.match(/maand/i)?(o=o.add(-o.date()+1,"d"),a.imply("day",o.date()),a.assign("year",o.year()),a.assign("month",o.month()+1)):i.match(/jaar/i)&&(o=o.add(-o.date()+1,"d"),o=o.add(-o.month(),"month"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.assign("year",o.year())),a}};Ds.default=bd});var sy=b(Ed=>{"use strict";Object.defineProperty(Ed,"__esModule",{value:!0});var vd=Mt(),dS=Pe(),fS=W(),pS=Yt(),hS=new RegExp("("+vd.TIME_UNITS_PATTERN+")(?:geleden|voor|eerder)(?=(?:\\W|$))","i"),mS=new RegExp("("+vd.TIME_UNITS_PATTERN+")geleden(?=(?:\\W|$))","i"),_d=class extends fS.AbstractParserWithWordBoundaryChecking{constructor(e){super(),this.strictMode=e}innerPattern(){return this.strictMode?mS:hS}innerExtract(e,t){let n=vd.parseTimeUnits(t[1]),i=pS.reverseTimeUnits(n);return dS.ParsingComponents.createRelativeFromReference(e.reference,i)}};Ed.default=_d});var ay=b(Od=>{"use strict";Object.defineProperty(Od,"__esModule",{value:!0});var kd=Mt(),gS=Pe(),yS=W(),TS=new RegExp("("+kd.TIME_UNITS_PATTERN+")(later|na|vanaf nu|voortaan|vooruit|uit)(?=(?:\\W|$))","i"),bS=new RegExp("("+kd.TIME_UNITS_PATTERN+")(later|vanaf nu)(?=(?:\\W|$))","i"),_S=1,wd=class extends yS.AbstractParserWithWordBoundaryChecking{constructor(e){super(),this.strictMode=e}innerPattern(){return this.strictMode?bS:TS}innerExtract(e,t){let n=kd.parseTimeUnits(t[_S]);return gS.ParsingComponents.createRelativeFromReference(e.reference,n)}};Od.default=wd});var cy=b(Qe=>{"use strict";var it=Qe&&Qe.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Qe,"__esModule",{value:!0});Qe.createConfiguration=Qe.createCasualConfiguration=Qe.parseDate=Qe.parse=Qe.strict=Qe.casual=void 0;var vS=Mr(),oy=tr(),ES=it(Dg()),wS=it(Rg()),kS=it(Mg()),OS=it(xg()),SS=it(kn()),DS=it(Ig()),RS=it(Lg()),MS=it(Gg()),uy=it(zg()),xS=it(Kg()),AS=it(Vg()),CS=it(Zg()),PS=it(Jg()),NS=it(ty()),IS=it(iy()),FS=it(sy()),LS=it(ay());Qe.casual=new oy.Chrono(ly());Qe.strict=new oy.Chrono(Sd(!0));function US(r,e,t){return Qe.casual.parse(r,e,t)}Qe.parse=US;function WS(r,e,t){return Qe.casual.parseDate(r,e,t)}Qe.parseDate=WS;function ly(r=!0){let e=Sd(!1,r);return e.parsers.unshift(new kS.default),e.parsers.unshift(new OS.default),e.parsers.unshift(new PS.default),e.parsers.unshift(new uy.default),e.parsers.unshift(new IS.default),e.parsers.unshift(new NS.default),e}Qe.createCasualConfiguration=ly;function Sd(r=!0,e=!0){return vS.includeCommonConfiguration({parsers:[new SS.default(e),new DS.default,new MS.default,new uy.default,new RS.default,new CS.default,new xS.default,new AS.default(r),new FS.default(r),new LS.default(r)],refiners:[new wS.default,new ES.default]},r)}Qe.createConfiguration=Sd});var hy=b(Rs=>{"use strict";var qS=Rs&&Rs.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Rs,"__esModule",{value:!0});var $S=qS(Te()),YS=W(),GS=1,dy=2,jS=3,fy=4,py=5,BS=6,Dd=class extends YS.AbstractParserWithWordBoundaryChecking{innerPattern(e){return new RegExp("(\u800C\u5BB6|\u7ACB(?:\u523B|\u5373)|\u5373\u523B)|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(\u65E9|\u671D|\u665A)|(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(?:\u65E5|\u5929)(?:[\\s|,|\uFF0C]*)(?:(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?","i")}innerExtract(e,t){let n=t.index,i=e.createParsingResult(n,t[0]),s=$S.default(e.refDate),a=s;if(t[GS])i.start.imply("hour",s.hour()),i.start.imply("minute",s.minute()),i.start.imply("second",s.second()),i.start.imply("millisecond",s.millisecond());else if(t[dy]){let o=t[dy],u=t[jS];o=="\u660E"||o=="\u807D"?s.hour()>1&&(a=a.add(1,"day")):o=="\u6628"||o=="\u5C0B"||o=="\u7434"?a=a.add(-1,"day"):o=="\u524D"?a=a.add(-2,"day"):o=="\u5927\u524D"?a=a.add(-3,"day"):o=="\u5F8C"?a=a.add(2,"day"):o=="\u5927\u5F8C"&&(a=a.add(3,"day")),u=="\u65E9"||u=="\u671D"?i.start.imply("hour",6):u=="\u665A"&&(i.start.imply("hour",22),i.start.imply("meridiem",1))}else if(t[fy]){let u=t[fy][0];u=="\u65E9"||u=="\u671D"||u=="\u4E0A"?i.start.imply("hour",6):u=="\u4E0B"||u=="\u664F"?(i.start.imply("hour",15),i.start.imply("meridiem",1)):u=="\u4E2D"?(i.start.imply("hour",12),i.start.imply("meridiem",1)):u=="\u591C"||u=="\u665A"?(i.start.imply("hour",22),i.start.imply("meridiem",1)):u=="\u51CC"&&i.start.imply("hour",0)}else if(t[py]){let o=t[py];o=="\u660E"||o=="\u807D"?s.hour()>1&&(a=a.add(1,"day")):o=="\u6628"||o=="\u5C0B"||o=="\u7434"?a=a.add(-1,"day"):o=="\u524D"?a=a.add(-2,"day"):o=="\u5927\u524D"?a=a.add(-3,"day"):o=="\u5F8C"?a=a.add(2,"day"):o=="\u5927\u5F8C"&&(a=a.add(3,"day"));let u=t[BS];if(u){let l=u[0];l=="\u65E9"||l=="\u671D"||l=="\u4E0A"?i.start.imply("hour",6):l=="\u4E0B"||l=="\u664F"?(i.start.imply("hour",15),i.start.imply("meridiem",1)):l=="\u4E2D"?(i.start.imply("hour",12),i.start.imply("meridiem",1)):l=="\u591C"||l=="\u665A"?(i.start.imply("hour",22),i.start.imply("meridiem",1)):l=="\u51CC"&&i.start.imply("hour",0)}}return i.start.assign("day",a.date()),i.start.assign("month",a.month()+1),i.start.assign("year",a.year()),i}};Rs.default=Dd});var fi=b(kt=>{"use strict";Object.defineProperty(kt,"__esModule",{value:!0});kt.zhStringToYear=kt.zhStringToNumber=kt.WEEKDAY_OFFSET=kt.NUMBER=void 0;kt.NUMBER={\u96F6:0,\u4E00:1,\u4E8C:2,\u5169:2,\u4E09:3,\u56DB:4,\u4E94:5,\u516D:6,\u4E03:7,\u516B:8,\u4E5D:9,\u5341:10,\u5EFF:20,\u5345:30};kt.WEEKDAY_OFFSET={\u5929:0,\u65E5:0,\u4E00:1,\u4E8C:2,\u4E09:3,\u56DB:4,\u4E94:5,\u516D:6};function HS(r){let e=0;for(let t=0;t<r.length;t++){let n=r[t];n==="\u5341"?e=e===0?kt.NUMBER[n]:e*kt.NUMBER[n]:e+=kt.NUMBER[n]}return e}kt.zhStringToNumber=HS;function zS(r){let e="";for(let t=0;t<r.length;t++){let n=r[t];e=e+kt.NUMBER[n]}return parseInt(e)}kt.zhStringToYear=zS});var gy=b(Ms=>{"use strict";var KS=Ms&&Ms.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ms,"__esModule",{value:!0});var VS=KS(Te()),QS=W(),Dn=fi(),Rd=1,my=2,Md=3,xd=class extends QS.AbstractParserWithWordBoundaryChecking{innerPattern(){return new RegExp("(\\d{2,4}|["+Object.keys(Dn.NUMBER).join("")+"]{4}|["+Object.keys(Dn.NUMBER).join("")+"]{2})?(?:\\s*)(?:\u5E74)?(?:[\\s|,|\uFF0C]*)(\\d{1,2}|["+Object.keys(Dn.NUMBER).join("")+"]{1,2})(?:\\s*)(?:\u6708)(?:\\s*)(\\d{1,2}|["+Object.keys(Dn.NUMBER).join("")+"]{1,2})?(?:\\s*)(?:\u65E5|\u865F)?")}innerExtract(e,t){let n=VS.default(e.refDate),i=e.createParsingResult(t.index,t[0]),s=parseInt(t[my]);if(isNaN(s)&&(s=Dn.zhStringToNumber(t[my])),i.start.assign("month",s),t[Md]){let a=parseInt(t[Md]);isNaN(a)&&(a=Dn.zhStringToNumber(t[Md])),i.start.assign("day",a)}else i.start.imply("day",n.date());if(t[Rd]){let a=parseInt(t[Rd]);isNaN(a)&&(a=Dn.zhStringToYear(t[Rd])),i.start.assign("year",a)}else i.start.imply("year",n.year());return i}};Ms.default=xd});var Ty=b(xs=>{"use strict";var XS=xs&&xs.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(xs,"__esModule",{value:!0});var ZS=XS(Te()),JS=W(),yy=fi(),eD=new RegExp("(\\d+|["+Object.keys(yy.NUMBER).join("")+"]+|\u534A|\u5E7E)(?:\\s*)(?:\u500B)?(\u79D2(?:\u9418)?|\u5206\u9418|\u5C0F\u6642|\u9418|\u65E5|\u5929|\u661F\u671F|\u79AE\u62DC|\u6708|\u5E74)(?:(?:\u4E4B|\u904E)?\u5F8C|(?:\u4E4B)?\u5167)","i"),Ad=1,tD=2,Cd=class extends JS.AbstractParserWithWordBoundaryChecking{innerPattern(){return eD}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=parseInt(t[Ad]);if(isNaN(i)&&(i=yy.zhStringToNumber(t[Ad])),isNaN(i)){let u=t[Ad];if(u==="\u5E7E")i=3;else if(u==="\u534A")i=.5;else return null}let s=ZS.default(e.refDate),o=t[tD][0];return o.match(/[日天星禮月年]/)?(o=="\u65E5"||o=="\u5929"?s=s.add(i,"d"):o=="\u661F"||o=="\u79AE"?s=s.add(i*7,"d"):o=="\u6708"?s=s.add(i,"month"):o=="\u5E74"&&(s=s.add(i,"year")),n.start.assign("year",s.year()),n.start.assign("month",s.month()+1),n.start.assign("day",s.date()),n):(o=="\u79D2"?s=s.add(i,"second"):o=="\u5206"?s=s.add(i,"minute"):(o=="\u5C0F"||o=="\u9418")&&(s=s.add(i,"hour")),n.start.imply("year",s.year()),n.start.imply("month",s.month()+1),n.start.imply("day",s.date()),n.start.assign("hour",s.hour()),n.start.assign("minute",s.minute()),n.start.assign("second",s.second()),n)}};xs.default=Cd});var _y=b(As=>{"use strict";var rD=As&&As.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(As,"__esModule",{value:!0});var nD=rD(Te()),iD=W(),by=fi(),sD=new RegExp("(?<prefix>\u4E0A|\u4ECA|\u4E0B|\u9019|\u5462)(?:\u500B)?(?:\u661F\u671F|\u79AE\u62DC|\u9031)(?<weekday>"+Object.keys(by.WEEKDAY_OFFSET).join("|")+")"),Pd=class extends iD.AbstractParserWithWordBoundaryChecking{innerPattern(){return sD}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=t.groups.weekday,s=by.WEEKDAY_OFFSET[i];if(s===void 0)return null;let a=null,o=t.groups.prefix;o=="\u4E0A"?a="last":o=="\u4E0B"?a="next":(o=="\u4ECA"||o=="\u9019"||o=="\u5462")&&(a="this");let u=nD.default(e.refDate),l=!1,c=u.day();return a=="last"||a=="past"?(u=u.day(s-7),l=!0):a=="next"?(u=u.day(s+7),l=!0):a=="this"?u=u.day(s):Math.abs(s-7-c)<Math.abs(s-c)?u=u.day(s-7):Math.abs(s+7-c)<Math.abs(s-c)?u=u.day(s+7):u=u.day(s),n.start.assign("weekday",s),l?(n.start.assign("day",u.date()),n.start.assign("month",u.month()+1),n.start.assign("year",u.year())):(n.start.imply("day",u.date()),n.start.imply("month",u.month()+1),n.start.imply("year",u.year())),n}};As.default=Pd});var vy=b(Cs=>{"use strict";var aD=Cs&&Cs.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Cs,"__esModule",{value:!0});var oD=aD(Te()),uD=W(),Bt=fi(),lD=new RegExp("(?:\u7531|\u5F9E|\u81EA)?(?:(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(\u65E9|\u671D|\u665A)|(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(?:\u65E5|\u5929)(?:[\\s,\uFF0C]*)(?:(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?)?(?:[\\s,\uFF0C]*)(?:(\\d+|["+Object.keys(Bt.NUMBER).join("")+"]+)(?:\\s*)(?:\u9EDE|\u6642|:|\uFF1A)(?:\\s*)(\\d+|\u534A|\u6B63|\u6574|["+Object.keys(Bt.NUMBER).join("")+"]+)?(?:\\s*)(?:\u5206|:|\uFF1A)?(?:\\s*)(\\d+|["+Object.keys(Bt.NUMBER).join("")+"]+)?(?:\\s*)(?:\u79D2)?)(?:\\s*(A.M.|P.M.|AM?|PM?))?","i"),cD=new RegExp("(?:^\\s*(?:\u5230|\u81F3|\\-|\\\u2013|\\~|\\\u301C)\\s*)(?:(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(\u65E9|\u671D|\u665A)|(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(?:\u65E5|\u5929)(?:[\\s,\uFF0C]*)(?:(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?)?(?:[\\s,\uFF0C]*)(?:(\\d+|["+Object.keys(Bt.NUMBER).join("")+"]+)(?:\\s*)(?:\u9EDE|\u6642|:|\uFF1A)(?:\\s*)(\\d+|\u534A|\u6B63|\u6574|["+Object.keys(Bt.NUMBER).join("")+"]+)?(?:\\s*)(?:\u5206|:|\uFF1A)?(?:\\s*)(\\d+|["+Object.keys(Bt.NUMBER).join("")+"]+)?(?:\\s*)(?:\u79D2)?)(?:\\s*(A.M.|P.M.|AM?|PM?))?","i"),lo=1,co=2,fo=3,po=4,ho=5,mo=6,jt=7,pi=8,go=9,Nd=class extends uD.AbstractParserWithWordBoundaryChecking{innerPattern(){return lD}innerExtract(e,t){if(t.index>0&&e.text[t.index-1].match(/\w/))return null;let n=oD.default(e.refDate),i=e.createParsingResult(t.index,t[0]),s=n.clone();if(t[lo]){var a=t[lo];a=="\u660E"||a=="\u807D"?n.hour()>1&&s.add(1,"day"):a=="\u6628"||a=="\u5C0B"||a=="\u7434"?s.add(-1,"day"):a=="\u524D"?s.add(-2,"day"):a=="\u5927\u524D"?s.add(-3,"day"):a=="\u5F8C"?s.add(2,"day"):a=="\u5927\u5F8C"&&s.add(3,"day"),i.start.assign("day",s.date()),i.start.assign("month",s.month()+1),i.start.assign("year",s.year())}else if(t[po]){var o=t[po];o=="\u660E"||o=="\u807D"?s.add(1,"day"):o=="\u6628"||o=="\u5C0B"||o=="\u7434"?s.add(-1,"day"):o=="\u524D"?s.add(-2,"day"):o=="\u5927\u524D"?s.add(-3,"day"):o=="\u5F8C"?s.add(2,"day"):o=="\u5927\u5F8C"&&s.add(3,"day"),i.start.assign("day",s.date()),i.start.assign("month",s.month()+1),i.start.assign("year",s.year())}else i.start.imply("day",s.date()),i.start.imply("month",s.month()+1),i.start.imply("year",s.year());let u=0,l=0,c=-1;if(t[pi]){var p=parseInt(t[pi]);if(isNaN(p)&&(p=Bt.zhStringToNumber(t[pi])),p>=60)return null;i.start.assign("second",p)}if(u=parseInt(t[mo]),isNaN(u)&&(u=Bt.zhStringToNumber(t[mo])),t[jt]?t[jt]=="\u534A"?l=30:t[jt]=="\u6B63"||t[jt]=="\u6574"?l=0:(l=parseInt(t[jt]),isNaN(l)&&(l=Bt.zhStringToNumber(t[jt]))):u>100&&(l=u%100,u=Math.floor(u/100)),l>=60||u>24)return null;if(u>=12&&(c=1),t[go]){if(u>12)return null;var h=t[go][0].toLowerCase();h=="a"&&(c=0,u==12&&(u=0)),h=="p"&&(c=1,u!=12&&(u+=12))}else if(t[co]){var _=t[co],y=_[0];y=="\u671D"||y=="\u65E9"?(c=0,u==12&&(u=0)):y=="\u665A"&&(c=1,u!=12&&(u+=12))}else if(t[fo]){var w=t[fo],M=w[0];M=="\u4E0A"||M=="\u671D"||M=="\u65E9"||M=="\u51CC"?(c=0,u==12&&(u=0)):(M=="\u4E0B"||M=="\u664F"||M=="\u665A")&&(c=1,u!=12&&(u+=12))}else if(t[ho]){var P=t[ho],N=P[0];N=="\u4E0A"||N=="\u671D"||N=="\u65E9"||N=="\u51CC"?(c=0,u==12&&(u=0)):(N=="\u4E0B"||N=="\u664F"||N=="\u665A")&&(c=1,u!=12&&(u+=12))}if(i.start.assign("hour",u),i.start.assign("minute",l),c>=0?i.start.assign("meridiem",c):u<12?i.start.imply("meridiem",0):i.start.imply("meridiem",1),t=cD.exec(e.text.substring(i.index+i.text.length)),!t)return i.text.match(/^\d+$/)?null:i;let F=s.clone();if(i.end=e.createParsingComponents(),t[lo]){var a=t[lo];a=="\u660E"||a=="\u807D"?n.hour()>1&&F.add(1,"day"):a=="\u6628"||a=="\u5C0B"||a=="\u7434"?F.add(-1,"day"):a=="\u524D"?F.add(-2,"day"):a=="\u5927\u524D"?F.add(-3,"day"):a=="\u5F8C"?F.add(2,"day"):a=="\u5927\u5F8C"&&F.add(3,"day"),i.end.assign("day",F.date()),i.end.assign("month",F.month()+1),i.end.assign("year",F.year())}else if(t[po]){var o=t[po];o=="\u660E"||o=="\u807D"?F.add(1,"day"):o=="\u6628"||o=="\u5C0B"||o=="\u7434"?F.add(-1,"day"):o=="\u524D"?F.add(-2,"day"):o=="\u5927\u524D"?F.add(-3,"day"):o=="\u5F8C"?F.add(2,"day"):o=="\u5927\u5F8C"&&F.add(3,"day"),i.end.assign("day",F.date()),i.end.assign("month",F.month()+1),i.end.assign("year",F.year())}else i.end.imply("day",F.date()),i.end.imply("month",F.month()+1),i.end.imply("year",F.year());if(u=0,l=0,c=-1,t[pi]){var p=parseInt(t[pi]);if(isNaN(p)&&(p=Bt.zhStringToNumber(t[pi])),p>=60)return null;i.end.assign("second",p)}if(u=parseInt(t[mo]),isNaN(u)&&(u=Bt.zhStringToNumber(t[mo])),t[jt]?t[jt]=="\u534A"?l=30:t[jt]=="\u6B63"||t[jt]=="\u6574"?l=0:(l=parseInt(t[jt]),isNaN(l)&&(l=Bt.zhStringToNumber(t[jt]))):u>100&&(l=u%100,u=Math.floor(u/100)),l>=60||u>24)return null;if(u>=12&&(c=1),t[go]){if(u>12)return null;var h=t[go][0].toLowerCase();h=="a"&&(c=0,u==12&&(u=0)),h=="p"&&(c=1,u!=12&&(u+=12)),i.start.isCertain("meridiem")||(c==0?(i.start.imply("meridiem",0),i.start.get("hour")==12&&i.start.assign("hour",0)):(i.start.imply("meridiem",1),i.start.get("hour")!=12&&i.start.assign("hour",i.start.get("hour")+12)))}else if(t[co]){var _=t[co],y=_[0];y=="\u671D"||y=="\u65E9"?(c=0,u==12&&(u=0)):y=="\u665A"&&(c=1,u!=12&&(u+=12))}else if(t[fo]){var w=t[fo],M=w[0];M=="\u4E0A"||M=="\u671D"||M=="\u65E9"||M=="\u51CC"?(c=0,u==12&&(u=0)):(M=="\u4E0B"||M=="\u664F"||M=="\u665A")&&(c=1,u!=12&&(u+=12))}else if(t[ho]){var P=t[ho],N=P[0];N=="\u4E0A"||N=="\u671D"||N=="\u65E9"||N=="\u51CC"?(c=0,u==12&&(u=0)):(N=="\u4E0B"||N=="\u664F"||N=="\u665A")&&(c=1,u!=12&&(u+=12))}return i.text=i.text+t[0],i.end.assign("hour",u),i.end.assign("minute",l),c>=0?i.end.assign("meridiem",c):i.start.isCertain("meridiem")&&i.start.get("meridiem")==1&&i.start.get("hour")>u?i.end.imply("meridiem",0):u>12&&i.end.imply("meridiem",1),i.end.date().getTime()<i.start.date().getTime()&&i.end.imply("day",i.end.get("day")+1),i}};Cs.default=Nd});var wy=b(Ps=>{"use strict";var dD=Ps&&Ps.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ps,"__esModule",{value:!0});var fD=dD(Te()),pD=W(),Ey=fi(),hD=new RegExp("(?:\u661F\u671F|\u79AE\u62DC|\u9031)(?<weekday>"+Object.keys(Ey.WEEKDAY_OFFSET).join("|")+")"),Id=class extends pD.AbstractParserWithWordBoundaryChecking{innerPattern(){return hD}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=t.groups.weekday,s=Ey.WEEKDAY_OFFSET[i];if(s===void 0)return null;let a=fD.default(e.refDate),o=!1,u=a.day();return Math.abs(s-7-u)<Math.abs(s-u)?a=a.day(s-7):Math.abs(s+7-u)<Math.abs(s-u)?a=a.day(s+7):a=a.day(s),n.start.assign("weekday",s),o?(n.start.assign("day",a.date()),n.start.assign("month",a.month()+1),n.start.assign("year",a.year())):(n.start.imply("day",a.date()),n.start.imply("month",a.month()+1),n.start.imply("year",a.year())),n}};Ps.default=Id});var ky=b(Ns=>{"use strict";var mD=Ns&&Ns.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ns,"__esModule",{value:!0});var gD=mD(mr()),Fd=class extends gD.default{patternBetween(){return/^\s*(至|到|\-|\~|～|－|ー)\s*$/i}};Ns.default=Fd});var Oy=b(Is=>{"use strict";var yD=Is&&Is.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Is,"__esModule",{value:!0});var TD=yD(Rr()),Ld=class extends TD.default{patternBetween(){return/^\s*$/i}};Is.default=Ld});var Sy=b(qe=>{"use strict";var Nr=qe&&qe.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(qe,"__esModule",{value:!0});qe.createConfiguration=qe.createCasualConfiguration=qe.parseDate=qe.parse=qe.strict=qe.casual=qe.hant=void 0;var Ud=tr(),bD=Nr(Ba()),_D=Mr(),vD=Nr(hy()),ED=Nr(gy()),wD=Nr(Ty()),kD=Nr(_y()),OD=Nr(vy()),SD=Nr(wy()),DD=Nr(ky()),RD=Nr(Oy());qe.hant=new Ud.Chrono(Wd());qe.casual=new Ud.Chrono(Wd());qe.strict=new Ud.Chrono(qd());function MD(r,e,t){return qe.casual.parse(r,e,t)}qe.parse=MD;function xD(r,e,t){return qe.casual.parseDate(r,e,t)}qe.parseDate=xD;function Wd(){let r=qd();return r.parsers.unshift(new vD.default),r}qe.createCasualConfiguration=Wd;function qd(){let r=_D.includeCommonConfiguration({parsers:[new ED.default,new kD.default,new SD.default,new OD.default,new wD.default],refiners:[new DD.default,new RD.default]});return r.refiners=r.refiners.filter(e=>!(e instanceof bD.default)),r}qe.createConfiguration=qd});var xy=b(Fs=>{"use strict";var AD=Fs&&Fs.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Fs,"__esModule",{value:!0});var CD=AD(Te()),PD=W(),ND=1,Dy=2,ID=3,Ry=4,My=5,FD=6,$d=class extends PD.AbstractParserWithWordBoundaryChecking{innerPattern(e){return new RegExp("(\u73B0\u5728|\u7ACB(?:\u523B|\u5373)|\u5373\u523B)|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(\u65E9|\u665A)|(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(?:\u65E5|\u5929)(?:[\\s|,|\uFF0C]*)(?:(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?","i")}innerExtract(e,t){let n=t.index,i=e.createParsingResult(n,t[0]),s=CD.default(e.refDate),a=s;if(t[ND])i.start.imply("hour",s.hour()),i.start.imply("minute",s.minute()),i.start.imply("second",s.second()),i.start.imply("millisecond",s.millisecond());else if(t[Dy]){let o=t[Dy],u=t[ID];o=="\u660E"?s.hour()>1&&(a=a.add(1,"day")):o=="\u6628"?a=a.add(-1,"day"):o=="\u524D"?a=a.add(-2,"day"):o=="\u5927\u524D"?a=a.add(-3,"day"):o=="\u540E"?a=a.add(2,"day"):o=="\u5927\u540E"&&(a=a.add(3,"day")),u=="\u65E9"?i.start.imply("hour",6):u=="\u665A"&&(i.start.imply("hour",22),i.start.imply("meridiem",1))}else if(t[Ry]){let u=t[Ry][0];u=="\u65E9"||u=="\u4E0A"?i.start.imply("hour",6):u=="\u4E0B"?(i.start.imply("hour",15),i.start.imply("meridiem",1)):u=="\u4E2D"?(i.start.imply("hour",12),i.start.imply("meridiem",1)):u=="\u591C"||u=="\u665A"?(i.start.imply("hour",22),i.start.imply("meridiem",1)):u=="\u51CC"&&i.start.imply("hour",0)}else if(t[My]){let o=t[My];o=="\u660E"?s.hour()>1&&(a=a.add(1,"day")):o=="\u6628"?a=a.add(-1,"day"):o=="\u524D"?a=a.add(-2,"day"):o=="\u5927\u524D"?a=a.add(-3,"day"):o=="\u540E"?a=a.add(2,"day"):o=="\u5927\u540E"&&(a=a.add(3,"day"));let u=t[FD];if(u){let l=u[0];l=="\u65E9"||l=="\u4E0A"?i.start.imply("hour",6):l=="\u4E0B"?(i.start.imply("hour",15),i.start.imply("meridiem",1)):l=="\u4E2D"?(i.start.imply("hour",12),i.start.imply("meridiem",1)):l=="\u591C"||l=="\u665A"?(i.start.imply("hour",22),i.start.imply("meridiem",1)):l=="\u51CC"&&i.start.imply("hour",0)}}return i.start.assign("day",a.date()),i.start.assign("month",a.month()+1),i.start.assign("year",a.year()),i}};Fs.default=$d});var hi=b(Ot=>{"use strict";Object.defineProperty(Ot,"__esModule",{value:!0});Ot.zhStringToYear=Ot.zhStringToNumber=Ot.WEEKDAY_OFFSET=Ot.NUMBER=void 0;Ot.NUMBER={\u96F6:0,"\u3007":0,\u4E00:1,\u4E8C:2,\u4E24:2,\u4E09:3,\u56DB:4,\u4E94:5,\u516D:6,\u4E03:7,\u516B:8,\u4E5D:9,\u5341:10};Ot.WEEKDAY_OFFSET={\u5929:0,\u65E5:0,\u4E00:1,\u4E8C:2,\u4E09:3,\u56DB:4,\u4E94:5,\u516D:6};function LD(r){let e=0;for(let t=0;t<r.length;t++){let n=r[t];n==="\u5341"?e=e===0?Ot.NUMBER[n]:e*Ot.NUMBER[n]:e+=Ot.NUMBER[n]}return e}Ot.zhStringToNumber=LD;function UD(r){let e="";for(let t=0;t<r.length;t++){let n=r[t];e=e+Ot.NUMBER[n]}return parseInt(e)}Ot.zhStringToYear=UD});var Cy=b(Ls=>{"use strict";var WD=Ls&&Ls.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ls,"__esModule",{value:!0});var qD=WD(Te()),$D=W(),Rn=hi(),Yd=1,Ay=2,Gd=3,jd=class extends $D.AbstractParserWithWordBoundaryChecking{innerPattern(){return new RegExp("(\\d{2,4}|["+Object.keys(Rn.NUMBER).join("")+"]{4}|["+Object.keys(Rn.NUMBER).join("")+"]{2})?(?:\\s*)(?:\u5E74)?(?:[\\s|,|\uFF0C]*)(\\d{1,2}|["+Object.keys(Rn.NUMBER).join("")+"]{1,3})(?:\\s*)(?:\u6708)(?:\\s*)(\\d{1,2}|["+Object.keys(Rn.NUMBER).join("")+"]{1,3})?(?:\\s*)(?:\u65E5|\u53F7)?")}innerExtract(e,t){let n=qD.default(e.refDate),i=e.createParsingResult(t.index,t[0]),s=parseInt(t[Ay]);if(isNaN(s)&&(s=Rn.zhStringToNumber(t[Ay])),i.start.assign("month",s),t[Gd]){let a=parseInt(t[Gd]);isNaN(a)&&(a=Rn.zhStringToNumber(t[Gd])),i.start.assign("day",a)}else i.start.imply("day",n.date());if(t[Yd]){let a=parseInt(t[Yd]);isNaN(a)&&(a=Rn.zhStringToYear(t[Yd])),i.start.assign("year",a)}else i.start.imply("year",n.year());return i}};Ls.default=jd});var Ny=b(Us=>{"use strict";var YD=Us&&Us.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Us,"__esModule",{value:!0});var GD=YD(Te()),jD=W(),Py=hi(),BD=new RegExp("(\\d+|["+Object.keys(Py.NUMBER).join("")+"]+|\u534A|\u51E0)(?:\\s*)(?:\u4E2A)?(\u79D2(?:\u949F)?|\u5206\u949F|\u5C0F\u65F6|\u949F|\u65E5|\u5929|\u661F\u671F|\u793C\u62DC|\u6708|\u5E74)(?:(?:\u4E4B|\u8FC7)?\u540E|(?:\u4E4B)?\u5185)","i"),Bd=1,HD=2,Hd=class extends jD.AbstractParserWithWordBoundaryChecking{innerPattern(){return BD}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=parseInt(t[Bd]);if(isNaN(i)&&(i=Py.zhStringToNumber(t[Bd])),isNaN(i)){let u=t[Bd];if(u==="\u51E0")i=3;else if(u==="\u534A")i=.5;else return null}let s=GD.default(e.refDate),o=t[HD][0];return o.match(/[日天星礼月年]/)?(o=="\u65E5"||o=="\u5929"?s=s.add(i,"d"):o=="\u661F"||o=="\u793C"?s=s.add(i*7,"d"):o=="\u6708"?s=s.add(i,"month"):o=="\u5E74"&&(s=s.add(i,"year")),n.start.assign("year",s.year()),n.start.assign("month",s.month()+1),n.start.assign("day",s.date()),n):(o=="\u79D2"?s=s.add(i,"second"):o=="\u5206"?s=s.add(i,"minute"):(o=="\u5C0F"||o=="\u949F")&&(s=s.add(i,"hour")),n.start.imply("year",s.year()),n.start.imply("month",s.month()+1),n.start.imply("day",s.date()),n.start.assign("hour",s.hour()),n.start.assign("minute",s.minute()),n.start.assign("second",s.second()),n)}};Us.default=Hd});var Fy=b(Ws=>{"use strict";var zD=Ws&&Ws.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ws,"__esModule",{value:!0});var KD=zD(Te()),VD=W(),Iy=hi(),QD=new RegExp("(?<prefix>\u4E0A|\u4E0B|\u8FD9)(?:\u4E2A)?(?:\u661F\u671F|\u793C\u62DC|\u5468)(?<weekday>"+Object.keys(Iy.WEEKDAY_OFFSET).join("|")+")"),zd=class extends VD.AbstractParserWithWordBoundaryChecking{innerPattern(){return QD}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=t.groups.weekday,s=Iy.WEEKDAY_OFFSET[i];if(s===void 0)return null;let a=null,o=t.groups.prefix;o=="\u4E0A"?a="last":o=="\u4E0B"?a="next":o=="\u8FD9"&&(a="this");let u=KD.default(e.refDate),l=!1,c=u.day();return a=="last"||a=="past"?(u=u.day(s-7),l=!0):a=="next"?(u=u.day(s+7),l=!0):a=="this"?u=u.day(s):Math.abs(s-7-c)<Math.abs(s-c)?u=u.day(s-7):Math.abs(s+7-c)<Math.abs(s-c)?u=u.day(s+7):u=u.day(s),n.start.assign("weekday",s),l?(n.start.assign("day",u.date()),n.start.assign("month",u.month()+1),n.start.assign("year",u.year())):(n.start.imply("day",u.date()),n.start.imply("month",u.month()+1),n.start.imply("year",u.year())),n}};Ws.default=zd});var Ly=b(qs=>{"use strict";var XD=qs&&qs.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(qs,"__esModule",{value:!0});var ZD=XD(Te()),JD=W(),zt=hi(),eR=new RegExp("(?:\u4ECE|\u81EA)?(?:(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(\u65E9|\u671D|\u665A)|(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(?:\u65E5|\u5929)(?:[\\s,\uFF0C]*)(?:(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?)?(?:[\\s,\uFF0C]*)(?:(\\d+|["+Object.keys(zt.NUMBER).join("")+"]+)(?:\\s*)(?:\u70B9|\u65F6|:|\uFF1A)(?:\\s*)(\\d+|\u534A|\u6B63|\u6574|["+Object.keys(zt.NUMBER).join("")+"]+)?(?:\\s*)(?:\u5206|:|\uFF1A)?(?:\\s*)(\\d+|["+Object.keys(zt.NUMBER).join("")+"]+)?(?:\\s*)(?:\u79D2)?)(?:\\s*(A.M.|P.M.|AM?|PM?))?","i"),tR=new RegExp("(?:^\\s*(?:\u5230|\u81F3|\\-|\\\u2013|\\~|\\\u301C)\\s*)(?:(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(\u65E9|\u671D|\u665A)|(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(?:\u65E5|\u5929)(?:[\\s,\uFF0C]*)(?:(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?)?(?:[\\s,\uFF0C]*)(?:(\\d+|["+Object.keys(zt.NUMBER).join("")+"]+)(?:\\s*)(?:\u70B9|\u65F6|:|\uFF1A)(?:\\s*)(\\d+|\u534A|\u6B63|\u6574|["+Object.keys(zt.NUMBER).join("")+"]+)?(?:\\s*)(?:\u5206|:|\uFF1A)?(?:\\s*)(\\d+|["+Object.keys(zt.NUMBER).join("")+"]+)?(?:\\s*)(?:\u79D2)?)(?:\\s*(A.M.|P.M.|AM?|PM?))?","i"),yo=1,To=2,bo=3,_o=4,vo=5,Eo=6,Ht=7,mi=8,wo=9,Kd=class extends JD.AbstractParserWithWordBoundaryChecking{innerPattern(){return eR}innerExtract(e,t){if(t.index>0&&e.text[t.index-1].match(/\w/))return null;let n=ZD.default(e.refDate),i=e.createParsingResult(t.index,t[0]),s=n.clone();if(t[yo]){let c=t[yo];c=="\u660E"?n.hour()>1&&s.add(1,"day"):c=="\u6628"?s.add(-1,"day"):c=="\u524D"?s.add(-2,"day"):c=="\u5927\u524D"?s.add(-3,"day"):c=="\u540E"?s.add(2,"day"):c=="\u5927\u540E"&&s.add(3,"day"),i.start.assign("day",s.date()),i.start.assign("month",s.month()+1),i.start.assign("year",s.year())}else if(t[_o]){let c=t[_o];c=="\u660E"?s.add(1,"day"):c=="\u6628"?s.add(-1,"day"):c=="\u524D"?s.add(-2,"day"):c=="\u5927\u524D"?s.add(-3,"day"):c=="\u540E"?s.add(2,"day"):c=="\u5927\u540E"&&s.add(3,"day"),i.start.assign("day",s.date()),i.start.assign("month",s.month()+1),i.start.assign("year",s.year())}else i.start.imply("day",s.date()),i.start.imply("month",s.month()+1),i.start.imply("year",s.year());let a=0,o=0,u=-1;if(t[mi]){let c=parseInt(t[mi]);if(isNaN(c)&&(c=zt.zhStringToNumber(t[mi])),c>=60)return null;i.start.assign("second",c)}if(a=parseInt(t[Eo]),isNaN(a)&&(a=zt.zhStringToNumber(t[Eo])),t[Ht]?t[Ht]=="\u534A"?o=30:t[Ht]=="\u6B63"||t[Ht]=="\u6574"?o=0:(o=parseInt(t[Ht]),isNaN(o)&&(o=zt.zhStringToNumber(t[Ht]))):a>100&&(o=a%100,a=Math.floor(a/100)),o>=60||a>24)return null;if(a>=12&&(u=1),t[wo]){if(a>12)return null;let c=t[wo][0].toLowerCase();c=="a"&&(u=0,a==12&&(a=0)),c=="p"&&(u=1,a!=12&&(a+=12))}else if(t[To]){let p=t[To][0];p=="\u65E9"?(u=0,a==12&&(a=0)):p=="\u665A"&&(u=1,a!=12&&(a+=12))}else if(t[bo]){let p=t[bo][0];p=="\u4E0A"||p=="\u65E9"||p=="\u51CC"?(u=0,a==12&&(a=0)):(p=="\u4E0B"||p=="\u665A")&&(u=1,a!=12&&(a+=12))}else if(t[vo]){let p=t[vo][0];p=="\u4E0A"||p=="\u65E9"||p=="\u51CC"?(u=0,a==12&&(a=0)):(p=="\u4E0B"||p=="\u665A")&&(u=1,a!=12&&(a+=12))}if(i.start.assign("hour",a),i.start.assign("minute",o),u>=0?i.start.assign("meridiem",u):a<12?i.start.imply("meridiem",0):i.start.imply("meridiem",1),t=tR.exec(e.text.substring(i.index+i.text.length)),!t)return i.text.match(/^\d+$/)?null:i;let l=s.clone();if(i.end=e.createParsingComponents(),t[yo]){let c=t[yo];c=="\u660E"?n.hour()>1&&l.add(1,"day"):c=="\u6628"?l.add(-1,"day"):c=="\u524D"?l.add(-2,"day"):c=="\u5927\u524D"?l.add(-3,"day"):c=="\u540E"?l.add(2,"day"):c=="\u5927\u540E"&&l.add(3,"day"),i.end.assign("day",l.date()),i.end.assign("month",l.month()+1),i.end.assign("year",l.year())}else if(t[_o]){let c=t[_o];c=="\u660E"?l.add(1,"day"):c=="\u6628"?l.add(-1,"day"):c=="\u524D"?l.add(-2,"day"):c=="\u5927\u524D"?l.add(-3,"day"):c=="\u540E"?l.add(2,"day"):c=="\u5927\u540E"&&l.add(3,"day"),i.end.assign("day",l.date()),i.end.assign("month",l.month()+1),i.end.assign("year",l.year())}else i.end.imply("day",l.date()),i.end.imply("month",l.month()+1),i.end.imply("year",l.year());if(a=0,o=0,u=-1,t[mi]){let c=parseInt(t[mi]);if(isNaN(c)&&(c=zt.zhStringToNumber(t[mi])),c>=60)return null;i.end.assign("second",c)}if(a=parseInt(t[Eo]),isNaN(a)&&(a=zt.zhStringToNumber(t[Eo])),t[Ht]?t[Ht]=="\u534A"?o=30:t[Ht]=="\u6B63"||t[Ht]=="\u6574"?o=0:(o=parseInt(t[Ht]),isNaN(o)&&(o=zt.zhStringToNumber(t[Ht]))):a>100&&(o=a%100,a=Math.floor(a/100)),o>=60||a>24)return null;if(a>=12&&(u=1),t[wo]){if(a>12)return null;let c=t[wo][0].toLowerCase();c=="a"&&(u=0,a==12&&(a=0)),c=="p"&&(u=1,a!=12&&(a+=12)),i.start.isCertain("meridiem")||(u==0?(i.start.imply("meridiem",0),i.start.get("hour")==12&&i.start.assign("hour",0)):(i.start.imply("meridiem",1),i.start.get("hour")!=12&&i.start.assign("hour",i.start.get("hour")+12)))}else if(t[To]){let p=t[To][0];p=="\u65E9"?(u=0,a==12&&(a=0)):p=="\u665A"&&(u=1,a!=12&&(a+=12))}else if(t[bo]){let p=t[bo][0];p=="\u4E0A"||p=="\u65E9"||p=="\u51CC"?(u=0,a==12&&(a=0)):(p=="\u4E0B"||p=="\u665A")&&(u=1,a!=12&&(a+=12))}else if(t[vo]){let p=t[vo][0];p=="\u4E0A"||p=="\u65E9"||p=="\u51CC"?(u=0,a==12&&(a=0)):(p=="\u4E0B"||p=="\u665A")&&(u=1,a!=12&&(a+=12))}return i.text=i.text+t[0],i.end.assign("hour",a),i.end.assign("minute",o),u>=0?i.end.assign("meridiem",u):i.start.isCertain("meridiem")&&i.start.get("meridiem")==1&&i.start.get("hour")>a?i.end.imply("meridiem",0):a>12&&i.end.imply("meridiem",1),i.end.date().getTime()<i.start.date().getTime()&&i.end.imply("day",i.end.get("day")+1),i}};qs.default=Kd});var Wy=b($s=>{"use strict";var rR=$s&&$s.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty($s,"__esModule",{value:!0});var nR=rR(Te()),iR=W(),Uy=hi(),sR=new RegExp("(?:\u661F\u671F|\u793C\u62DC|\u5468)(?<weekday>"+Object.keys(Uy.WEEKDAY_OFFSET).join("|")+")"),Vd=class extends iR.AbstractParserWithWordBoundaryChecking{innerPattern(){return sR}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=t.groups.weekday,s=Uy.WEEKDAY_OFFSET[i];if(s===void 0)return null;let a=nR.default(e.refDate),o=!1,u=a.day();return Math.abs(s-7-u)<Math.abs(s-u)?a=a.day(s-7):Math.abs(s+7-u)<Math.abs(s-u)?a=a.day(s+7):a=a.day(s),n.start.assign("weekday",s),o?(n.start.assign("day",a.date()),n.start.assign("month",a.month()+1),n.start.assign("year",a.year())):(n.start.imply("day",a.date()),n.start.imply("month",a.month()+1),n.start.imply("year",a.year())),n}};$s.default=Vd});var qy=b(Ys=>{"use strict";var aR=Ys&&Ys.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ys,"__esModule",{value:!0});var oR=aR(mr()),Qd=class extends oR.default{patternBetween(){return/^\s*(至|到|-|~|～|－|ー)\s*$/i}};Ys.default=Qd});var $y=b(Gs=>{"use strict";var uR=Gs&&Gs.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Gs,"__esModule",{value:!0});var lR=uR(Rr()),Xd=class extends lR.default{patternBetween(){return/^\s*$/i}};Gs.default=Xd});var Yy=b($e=>{"use strict";var Ir=$e&&$e.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty($e,"__esModule",{value:!0});$e.createConfiguration=$e.createCasualConfiguration=$e.parseDate=$e.parse=$e.strict=$e.casual=$e.hans=void 0;var Zd=tr(),cR=Ir(Ba()),dR=Mr(),fR=Ir(xy()),pR=Ir(Cy()),hR=Ir(Ny()),mR=Ir(Fy()),gR=Ir(Ly()),yR=Ir(Wy()),TR=Ir(qy()),bR=Ir($y());$e.hans=new Zd.Chrono(Jd());$e.casual=new Zd.Chrono(Jd());$e.strict=new Zd.Chrono(ef());function _R(r,e,t){return $e.casual.parse(r,e,t)}$e.parse=_R;function vR(r,e,t){return $e.casual.parseDate(r,e,t)}$e.parseDate=vR;function Jd(){let r=ef();return r.parsers.unshift(new fR.default),r}$e.createCasualConfiguration=Jd;function ef(){let r=dR.includeCommonConfiguration({parsers:[new pR.default,new mR.default,new yR.default,new gR.default,new hR.default],refiners:[new TR.default,new bR.default]});return r.refiners=r.refiners.filter(e=>!(e instanceof cR.default)),r}$e.createConfiguration=ef});var jy=b(xt=>{"use strict";var Gy=xt&&xt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),ER=xt&&xt.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),wR=xt&&xt.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&Gy(e,r,t)},kR=xt&&xt.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&Gy(e,r,t);return ER(e,r),e};Object.defineProperty(xt,"__esModule",{value:!0});xt.hans=void 0;wR(Sy(),xt);xt.hans=kR(Yy())});var St=b(ee=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0});ee.parseTimeUnits=ee.TIME_UNITS_PATTERN=ee.parseYear=ee.YEAR_PATTERN=ee.parseOrdinalNumberPattern=ee.ORDINAL_NUMBER_PATTERN=ee.parseNumberPattern=ee.NUMBER_PATTERN=ee.TIME_UNIT_DICTIONARY=ee.ORDINAL_WORD_DICTIONARY=ee.INTEGER_WORD_DICTIONARY=ee.MONTH_DICTIONARY=ee.FULL_MONTH_NAME_DICTIONARY=ee.WEEKDAY_DICTIONARY=ee.REGEX_PARTS=void 0;var ko=Ee(),OR=rt();ee.REGEX_PARTS={leftBoundary:"([^\\p{L}\\p{N}_]|^)",rightBoundary:"(?=[^\\p{L}\\p{N}_]|$)",flags:"iu"};ee.WEEKDAY_DICTIONARY={\u0432\u043E\u0441\u043A\u0440\u0435\u0441\u0435\u043D\u044C\u0435:0,\u0432\u043E\u0441\u043A\u0440\u0435\u0441\u0435\u043D\u044C\u044F:0,\u0432\u0441\u043A:0,"\u0432\u0441\u043A.":0,\u043F\u043E\u043D\u0435\u0434\u0435\u043B\u044C\u043D\u0438\u043A:1,\u043F\u043E\u043D\u0435\u0434\u0435\u043B\u044C\u043D\u0438\u043A\u0430:1,\u043F\u043D:1,"\u043F\u043D.":1,\u0432\u0442\u043E\u0440\u043D\u0438\u043A:2,\u0432\u0442\u043E\u0440\u043D\u0438\u043A\u0430:2,\u0432\u0442:2,"\u0432\u0442.":2,\u0441\u0440\u0435\u0434\u0430:3,\u0441\u0440\u0435\u0434\u044B:3,\u0441\u0440\u0435\u0434\u0443:3,\u0441\u0440:3,"\u0441\u0440.":3,\u0447\u0435\u0442\u0432\u0435\u0440\u0433:4,\u0447\u0435\u0442\u0432\u0435\u0440\u0433\u0430:4,\u0447\u0442:4,"\u0447\u0442.":4,\u043F\u044F\u0442\u043D\u0438\u0446\u0430:5,\u043F\u044F\u0442\u043D\u0438\u0446\u0443:5,\u043F\u044F\u0442\u043D\u0438\u0446\u044B:5,\u043F\u0442:5,"\u043F\u0442.":5,\u0441\u0443\u0431\u0431\u043E\u0442\u0430:6,\u0441\u0443\u0431\u0431\u043E\u0442\u0443:6,\u0441\u0443\u0431\u0431\u043E\u0442\u044B:6,\u0441\u0431:6,"\u0441\u0431.":6};ee.FULL_MONTH_NAME_DICTIONARY={\u044F\u043D\u0432\u0430\u0440\u044C:1,\u044F\u043D\u0432\u0430\u0440\u044F:1,\u044F\u043D\u0432\u0430\u0440\u0435:1,\u0444\u0435\u0432\u0440\u044F\u043B\u044C:2,\u0444\u0435\u0432\u0440\u044F\u043B\u044F:2,\u0444\u0435\u0432\u0440\u044F\u043B\u0435:2,\u043C\u0430\u0440\u0442:3,\u043C\u0430\u0440\u0442\u0430:3,\u043C\u0430\u0440\u0442\u0435:3,\u0430\u043F\u0440\u0435\u043B\u044C:4,\u0430\u043F\u0440\u0435\u043B\u044F:4,\u0430\u043F\u0440\u0435\u043B\u0435:4,\u043C\u0430\u0439:5,\u043C\u0430\u044F:5,\u043C\u0430\u0435:5,\u0438\u044E\u043D\u044C:6,\u0438\u044E\u043D\u044F:6,\u0438\u044E\u043D\u0435:6,\u0438\u044E\u043B\u044C:7,\u0438\u044E\u043B\u044F:7,\u0438\u044E\u043B\u0435:7,\u0430\u0432\u0433\u0443\u0441\u0442:8,\u0430\u0432\u0433\u0443\u0441\u0442\u0430:8,\u0430\u0432\u0433\u0443\u0441\u0442\u0435:8,\u0441\u0435\u043D\u0442\u044F\u0431\u0440\u044C:9,\u0441\u0435\u043D\u0442\u044F\u0431\u0440\u044F:9,\u0441\u0435\u043D\u0442\u044F\u0431\u0440\u0435:9,\u043E\u043A\u0442\u044F\u0431\u0440\u044C:10,\u043E\u043A\u0442\u044F\u0431\u0440\u044F:10,\u043E\u043A\u0442\u044F\u0431\u0440\u0435:10,\u043D\u043E\u044F\u0431\u0440\u044C:11,\u043D\u043E\u044F\u0431\u0440\u044F:11,\u043D\u043E\u044F\u0431\u0440\u0435:11,\u0434\u0435\u043A\u0430\u0431\u0440\u044C:12,\u0434\u0435\u043A\u0430\u0431\u0440\u044F:12,\u0434\u0435\u043A\u0430\u0431\u0440\u0435:12};ee.MONTH_DICTIONARY=Object.assign(Object.assign({},ee.FULL_MONTH_NAME_DICTIONARY),{\u044F\u043D\u0432:1,"\u044F\u043D\u0432.":1,\u0444\u0435\u0432:2,"\u0444\u0435\u0432.":2,\u043C\u0430\u0440:3,"\u043C\u0430\u0440.":3,\u0430\u043F\u0440:4,"\u0430\u043F\u0440.":4,\u0430\u0432\u0433:8,"\u0430\u0432\u0433.":8,\u0441\u0435\u043D:9,"\u0441\u0435\u043D.":9,\u043E\u043A\u0442:10,"\u043E\u043A\u0442.":10,\u043D\u043E\u044F:11,"\u043D\u043E\u044F.":11,\u0434\u0435\u043A:12,"\u0434\u0435\u043A.":12});ee.INTEGER_WORD_DICTIONARY={\u043E\u0434\u0438\u043D:1,\u043E\u0434\u043D\u0430:1,\u043E\u0434\u043D\u043E\u0439:1,\u043E\u0434\u043D\u0443:1,\u0434\u0432\u0435:2,\u0434\u0432\u0430:2,\u0434\u0432\u0443\u0445:2,\u0442\u0440\u0438:3,\u0442\u0440\u0435\u0445:3,\u0442\u0440\u0451\u0445:3,\u0447\u0435\u0442\u044B\u0440\u0435:4,\u0447\u0435\u0442\u044B\u0440\u0435\u0445:4,\u0447\u0435\u0442\u044B\u0440\u0451\u0445:4,\u043F\u044F\u0442\u044C:5,\u043F\u044F\u0442\u0438:5,\u0448\u0435\u0441\u0442\u044C:6,\u0448\u0435\u0441\u0442\u0438:6,\u0441\u0435\u043C\u044C:7,\u0441\u0435\u043C\u0438:7,\u0432\u043E\u0441\u0435\u043C\u044C:8,\u0432\u043E\u0441\u0435\u043C\u044C\u043C\u0438:8,\u0434\u0435\u0432\u044F\u0442\u044C:9,\u0434\u0435\u0432\u044F\u0442\u0438:9,\u0434\u0435\u0441\u044F\u0442\u044C:10,\u0434\u0435\u0441\u044F\u0442\u0438:10,\u043E\u0434\u0438\u043D\u043D\u0430\u0434\u0446\u0430\u0442\u044C:11,\u043E\u0434\u0438\u043D\u043D\u0430\u0434\u0446\u0430\u0442\u0438:11,\u0434\u0432\u0435\u043D\u0430\u0434\u0446\u0430\u0442\u044C:12,\u0434\u0432\u0435\u043D\u0430\u0434\u0446\u0430\u0442\u0438:12};ee.ORDINAL_WORD_DICTIONARY={\u043F\u0435\u0440\u0432\u043E\u0435:1,\u043F\u0435\u0440\u0432\u043E\u0433\u043E:1,\u0432\u0442\u043E\u0440\u043E\u0435:2,\u0432\u0442\u043E\u0440\u043E\u0433\u043E:2,\u0442\u0440\u0435\u0442\u044C\u0435:3,\u0442\u0440\u0435\u0442\u044C\u0435\u0433\u043E:3,\u0447\u0435\u0442\u0432\u0435\u0440\u0442\u043E\u0435:4,\u0447\u0435\u0442\u0432\u0435\u0440\u0442\u043E\u0433\u043E:4,\u043F\u044F\u0442\u043E\u0435:5,\u043F\u044F\u0442\u043E\u0433\u043E:5,\u0448\u0435\u0441\u0442\u043E\u0435:6,\u0448\u0435\u0441\u0442\u043E\u0433\u043E:6,\u0441\u0435\u0434\u044C\u043C\u043E\u0435:7,\u0441\u0435\u0434\u044C\u043C\u043E\u0433\u043E:7,\u0432\u043E\u0441\u044C\u043C\u043E\u0435:8,\u0432\u043E\u0441\u044C\u043C\u043E\u0433\u043E:8,\u0434\u0435\u0432\u044F\u0442\u043E\u0435:9,\u0434\u0435\u0432\u044F\u0442\u043E\u0433\u043E:9,\u0434\u0435\u0441\u044F\u0442\u043E\u0435:10,\u0434\u0435\u0441\u044F\u0442\u043E\u0433\u043E:10,\u043E\u0434\u0438\u043D\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:11,\u043E\u0434\u0438\u043D\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:11,\u0434\u0432\u0435\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:12,\u0434\u0432\u0435\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:12,\u0442\u0440\u0438\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:13,\u0442\u0440\u0438\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:13,\u0447\u0435\u0442\u044B\u0440\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:14,\u0447\u0435\u0442\u044B\u0440\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:14,\u043F\u044F\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:15,\u043F\u044F\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:15,\u0448\u0435\u0441\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:16,\u0448\u0435\u0441\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:16,\u0441\u0435\u043C\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:17,\u0441\u0435\u043C\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:17,\u0432\u043E\u0441\u0435\u043C\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:18,\u0432\u043E\u0441\u0435\u043C\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:18,\u0434\u0435\u0432\u044F\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:19,\u0434\u0435\u0432\u044F\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:19,\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u043E\u0435:20,\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:20,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u043F\u0435\u0440\u0432\u043E\u0435":21,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u043F\u0435\u0440\u0432\u043E\u0433\u043E":21,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0432\u0442\u043E\u0440\u043E\u0435":22,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0432\u0442\u043E\u0440\u043E\u0433\u043E":22,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0442\u0440\u0435\u0442\u044C\u0435":23,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0442\u0440\u0435\u0442\u044C\u0435\u0433\u043E":23,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0447\u0435\u0442\u0432\u0435\u0440\u0442\u043E\u0435":24,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0447\u0435\u0442\u0432\u0435\u0440\u0442\u043E\u0433\u043E":24,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u043F\u044F\u0442\u043E\u0435":25,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u043F\u044F\u0442\u043E\u0433\u043E":25,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0448\u0435\u0441\u0442\u043E\u0435":26,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0448\u0435\u0441\u0442\u043E\u0433\u043E":26,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0441\u0435\u0434\u044C\u043C\u043E\u0435":27,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0441\u0435\u0434\u044C\u043C\u043E\u0433\u043E":27,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0432\u043E\u0441\u044C\u043C\u043E\u0435":28,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0432\u043E\u0441\u044C\u043C\u043E\u0433\u043E":28,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0434\u0435\u0432\u044F\u0442\u043E\u0435":29,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0434\u0435\u0432\u044F\u0442\u043E\u0433\u043E":29,\u0442\u0440\u0438\u0434\u0446\u0430\u0442\u043E\u0435:30,\u0442\u0440\u0438\u0434\u0446\u0430\u0442\u043E\u0433\u043E:30,"\u0442\u0440\u0438\u0434\u0446\u0430\u0442\u044C \u043F\u0435\u0440\u0432\u043E\u0435":31,"\u0442\u0440\u0438\u0434\u0446\u0430\u0442\u044C \u043F\u0435\u0440\u0432\u043E\u0433\u043E":31};ee.TIME_UNIT_DICTIONARY={\u0441\u0435\u043A:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u0430:"second",\u0441\u0435\u043A\u0443\u043D\u0434:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u044B:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u0443:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u043E\u0447\u043A\u0430:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u043E\u0447\u043A\u0438:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u043E\u0447\u0435\u043A:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u043E\u0447\u043A\u0443:"second",\u043C\u0438\u043D:"minute",\u043C\u0438\u043D\u0443\u0442\u0430:"minute",\u043C\u0438\u043D\u0443\u0442:"minute",\u043C\u0438\u043D\u0443\u0442\u044B:"minute",\u043C\u0438\u043D\u0443\u0442\u0443:"minute",\u043C\u0438\u043D\u0443\u0442\u043E\u043A:"minute",\u043C\u0438\u043D\u0443\u0442\u043A\u0438:"minute",\u043C\u0438\u043D\u0443\u0442\u043A\u0443:"minute",\u0447\u0430\u0441:"hour",\u0447\u0430\u0441\u043E\u0432:"hour",\u0447\u0430\u0441\u0430:"hour",\u0447\u0430\u0441\u0443:"hour",\u0447\u0430\u0441\u0438\u043A\u043E\u0432:"hour",\u0447\u0430\u0441\u0438\u043A\u0430:"hour",\u0447\u0430\u0441\u0438\u043A\u0435:"hour",\u0447\u0430\u0441\u0438\u043A:"hour",\u0434\u0435\u043D\u044C:"d",\u0434\u043D\u044F:"d",\u0434\u043D\u0435\u0439:"d",\u0441\u0443\u0442\u043E\u043A:"d",\u0441\u0443\u0442\u043A\u0438:"d",\u043D\u0435\u0434\u0435\u043B\u044F:"week",\u043D\u0435\u0434\u0435\u043B\u0435:"week",\u043D\u0435\u0434\u0435\u043B\u0438:"week",\u043D\u0435\u0434\u0435\u043B\u044E:"week",\u043D\u0435\u0434\u0435\u043B\u044C:"week",\u043D\u0435\u0434\u0435\u043B\u044C\u043A\u0435:"week",\u043D\u0435\u0434\u0435\u043B\u044C\u043A\u0438:"week",\u043D\u0435\u0434\u0435\u043B\u0435\u043A:"week",\u043C\u0435\u0441\u044F\u0446:"month",\u043C\u0435\u0441\u044F\u0446\u0435:"month",\u043C\u0435\u0441\u044F\u0446\u0435\u0432:"month",\u043C\u0435\u0441\u044F\u0446\u0430:"month",\u043A\u0432\u0430\u0440\u0442\u0430\u043B:"quarter",\u043A\u0432\u0430\u0440\u0442\u0430\u043B\u0435:"quarter",\u043A\u0432\u0430\u0440\u0442\u0430\u043B\u043E\u0432:"quarter",\u0433\u043E\u0434:"year",\u0433\u043E\u0434\u0430:"year",\u0433\u043E\u0434\u0443:"year",\u0433\u043E\u0434\u043E\u0432:"year",\u043B\u0435\u0442:"year",\u0433\u043E\u0434\u0438\u043A:"year",\u0433\u043E\u0434\u0438\u043A\u0430:"year",\u0433\u043E\u0434\u0438\u043A\u043E\u0432:"year"};ee.NUMBER_PATTERN=`(?:${ko.matchAnyPattern(ee.INTEGER_WORD_DICTIONARY)}|[0-9]+|[0-9]+\\.[0-9]+|\u043F\u043E\u043B|\u043D\u0435\u0441\u043A\u043E\u043B\u044C\u043A\u043E|\u043F\u0430\u0440(?:\u044B|\u0443)|\\s{0,3})`;function Hy(r){let e=r.toLowerCase();return ee.INTEGER_WORD_DICTIONARY[e]!==void 0?ee.INTEGER_WORD_DICTIONARY[e]:e.match(/несколько/)?3:e.match(/пол/)?.5:e.match(/пар/)?2:e===""?1:parseFloat(e)}ee.parseNumberPattern=Hy;ee.ORDINAL_NUMBER_PATTERN=`(?:${ko.matchAnyPattern(ee.ORDINAL_WORD_DICTIONARY)}|[0-9]{1,2}(?:\u0433\u043E|\u043E\u0433\u043E|\u0435|\u043E\u0435)?)`;function SR(r){let e=r.toLowerCase();return ee.ORDINAL_WORD_DICTIONARY[e]!==void 0?ee.ORDINAL_WORD_DICTIONARY[e]:(e=e.replace(/(?:st|nd|rd|th)$/i,""),parseInt(e))}ee.parseOrdinalNumberPattern=SR;var tf="(?:\\s+(?:\u0433\u043E\u0434\u0443|\u0433\u043E\u0434\u0430|\u0433\u043E\u0434|\u0433|\u0433.))?";ee.YEAR_PATTERN=`(?:[1-9][0-9]{0,3}${tf}\\s*(?:\u043D.\u044D.|\u0434\u043E \u043D.\u044D.|\u043D. \u044D.|\u0434\u043E \u043D. \u044D.)|[1-2][0-9]{3}${tf}|[5-9][0-9]${tf})`;function DR(r){if(/(год|года|г|г.)/i.test(r)&&(r=r.replace(/(год|года|г|г.)/i,"")),/(до н.э.|до н. э.)/i.test(r))return r=r.replace(/(до н.э.|до н. э.)/i,""),-parseInt(r);if(/(н. э.|н.э.)/i.test(r))return r=r.replace(/(н. э.|н.э.)/i,""),parseInt(r);let e=parseInt(r);return OR.findMostLikelyADYear(e)}ee.parseYear=DR;var zy=`(${ee.NUMBER_PATTERN})\\s{0,3}(${ko.matchAnyPattern(ee.TIME_UNIT_DICTIONARY)})`,By=new RegExp(zy,"i");ee.TIME_UNITS_PATTERN=ko.repeatedTimeunitPattern("(?:(?:\u043E\u043A\u043E\u043B\u043E|\u043F\u0440\u0438\u043C\u0435\u0440\u043D\u043E)\\s{0,3})?",zy);function RR(r){let e={},t=r,n=By.exec(t);for(;n;)MR(e,n),t=t.substring(n[0].length).trim(),n=By.exec(t);return e}ee.parseTimeUnits=RR;function MR(r,e){let t=Hy(e[1]),n=ee.TIME_UNIT_DICTIONARY[e[2].toLowerCase()];r[n]=t}});var Vy=b(nf=>{"use strict";Object.defineProperty(nf,"__esModule",{value:!0});var js=St(),xR=Pe(),AR=W(),Ky=`(?:(?:\u043E\u043A\u043E\u043B\u043E|\u043F\u0440\u0438\u043C\u0435\u0440\u043D\u043E)\\s*(?:~\\s*)?)?(${js.TIME_UNITS_PATTERN})${js.REGEX_PARTS.rightBoundary}`,CR=new RegExp(`(?:\u0432 \u0442\u0435\u0447\u0435\u043D\u0438\u0435|\u0432 \u0442\u0435\u0447\u0435\u043D\u0438\u0438)\\s*${Ky}`,js.REGEX_PARTS.flags),PR=new RegExp(Ky,"i"),rf=class extends AR.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return js.REGEX_PARTS.leftBoundary}innerPattern(e){return e.option.forwardDate?PR:CR}innerExtract(e,t){let n=js.parseTimeUnits(t[1]);return xR.ParsingComponents.createRelativeFromReference(e.reference,n)}};nf.default=rf});var eT=b(af=>{"use strict";Object.defineProperty(af,"__esModule",{value:!0});var NR=rt(),Bs=St(),Jy=St(),Oo=St(),IR=Ee(),FR=W(),LR=new RegExp(`(?:\u0441)?\\s*(${Oo.ORDINAL_NUMBER_PATTERN})(?:\\s{0,3}(?:\u043F\u043E|-|\u2013|\u0434\u043E)?\\s{0,3}(${Oo.ORDINAL_NUMBER_PATTERN}))?(?:-|\\/|\\s{0,3}(?:of)?\\s{0,3})(${IR.matchAnyPattern(Bs.MONTH_DICTIONARY)})(?:(?:-|\\/|,?\\s{0,3})(${Jy.YEAR_PATTERN}(?![^\\s]\\d)))?${Bs.REGEX_PARTS.rightBoundary}`,Bs.REGEX_PARTS.flags),Qy=1,Xy=2,UR=3,Zy=4,sf=class extends FR.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return Bs.REGEX_PARTS.leftBoundary}innerPattern(){return LR}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=Bs.MONTH_DICTIONARY[t[UR].toLowerCase()],s=Oo.parseOrdinalNumberPattern(t[Qy]);if(s>31)return t.index=t.index+t[Qy].length,null;if(n.start.assign("month",i),n.start.assign("day",s),t[Zy]){let a=Jy.parseYear(t[Zy]);n.start.assign("year",a)}else{let a=NR.findYearClosestToRef(e.refDate,s,i);n.start.imply("year",a)}if(t[Xy]){let a=Oo.parseOrdinalNumberPattern(t[Xy]);n.end=n.start.clone(),n.end.assign("day",a)}return n}};af.default=sf});var nT=b(uf=>{"use strict";Object.defineProperty(uf,"__esModule",{value:!0});var Hs=St(),WR=rt(),qR=Ee(),rT=St(),$R=W(),YR=new RegExp(`((?:\u0432)\\s*)?(${qR.matchAnyPattern(Hs.MONTH_DICTIONARY)})\\s*(?:[,-]?\\s*(${rT.YEAR_PATTERN})?)?(?=[^\\s\\w]|\\s+[^0-9]|\\s+$|$)`,Hs.REGEX_PARTS.flags),GR=2,tT=3,of=class extends $R.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return Hs.REGEX_PARTS.leftBoundary}innerPattern(){return YR}innerExtract(e,t){let n=t[GR].toLowerCase();if(t[0].length<=3&&!Hs.FULL_MONTH_NAME_DICTIONARY[n])return null;let i=e.createParsingResult(t.index,t.index+t[0].length);i.start.imply("day",1);let s=Hs.MONTH_DICTIONARY[n];if(i.start.assign("month",s),t[tT]){let a=rT.parseYear(t[tT]);i.start.assign("year",a)}else{let a=WR.findYearClosestToRef(e.refDate,1,s);i.start.imply("year",a)}return i}};uf.default=of});var sT=b(cf=>{"use strict";Object.defineProperty(cf,"__esModule",{value:!0});var So=Ge(),jR=vn(),iT=St(),lf=class extends jR.AbstractTimeExpressionParser{constructor(e){super(e)}patternFlags(){return iT.REGEX_PARTS.flags}primaryPatternLeftBoundary(){return"(^|\\s|T|(?:[^\\p{L}\\p{N}_]))"}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|\u0434\u043E|\u0438|\u043F\u043E|\\?)\\s*"}primaryPrefix(){return"(?:(?:\u0432|\u0441)\\s*)??"}primarySuffix(){return`(?:\\s*(?:\u0443\u0442\u0440\u0430|\u0432\u0435\u0447\u0435\u0440\u0430|\u043F\u043E\u0441\u043B\u0435 \u043F\u043E\u043B\u0443\u0434\u043D\u044F))?(?!\\/)${iT.REGEX_PARTS.rightBoundary}`}extractPrimaryTimeComponents(e,t){let n=super.extractPrimaryTimeComponents(e,t);if(n){if(t[0].endsWith("\u0432\u0435\u0447\u0435\u0440\u0430")){let i=n.get("hour");i>=6&&i<12?(n.assign("hour",n.get("hour")+12),n.assign("meridiem",So.Meridiem.PM)):i<6&&n.assign("meridiem",So.Meridiem.AM)}if(t[0].endsWith("\u043F\u043E\u0441\u043B\u0435 \u043F\u043E\u043B\u0443\u0434\u043D\u044F")){n.assign("meridiem",So.Meridiem.PM);let i=n.get("hour");i>=0&&i<=6&&n.assign("hour",n.get("hour")+12)}t[0].endsWith("\u0443\u0442\u0440\u0430")&&(n.assign("meridiem",So.Meridiem.AM),n.get("hour")<12&&n.assign("hour",n.get("hour")))}return n}};cf.default=lf});var aT=b(ff=>{"use strict";Object.defineProperty(ff,"__esModule",{value:!0});var Do=St(),BR=Pe(),HR=W(),zR=Yt(),KR=new RegExp(`(${Do.TIME_UNITS_PATTERN})\\s{0,5}\u043D\u0430\u0437\u0430\u0434(?=(?:\\W|$))`,Do.REGEX_PARTS.flags),df=class extends HR.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return Do.REGEX_PARTS.leftBoundary}innerPattern(){return KR}innerExtract(e,t){let n=Do.parseTimeUnits(t[1]),i=zR.reverseTimeUnits(n);return BR.ParsingComponents.createRelativeFromReference(e.reference,i)}};ff.default=df});var oT=b(zs=>{"use strict";var VR=zs&&zs.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(zs,"__esModule",{value:!0});var QR=VR(mr()),pf=class extends QR.default{patternBetween(){return/^\s*(и до|и по|до|по|-)\s*$/i}};zs.default=pf});var uT=b(Ks=>{"use strict";var XR=Ks&&Ks.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ks,"__esModule",{value:!0});var ZR=XR(Rr()),hf=class extends ZR.default{patternBetween(){return new RegExp("^\\s*(T|\u0432|,|-)?\\s*$")}};Ks.default=hf});var lT=b(Fr=>{"use strict";var JR=Fr&&Fr.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),eM=Fr&&Fr.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),tM=Fr&&Fr.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&JR(e,r,t);return eM(e,r),e};Object.defineProperty(Fr,"__esModule",{value:!0});var rM=W(),Vs=tM(Ar()),mf=St(),nM=new RegExp(`(?:\u0441|\u0441\u043E)?\\s*(\u0441\u0435\u0433\u043E\u0434\u043D\u044F|\u0432\u0447\u0435\u0440\u0430|\u0437\u0430\u0432\u0442\u0440\u0430|\u043F\u043E\u0441\u043B\u0435\u0437\u0430\u0432\u0442\u0440\u0430|\u043F\u043E\u0437\u0430\u0432\u0447\u0435\u0440\u0430)${mf.REGEX_PARTS.rightBoundary}`,mf.REGEX_PARTS.flags),gf=class extends rM.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return mf.REGEX_PARTS.leftBoundary}innerPattern(e){return nM}innerExtract(e,t){let n=t[1].toLowerCase(),i=e.createParsingComponents();switch(n){case"\u0441\u0435\u0433\u043E\u0434\u043D\u044F":return Vs.today(e.reference);case"\u0432\u0447\u0435\u0440\u0430":return Vs.yesterday(e.reference);case"\u0437\u0430\u0432\u0442\u0440\u0430":return Vs.tomorrow(e.reference);case"\u043F\u043E\u0441\u043B\u0435\u0437\u0430\u0432\u0442\u0440\u0430":return Vs.theDayAfter(e.reference,2);case"\u043F\u043E\u0437\u0430\u0432\u0447\u0435\u0440\u0430":return Vs.theDayBefore(e.reference,2)}return i}};Fr.default=gf});var cT=b(ar=>{"use strict";var iM=ar&&ar.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),sM=ar&&ar.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),aM=ar&&ar.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&iM(e,r,t);return sM(e,r),e},oM=ar&&ar.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ar,"__esModule",{value:!0});var uM=W(),Mn=aM(Ar()),lM=$t(),cM=oM(Te()),yf=St(),dM=new RegExp(`(\u0441\u0435\u0439\u0447\u0430\u0441|\u043F\u0440\u043E\u0448\u043B\u044B\u043C\\s*\u0432\u0435\u0447\u0435\u0440\u043E\u043C|\u043F\u0440\u043E\u0448\u043B\u043E\u0439\\s*\u043D\u043E\u0447\u044C\u044E|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0439\\s*\u043D\u043E\u0447\u044C\u044E|\u0441\u0435\u0433\u043E\u0434\u043D\u044F\\s*\u043D\u043E\u0447\u044C\u044E|\u044D\u0442\u043E\u0439\\s*\u043D\u043E\u0447\u044C\u044E|\u043D\u043E\u0447\u044C\u044E|\u044D\u0442\u0438\u043C \u0443\u0442\u0440\u043E\u043C|\u0443\u0442\u0440\u043E\u043C|\u0443\u0442\u0440\u0430|\u0432\\s*\u043F\u043E\u043B\u0434\u0435\u043D\u044C|\u0432\u0435\u0447\u0435\u0440\u043E\u043C|\u0432\u0435\u0447\u0435\u0440\u0430|\u0432\\s*\u043F\u043E\u043B\u043D\u043E\u0447\u044C)${yf.REGEX_PARTS.rightBoundary}`,yf.REGEX_PARTS.flags),Tf=class extends uM.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return yf.REGEX_PARTS.leftBoundary}innerPattern(){return dM}innerExtract(e,t){let n=cM.default(e.refDate),i=t[0].toLowerCase(),s=e.createParsingComponents();if(i==="\u0441\u0435\u0439\u0447\u0430\u0441")return Mn.now(e.reference);if(i==="\u0432\u0435\u0447\u0435\u0440\u043E\u043C"||i==="\u0432\u0435\u0447\u0435\u0440\u0430")return Mn.evening(e.reference);if(i.endsWith("\u0443\u0442\u0440\u043E\u043C")||i.endsWith("\u0443\u0442\u0440\u0430"))return Mn.morning(e.reference);if(i.match(/в\s*полдень/))return Mn.noon(e.reference);if(i.match(/прошлой\s*ночью/))return Mn.lastNight(e.reference);if(i.match(/прошлым\s*вечером/))return Mn.yesterdayEvening(e.reference);if(i.match(/следующей\s*ночью/)){let a=n.hour()<22?1:2;n=n.add(a,"day"),lM.assignSimilarDate(s,n),s.imply("hour",0)}return i.match(/в\s*полночь/)||i.endsWith("\u043D\u043E\u0447\u044C\u044E")?Mn.midnight(e.reference):s}};ar.default=Tf});var dT=b(_f=>{"use strict";Object.defineProperty(_f,"__esModule",{value:!0});var Qs=St(),fM=Ee(),pM=W(),hM=wn(),mM=new RegExp(`(?:(?:,|\\(|\uFF08)\\s*)?(?:\u0432\\s*?)?(?:(\u044D\u0442\u0443|\u044D\u0442\u043E\u0442|\u043F\u0440\u043E\u0448\u043B\u044B\u0439|\u043F\u0440\u043E\u0448\u043B\u0443\u044E|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0438\u0439|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0443\u044E|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0433\u043E)\\s*)?(${fM.matchAnyPattern(Qs.WEEKDAY_DICTIONARY)})(?:\\s*(?:,|\\)|\uFF09))?(?:\\s*\u043D\u0430\\s*(\u044D\u0442\u043E\u0439|\u043F\u0440\u043E\u0448\u043B\u043E\u0439|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0439)\\s*\u043D\u0435\u0434\u0435\u043B\u0435)?${Qs.REGEX_PARTS.rightBoundary}`,Qs.REGEX_PARTS.flags),gM=1,yM=2,TM=3,bf=class extends pM.AbstractParserWithWordBoundaryChecking{innerPattern(){return mM}patternLeftBoundary(){return Qs.REGEX_PARTS.leftBoundary}innerExtract(e,t){let n=t[yM].toLowerCase(),i=Qs.WEEKDAY_DICTIONARY[n],s=t[gM],a=t[TM],o=s||a;o=o||"",o=o.toLowerCase();let u=null;o=="\u043F\u0440\u043E\u0448\u043B\u044B\u0439"||o=="\u043F\u0440\u043E\u0448\u043B\u0443\u044E"||o=="\u043F\u0440\u043E\u0448\u043B\u043E\u0439"?u="last":o=="\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0438\u0439"||o=="\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0443\u044E"||o=="\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0439"||o=="\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0433\u043E"?u="next":(o=="\u044D\u0442\u043E\u0442"||o=="\u044D\u0442\u0443"||o=="\u044D\u0442\u043E\u0439")&&(u="this");let l=hM.toDayJSWeekday(e.refDate,i,u);return e.createParsingComponents().assign("weekday",i).imply("day",l.date()).imply("month",l.month()+1).imply("year",l.year())}};_f.default=bf});var pT=b(Zs=>{"use strict";var bM=Zs&&Zs.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Zs,"__esModule",{value:!0});var Xs=St(),fT=Pe(),_M=bM(Te()),vM=W(),EM=Ee(),wM=new RegExp(`(\u0432 \u043F\u0440\u043E\u0448\u043B\u043E\u043C|\u043D\u0430 \u043F\u0440\u043E\u0448\u043B\u043E\u0439|\u043D\u0430 \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0439|\u0432 \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u043C|\u043D\u0430 \u044D\u0442\u043E\u0439|\u0432 \u044D\u0442\u043E\u043C)\\s*(${EM.matchAnyPattern(Xs.TIME_UNIT_DICTIONARY)})(?=\\s*)${Xs.REGEX_PARTS.rightBoundary}`,Xs.REGEX_PARTS.flags),kM=1,OM=2,vf=class extends vM.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return Xs.REGEX_PARTS.leftBoundary}innerPattern(){return wM}innerExtract(e,t){let n=t[kM].toLowerCase(),i=t[OM].toLowerCase(),s=Xs.TIME_UNIT_DICTIONARY[i];if(n=="\u043D\u0430 \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0439"||n=="\u0432 \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u043C"){let u={};return u[s]=1,fT.ParsingComponents.createRelativeFromReference(e.reference,u)}if(n=="\u0432 \u043F\u0440\u043E\u0448\u043B\u043E\u043C"||n=="\u043D\u0430 \u043F\u0440\u043E\u0448\u043B\u043E\u0439"){let u={};return u[s]=-1,fT.ParsingComponents.createRelativeFromReference(e.reference,u)}let a=e.createParsingComponents(),o=_M.default(e.reference.instant);return s.match(/week/i)?(o=o.add(-o.get("d"),"d"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.imply("year",o.year())):s.match(/month/i)?(o=o.add(-o.date()+1,"d"),a.imply("day",o.date()),a.assign("year",o.year()),a.assign("month",o.month()+1)):s.match(/year/i)&&(o=o.add(-o.date()+1,"d"),o=o.add(-o.month(),"month"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.assign("year",o.year())),a}};Zs.default=vf});var hT=b(wf=>{"use strict";Object.defineProperty(wf,"__esModule",{value:!0});var Js=St(),SM=Pe(),DM=W(),RM=Yt(),MM=new RegExp(`(\u044D\u0442\u0438|\u043F\u043E\u0441\u043B\u0435\u0434\u043D\u0438\u0435|\u043F\u0440\u043E\u0448\u043B\u044B\u0435|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0438\u0435|\u043F\u043E\u0441\u043B\u0435|\u0447\u0435\u0440\u0435\u0437|\\+|-)\\s*(${Js.TIME_UNITS_PATTERN})${Js.REGEX_PARTS.rightBoundary}`,Js.REGEX_PARTS.flags),Ef=class extends DM.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return Js.REGEX_PARTS.leftBoundary}innerPattern(){return MM}innerExtract(e,t){let n=t[1].toLowerCase(),i=Js.parseTimeUnits(t[2]);switch(n){case"\u043F\u043E\u0441\u043B\u0435\u0434\u043D\u0438\u0435":case"\u043F\u0440\u043E\u0448\u043B\u044B\u0435":case"-":i=RM.reverseTimeUnits(i);break}return SM.ParsingComponents.createRelativeFromReference(e.reference,i)}};wf.default=Ef});var yT=b(Xe=>{"use strict";var At=Xe&&Xe.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Xe,"__esModule",{value:!0});Xe.createConfiguration=Xe.createCasualConfiguration=Xe.parseDate=Xe.parse=Xe.strict=Xe.casual=void 0;var xM=At(Vy()),AM=At(eT()),CM=At(nT()),PM=At(sT()),NM=At(aT()),IM=At(oT()),FM=At(uT()),LM=Mr(),UM=At(lT()),WM=At(cT()),qM=At(dT()),$M=At(pT()),mT=tr(),YM=At(kn()),GM=At(hT());Xe.casual=new mT.Chrono(gT());Xe.strict=new mT.Chrono(kf(!0));function jM(r,e,t){return Xe.casual.parse(r,e,t)}Xe.parse=jM;function BM(r,e,t){return Xe.casual.parseDate(r,e,t)}Xe.parseDate=BM;function gT(){let r=kf(!1);return r.parsers.unshift(new UM.default),r.parsers.unshift(new WM.default),r.parsers.unshift(new CM.default),r.parsers.unshift(new $M.default),r.parsers.unshift(new GM.default),r}Xe.createCasualConfiguration=gT;function kf(r=!0){return LM.includeCommonConfiguration({parsers:[new YM.default(!0),new xM.default,new AM.default,new qM.default,new PM.default(r),new NM.default],refiners:[new FM.default,new IM.default]},r)}Xe.createConfiguration=kf});var Ge=b(ie=>{"use strict";var HM=ie&&ie.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),zM=ie&&ie.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),sn=ie&&ie.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&HM(e,r,t);return zM(e,r),e};Object.defineProperty(ie,"__esModule",{value:!0});ie.parseDate=ie.parse=ie.casual=ie.strict=ie.ru=ie.zh=ie.nl=ie.pt=ie.ja=ie.fr=ie.de=ie.Meridiem=ie.Chrono=ie.en=void 0;var Of=sn($l());ie.en=Of;var KM=tr();Object.defineProperty(ie,"Chrono",{enumerable:!0,get:function(){return KM.Chrono}});var VM;(function(r){r[r.AM=0]="AM",r[r.PM=1]="PM"})(VM=ie.Meridiem||(ie.Meridiem={}));var QM=sn(Sm());ie.de=QM;var XM=sn(tg());ie.fr=XM;var ZM=sn(cg());ie.ja=ZM;var JM=sn(Sg());ie.pt=JM;var ex=sn(cy());ie.nl=ex;var tx=sn(jy());ie.zh=tx;var rx=sn(yT());ie.ru=rx;ie.strict=Of.strict;ie.casual=Of.casual;function nx(r,e,t){return ie.casual.parse(r,e,t)}ie.parse=nx;function ix(r,e,t){return ie.casual.parseDate(r,e,t)}ie.parseDate=ix});var Pb=b(rp=>{"use strict";Object.defineProperty(rp,"__esModule",{value:!0});var Ab=Symbol("MustacheDataPath");function xb({target:r,propertyName:e}){return[...r[Ab]||[],e]}function Cb(r,e){return typeof r!="object"?r:new Proxy(r,{get(t,n){let i=t[n];if(i===void 0&&!(n in t)){let s=xb({target:t,propertyName:n});if(e!=null&&e.handleError)return e.handleError(s),i;throw Error(`Missing Mustache data property: ${s.join(" > ")}`)}return i&&typeof i=="object"?(i[Ab]=xb({target:t,propertyName:n}),Cb(i,e)):i}})}rp.default=Cb});var kr=b(cr=>{"use strict";cr.__esModule=!0;cr.Tokens=cr.StructuralCharacters=cr.Operators=void 0;var IA;(function(r){r.AND="AND",r.OR="OR",r.XOR="XOR",r.NOT="NOT"})(IA=cr.Operators||(cr.Operators={}));var FA;(function(r){r.OPEN_PARENTHESIS="(",r.CLOSE_PARENTHESIS=")"})(FA=cr.StructuralCharacters||(cr.StructuralCharacters={}));var LA;(function(r){r.IDENTIFIER="IDENTIFIER",r.OPERATOR="OPERATOR",r.STRUCTURAL_CHARACTER="STRUCTURAL_CHARACTER",r.EOF="EOF",r.COMMENT="COMMENT"})(LA=cr.Tokens||(cr.Tokens={}))});var op=b(Li=>{"use strict";Li.__esModule=!0;Li.VALID_TOKENS=Li.OPERATOR_PRECEDENCE=void 0;var Ne=kr();Li.OPERATOR_PRECEDENCE={NOT:0,XOR:1,AND:2,OR:3};Li.VALID_TOKENS={identifierOnly:[{name:Ne.Tokens.IDENTIFIER},{name:Ne.Tokens.STRUCTURAL_CHARACTER,value:Ne.StructuralCharacters.OPEN_PARENTHESIS}],identifierOrNot:[{name:Ne.Tokens.IDENTIFIER},{name:Ne.Tokens.STRUCTURAL_CHARACTER,value:Ne.StructuralCharacters.OPEN_PARENTHESIS},{name:Ne.Tokens.OPERATOR,value:Ne.Operators.NOT}],binaryOperator:[{name:Ne.Tokens.OPERATOR,value:Ne.Operators.AND},{name:Ne.Tokens.OPERATOR,value:Ne.Operators.OR},{name:Ne.Tokens.OPERATOR,value:Ne.Operators.XOR}],binaryOperatorOrClose:[{name:Ne.Tokens.OPERATOR,value:Ne.Operators.AND},{name:Ne.Tokens.OPERATOR,value:Ne.Operators.OR},{name:Ne.Tokens.OPERATOR,value:Ne.Operators.XOR},{name:Ne.Tokens.STRUCTURAL_CHARACTER,value:Ne.StructuralCharacters.CLOSE_PARENTHESIS}]}});var up=b(ht=>{"use strict";ht.__esModule=!0;ht.ESCAPE_CHARACTER=ht.EOL=ht.COMMENT_DELIMITER=ht.QUOTED_IDENTIFIER_DELIMITER=ht.SEPARATORS=ht.OPERATORS=ht.STRUCTURAL_CHARACTERS=void 0;var Ui=kr();ht.STRUCTURAL_CHARACTERS={"(":Ui.StructuralCharacters.OPEN_PARENTHESIS,")":Ui.StructuralCharacters.CLOSE_PARENTHESIS};ht.OPERATORS={AND:Ui.Operators.AND,OR:Ui.Operators.OR,XOR:Ui.Operators.XOR,NOT:Ui.Operators.NOT};ht.SEPARATORS=new Set([32,9,10,13].map(function(r){return String.fromCodePoint(r)}));ht.QUOTED_IDENTIFIER_DELIMITER=String.fromCodePoint(34);ht.COMMENT_DELIMITER=String.fromCodePoint(35);ht.EOL=String.fromCodePoint(10);ht.ESCAPE_CHARACTER=String.fromCodePoint(92)});var Wb=b(Zt=>{"use strict";var lp=Zt&&Zt.__assign||function(){return lp=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},lp.apply(this,arguments)};Zt.__esModule=!0;Zt.getQuotedIdentifier=Zt.getComment=Zt.createResult=void 0;var Ub=kr(),Bn=up(),UA=function(r,e,t){return{token:lp({name:r},e!==null?{value:e}:{}),remainingString:t}};Zt.createResult=UA;var WA=function(r){for(var e=r.length,t=0;t<r.length;t+=1){var n=r[t];if(n===Bn.EOL){e=t;break}}return(0,Zt.createResult)(Ub.Tokens.COMMENT,r.slice(0,e),r.slice(e+1))};Zt.getComment=WA;var qA=function(r){for(var e=!1,t="",n=null,i=0;i<r.length;i+=1){var s=r[i];if(n===null)s===Bn.QUOTED_IDENTIFIER_DELIMITER?e?t=t.slice(-1)+Bn.QUOTED_IDENTIFIER_DELIMITER:n=i:(s===Bn.ESCAPE_CHARACTER?e=!0:e=!1,t=t+=s);else{if(!Bn.SEPARATORS.has(s)&&!Bn.STRUCTURAL_CHARACTERS[s])throw new Error("Unexpected character: ".concat(s," Expected ) character or separator"));break}}if(n===null)throw new Error("Unexpected end of expression: expected ".concat(Bn.QUOTED_IDENTIFIER_DELIMITER," character"));return(0,Zt.createResult)(Ub.Tokens.IDENTIFIER,t,r.slice(n+1))};Zt.getQuotedIdentifier=qA});var qb=b(lu=>{"use strict";lu.__esModule=!0;lu.lex=void 0;var Wi=kr(),Ft=up(),qi=Wb(),$A=function(r){for(var e=null,t=null,n=null,i=0;i<r.length;i+=1){var s=r[i];if(e===null){if(!Ft.SEPARATORS.has(s)){var a=Ft.STRUCTURAL_CHARACTERS[s];if(a){var o=r[i+1];if(a===Wi.StructuralCharacters.CLOSE_PARENTHESIS&&o&&!Ft.SEPARATORS.has(o)&&o!==Wi.StructuralCharacters.CLOSE_PARENTHESIS)throw new Error("Unexpected character: ".concat(o,". A closing parenthesis should be followed by another closing parenthesis or whitespace"));return(0,qi.createResult)(Wi.Tokens.STRUCTURAL_CHARACTER,Ft.STRUCTURAL_CHARACTERS[s],r.slice(i+1))}if(s===Ft.QUOTED_IDENTIFIER_DELIMITER)return(0,qi.getQuotedIdentifier)(r.slice(i+1));if(s===Ft.COMMENT_DELIMITER)return(0,qi.getComment)(r.slice(i+1));e=i}}else if(Ft.SEPARATORS.has(s)||Ft.STRUCTURAL_CHARACTERS[s]){t=i,n=s;break}else if(s===Ft.QUOTED_IDENTIFIER_DELIMITER||s===Ft.COMMENT_DELIMITER)throw new Error("Unexpected character: ".concat(s))}if(e!==null){t=t!=null?t:r.length;var u=r.slice(e,t),l=r.slice(t);if(Ft.OPERATORS[u]){if(n&&!Ft.SEPARATORS.has(n))throw new Error("Unexpected character: ".concat(n,". Operators should be separated using whitespace"));return(0,qi.createResult)(Wi.Tokens.OPERATOR,Ft.OPERATORS[u],l)}else return(0,qi.createResult)(Wi.Tokens.IDENTIFIER,u,l)}return(0,qi.createResult)(Wi.Tokens.EOF,null,"")};lu.lex=$A});var Yb=b(Lt=>{"use strict";var $b=Lt&&Lt.__spreadArray||function(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return r.concat(s||Array.prototype.slice.call(e))};Lt.__esModule=!0;Lt.validateToken=Lt.previousOperatorTakesPrecedent=Lt.getValue=Lt.newTokenGenerator=void 0;var YA=qb(),$i=kr(),cu=op(),GA=function(r){var e=r;return function(t,n){for(n===void 0&&(n=!1);;){var i=(0,YA.lex)(e),s=i.token,a=i.remainingString;if(e=a,s.name!==$i.Tokens.COMMENT)return(0,Lt.validateToken)(s,t,n),s}}};Lt.newTokenGenerator=GA;var jA=function(r,e){var t=r(cu.VALID_TOKENS.identifierOrNot),n=t.value===$i.Operators.NOT;n&&(t=r(cu.VALID_TOKENS.identifierOnly));var i=t.name===$i.Tokens.STRUCTURAL_CHARACTER?e(r,!0):[t];return n?$b($b([],i,!0),[{name:$i.Tokens.OPERATOR,value:$i.Operators.NOT}],!1):i};Lt.getValue=jA;var BA=function(r,e){return cu.OPERATOR_PRECEDENCE[r]<=cu.OPERATOR_PRECEDENCE[e]};Lt.previousOperatorTakesPrecedent=BA;var HA=function(r,e,t){if(t===void 0&&(t=!1),r.name===$i.Tokens.EOF){if(t)return;throw new Error("Unexpected end of expression")}for(var n=0,i=e;n<i.length;n++){var s=i[n];if(s.name===r.name&&(!s.value||s.value===r.value))return}throw new TypeError("Invalid token")};Lt.validateToken=HA});var dp=b(Yi=>{"use strict";var Or=Yi&&Yi.__spreadArray||function(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return r.concat(s||Array.prototype.slice.call(e))};Yi.__esModule=!0;Yi.parse=void 0;var Gb=kr(),jb=op(),du=Yb(),zA=function(r){if(typeof r!="string")throw new Error("Expected string but received ".concat(typeof r));var e=(0,du.newTokenGenerator)(r);return cp(e)};Yi.parse=zA;var cp=function(r,e){e===void 0&&(e=!1);for(var t=Or([],(0,du.getValue)(r,cp),!0),n=[];;){var i=e?jb.VALID_TOKENS.binaryOperatorOrClose:jb.VALID_TOKENS.binaryOperator,s=r(i,!e);if(s.name===Gb.Tokens.EOF||s.name===Gb.Tokens.STRUCTURAL_CHARACTER)return Or(Or([],t,!0),Or([],n,!0).reverse(),!0);for(;n.length;){var a=n[n.length-1]||null;if(a&&(0,du.previousOperatorTakesPrecedent)(a.value,s.value))t=Or(Or([],t,!0),[a],!1),n=n.slice(0,-1);else break}n=Or(Or([],n,!0),[s],!1),t=Or(Or([],t,!0),(0,du.getValue)(r,cp),!0)}}});var fp=b(mt=>{"use strict";mt.__esModule=!0;mt.throwInvalidExpression=mt.isOperator=mt.isIdentifier=mt.notUtil=mt.xorUtil=mt.orUtil=mt.andUtil=void 0;var Bb=kr(),KA=function(r,e){return r&&e};mt.andUtil=KA;var VA=function(r,e){return r||e};mt.orUtil=VA;var QA=function(r,e){return r!==e};mt.xorUtil=QA;var XA=function(r){return!r};mt.notUtil=XA;var ZA=function(r){var e=r.name,t=r.value;return e===Bb.Tokens.IDENTIFIER&&typeof t=="string"};mt.isIdentifier=ZA;var JA=function(r){var e=r.name,t=r.value;return e===Bb.Tokens.OPERATOR&&typeof t=="string"};mt.isOperator=JA;var eC=function(r){throw new TypeError("Invalid postfix expression: ".concat(r))};mt.throwInvalidExpression=eC});var Hb=b(fu=>{"use strict";var _a;fu.__esModule=!0;fu.OPERATOR_MAP=void 0;var pp=kr(),hp=fp();fu.OPERATOR_MAP=(_a={},_a[pp.Operators.AND]=hp.andUtil,_a[pp.Operators.OR]=hp.orUtil,_a[pp.Operators.XOR]=hp.xorUtil,_a)});var Kb=b(Kr=>{"use strict";var Gi=Kr&&Kr.__spreadArray||function(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return r.concat(s||Array.prototype.slice.call(e))};Kr.__esModule=!0;Kr.evaluate=Kr.getEvaluator=void 0;var tC=dp(),zb=kr(),rC=Hb(),Hn=fp(),nC=function(r){var e=(0,tC.parse)(r);return function(t){return(0,Kr.evaluate)(e,t)}};Kr.getEvaluator=nC;var iC=function(r,e){if(!Array.isArray(r))throw new Error("".concat(r," should be an array. evaluate takes in a parsed expression. Use in combination with parse or use getEvaluator"));var t=r.reduce(function(n,i,s){if(!(i&&((0,Hn.isIdentifier)(i)||(0,Hn.isOperator)(i))))throw new Error("Invalid token: ".concat(i,". Found in parsed expression at index ").concat(s));if(i.name===zb.Tokens.IDENTIFIER)return Gi(Gi([],n,!0),[Boolean(e[i.value])],!1);var a=n[n.length-2],o=n[n.length-1];if(i.value===zb.Operators.NOT)return o===void 0&&(0,Hn.throwInvalidExpression)("missing identifier"),Gi(Gi([],n.slice(0,-1),!0),[(0,Hn.notUtil)(o)],!1);(o===void 0||a===void 0)&&(0,Hn.throwInvalidExpression)("missing identifier");var u=rC.OPERATOR_MAP[i.value];return u||(0,Hn.throwInvalidExpression)("unknown operator"),Gi(Gi([],n.slice(0,-2),!0),[u(a,o)],!1)},[]);return t.length!==1&&(0,Hn.throwInvalidExpression)("too many identifiers after evaluation"),t[0]};Kr.evaluate=iC});var Qb=b(Sr=>{"use strict";var mp=Sr&&Sr.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]});Sr.__esModule=!0;Sr.parse=Sr.evaluate=Sr.getEvaluator=void 0;var Vb=Kb();mp(Sr,Vb,"getEvaluator");mp(Sr,Vb,"evaluate");var sC=dp();mp(Sr,sC,"parse")});var n_=b((t_,r_)=>{(function(r){var e=Object.hasOwnProperty,t=Array.isArray?Array.isArray:function(f){return Object.prototype.toString.call(f)==="[object Array]"},n=10,i=typeof process=="object"&&typeof process.nextTick=="function",s=typeof Symbol=="function",a=typeof Reflect=="object",o=typeof setImmediate=="function",u=o?setImmediate:setTimeout,l=s?a&&typeof Reflect.ownKeys=="function"?Reflect.ownKeys:function(d){var f=Object.getOwnPropertyNames(d);return f.push.apply(f,Object.getOwnPropertySymbols(d)),f}:Object.keys;function c(){this._events={},this._conf&&p.call(this,this._conf)}function p(d){d&&(this._conf=d,d.delimiter&&(this.delimiter=d.delimiter),d.maxListeners!==r&&(this._maxListeners=d.maxListeners),d.wildcard&&(this.wildcard=d.wildcard),d.newListener&&(this._newListener=d.newListener),d.removeListener&&(this._removeListener=d.removeListener),d.verboseMemoryLeak&&(this.verboseMemoryLeak=d.verboseMemoryLeak),d.ignoreErrors&&(this.ignoreErrors=d.ignoreErrors),this.wildcard&&(this.listenerTree={}))}function h(d,f){var m="(node) warning: possible EventEmitter memory leak detected. "+d+" listeners added. Use emitter.setMaxListeners() to increase limit.";if(this.verboseMemoryLeak&&(m+=" Event name: "+f+"."),typeof process!="undefined"&&process.emitWarning){var g=new Error(m);g.name="MaxListenersExceededWarning",g.emitter=this,g.count=d,process.emitWarning(g)}else console.error(m),console.trace&&console.trace()}var _=function(d,f,m){var g=arguments.length;switch(g){case 0:return[];case 1:return[d];case 2:return[d,f];case 3:return[d,f,m];default:for(var T=new Array(g);g--;)T[g]=arguments[g];return T}};function y(d,f){for(var m={},g,T=d.length,v=f?f.length:0,k=0;k<T;k++)g=d[k],m[g]=k<v?f[k]:r;return m}function w(d,f,m){this._emitter=d,this._target=f,this._listeners={},this._listenersCount=0;var g,T;if((m.on||m.off)&&(g=m.on,T=m.off),f.addEventListener?(g=f.addEventListener,T=f.removeEventListener):f.addListener?(g=f.addListener,T=f.removeListener):f.on&&(g=f.on,T=f.off),!g&&!T)throw Error("target does not implement any known event API");if(typeof g!="function")throw TypeError("on method must be a function");if(typeof T!="function")throw TypeError("off method must be a function");this._on=g,this._off=T;var v=d._observers;v?v.push(this):d._observers=[this]}Object.assign(w.prototype,{subscribe:function(d,f,m){var g=this,T=this._target,v=this._emitter,k=this._listeners,D=function(){var O=_.apply(null,arguments),S={data:O,name:f,original:d};if(m){var I=m.call(T,S);I!==!1&&v.emit.apply(v,[S.name].concat(O));return}v.emit.apply(v,[f].concat(O))};if(k[d])throw Error("Event '"+d+"' is already listening");this._listenersCount++,v._newListener&&v._removeListener&&!g._onNewListener?(this._onNewListener=function(O){O===f&&k[d]===null&&(k[d]=D,g._on.call(T,d,D))},v.on("newListener",this._onNewListener),this._onRemoveListener=function(O){O===f&&!v.hasListeners(O)&&k[d]&&(k[d]=null,g._off.call(T,d,D))},k[d]=null,v.on("removeListener",this._onRemoveListener)):(k[d]=D,g._on.call(T,d,D))},unsubscribe:function(d){var f=this,m=this._listeners,g=this._emitter,T,v,k=this._off,D=this._target,O;if(d&&typeof d!="string")throw TypeError("event must be a string");function S(){f._onNewListener&&(g.off("newListener",f._onNewListener),g.off("removeListener",f._onRemoveListener),f._onNewListener=null,f._onRemoveListener=null);var I=he.call(g,f);g._observers.splice(I,1)}if(d){if(T=m[d],!T)return;k.call(D,d,T),delete m[d],--this._listenersCount||S()}else{for(v=l(m),O=v.length;O-- >0;)d=v[O],k.call(D,d,m[d]);this._listeners={},this._listenersCount=0,S()}}});function M(d,f,m,g){var T=Object.assign({},f);if(!d)return T;if(typeof d!="object")throw TypeError("options must be an object");var v=Object.keys(d),k=v.length,D,O,S;function I(se){throw Error('Invalid "'+D+'" option value'+(se?". Reason: "+se:""))}for(var me=0;me<k;me++){if(D=v[me],!g&&!e.call(f,D))throw Error('Unknown "'+D+'" option');O=d[D],O!==r&&(S=m[D],T[D]=S?S(O,I):O)}return T}function P(d,f){return(typeof d!="function"||!d.hasOwnProperty("prototype"))&&f("value must be a constructor"),d}function N(d){var f="value must be type of "+d.join("|"),m=d.length,g=d[0],T=d[1];return m===1?function(v,k){if(typeof v===g)return v;k(f)}:m===2?function(v,k){var D=typeof v;if(D===g||D===T)return v;k(f)}:function(v,k){for(var D=typeof v,O=m;O-- >0;)if(D===d[O])return v;k(f)}}var F=N(["function"]),X=N(["object","function"]);function V(d,f,m){var g,T,v=0,k,D=new d(function(O,S,I){m=M(m,{timeout:0,overload:!1},{timeout:function(Se,U){return Se*=1,(typeof Se!="number"||Se<0||!Number.isFinite(Se))&&U("timeout must be a positive number"),Se}}),g=!m.overload&&typeof d.prototype.cancel=="function"&&typeof I=="function";function me(){T&&(T=null),v&&(clearTimeout(v),v=0)}var se=function(Se){me(),O(Se)},re=function(Se){me(),S(Se)};g?f(se,re,I):(T=[function(Se){re(Se||Error("canceled"))}],f(se,re,function(Se){if(k)throw Error("Unable to subscribe on cancel event asynchronously");if(typeof Se!="function")throw TypeError("onCancel callback must be a function");T.push(Se)}),k=!0),m.timeout>0&&(v=setTimeout(function(){var Se=Error("timeout");Se.code="ETIMEDOUT",v=0,D.cancel(Se),S(Se)},m.timeout))});return g||(D.cancel=function(O){if(!!T){for(var S=T.length,I=1;I<S;I++)T[I](O);T[0](O),T=null}}),D}function he(d){var f=this._observers;if(!f)return-1;for(var m=f.length,g=0;g<m;g++)if(f[g]._target===d)return g;return-1}function G(d,f,m,g,T){if(!m)return null;if(g===0){var v=typeof f;if(v==="string"){var k,D,O=0,S=0,I=this.delimiter,me=I.length;if((D=f.indexOf(I))!==-1){k=new Array(5);do k[O++]=f.slice(S,D),S=D+me;while((D=f.indexOf(I,S))!==-1);k[O++]=f.slice(S),f=k,T=O}else f=[f],T=1}else v==="object"?T=f.length:(f=[f],T=1)}var se=null,re,Se,U,Me,Ae,tt=f[g],Dr=f[g+1],Ue,Fe;if(g===T)m._listeners&&(typeof m._listeners=="function"?(d&&d.push(m._listeners),se=[m]):(d&&d.push.apply(d,m._listeners),se=[m]));else if(tt==="*"){for(Ue=l(m),D=Ue.length;D-- >0;)re=Ue[D],re!=="_listeners"&&(Fe=G(d,f,m[re],g+1,T),Fe&&(se?se.push.apply(se,Fe):se=Fe));return se}else if(tt==="**"){for(Ae=g+1===T||g+2===T&&Dr==="*",Ae&&m._listeners&&(se=G(d,f,m,T,T)),Ue=l(m),D=Ue.length;D-- >0;)re=Ue[D],re!=="_listeners"&&(re==="*"||re==="**"?(m[re]._listeners&&!Ae&&(Fe=G(d,f,m[re],T,T),Fe&&(se?se.push.apply(se,Fe):se=Fe)),Fe=G(d,f,m[re],g,T)):re===Dr?Fe=G(d,f,m[re],g+2,T):Fe=G(d,f,m[re],g,T),Fe&&(se?se.push.apply(se,Fe):se=Fe));return se}else m[tt]&&(se=G(d,f,m[tt],g+1,T));if(Se=m["*"],Se&&G(d,f,Se,g+1,T),U=m["**"],U)if(g<T)for(U._listeners&&G(d,f,U,T,T),Ue=l(U),D=Ue.length;D-- >0;)re=Ue[D],re!=="_listeners"&&(re===Dr?G(d,f,U[re],g+2,T):re===tt?G(d,f,U[re],g+1,T):(Me={},Me[re]=U[re],G(d,f,{"**":Me},g+1,T)));else U._listeners?G(d,f,U,T,T):U["*"]&&U["*"]._listeners&&G(d,f,U["*"],T,T);return se}function j(d,f,m){var g=0,T=0,v,k=this.delimiter,D=k.length,O;if(typeof d=="string")if((v=d.indexOf(k))!==-1){O=new Array(5);do O[g++]=d.slice(T,v),T=v+D;while((v=d.indexOf(k,T))!==-1);O[g++]=d.slice(T)}else O=[d],g=1;else O=d,g=d.length;if(g>1){for(v=0;v+1<g;v++)if(O[v]==="**"&&O[v+1]==="**")return}var S=this.listenerTree,I;for(v=0;v<g;v++)if(I=O[v],S=S[I]||(S[I]={}),v===g-1)return S._listeners?(typeof S._listeners=="function"&&(S._listeners=[S._listeners]),m?S._listeners.unshift(f):S._listeners.push(f),!S._listeners.warned&&this._maxListeners>0&&S._listeners.length>this._maxListeners&&(S._listeners.warned=!0,h.call(this,S._listeners.length,I))):S._listeners=f,!0;return!0}function Ce(d,f,m,g){for(var T=l(d),v=T.length,k,D,O,S=d._listeners,I;v-- >0;)D=T[v],k=d[D],D==="_listeners"?O=m:O=m?m.concat(D):[D],I=g||typeof D=="symbol",S&&f.push(I?O:O.join(this.delimiter)),typeof k=="object"&&Ce.call(this,k,f,O,I);return f}function Ie(d){for(var f=l(d),m=f.length,g,T,v;m-- >0;)T=f[m],g=d[T],g&&(v=!0,T!=="_listeners"&&!Ie(g)&&delete d[T]);return v}function B(d,f,m){this.emitter=d,this.event=f,this.listener=m}B.prototype.off=function(){return this.emitter.off(this.event,this.listener),this};function A(d,f,m){if(m===!0)T=!0;else if(m===!1)g=!0;else{if(!m||typeof m!="object")throw TypeError("options should be an object or true");var g=m.async,T=m.promisify,v=m.nextTick,k=m.objectify}if(g||v||T){var D=f,O=f._origin||f;if(v&&!i)throw Error("process.nextTick is not supported");T===r&&(T=f.constructor.name==="AsyncFunction"),f=function(){var S=arguments,I=this,me=this.event;return T?v?Promise.resolve():new Promise(function(se){u(se)}).then(function(){return I.event=me,D.apply(I,S)}):(v?process.nextTick:u)(function(){I.event=me,D.apply(I,S)})},f._async=!0,f._origin=O}return[f,k?new B(this,d,f):this]}function E(d){this._events={},this._newListener=!1,this._removeListener=!1,this.verboseMemoryLeak=!1,p.call(this,d)}E.EventEmitter2=E,E.prototype.listenTo=function(d,f,m){if(typeof d!="object")throw TypeError("target musts be an object");var g=this;m=M(m,{on:r,off:r,reducers:r},{on:F,off:F,reducers:X});function T(v){if(typeof v!="object")throw TypeError("events must be an object");var k=m.reducers,D=he.call(g,d),O;D===-1?O=new w(g,d,m):O=g._observers[D];for(var S=l(v),I=S.length,me,se=typeof k=="function",re=0;re<I;re++)me=S[re],O.subscribe(me,v[me]||me,se?k:k&&k[me])}return t(f)?T(y(f)):T(typeof f=="string"?y(f.split(/\s+/)):f),this},E.prototype.stopListeningTo=function(d,f){var m=this._observers;if(!m)return!1;var g=m.length,T,v=!1;if(d&&typeof d!="object")throw TypeError("target should be an object");for(;g-- >0;)T=m[g],(!d||T._target===d)&&(T.unsubscribe(f),v=!0);return v},E.prototype.delimiter=".",E.prototype.setMaxListeners=function(d){d!==r&&(this._maxListeners=d,this._conf||(this._conf={}),this._conf.maxListeners=d)},E.prototype.getMaxListeners=function(){return this._maxListeners},E.prototype.event="",E.prototype.once=function(d,f,m){return this._once(d,f,!1,m)},E.prototype.prependOnceListener=function(d,f,m){return this._once(d,f,!0,m)},E.prototype._once=function(d,f,m,g){return this._many(d,1,f,m,g)},E.prototype.many=function(d,f,m,g){return this._many(d,f,m,!1,g)},E.prototype.prependMany=function(d,f,m,g){return this._many(d,f,m,!0,g)},E.prototype._many=function(d,f,m,g,T){var v=this;if(typeof m!="function")throw new Error("many only accepts instances of Function");function k(){return--f===0&&v.off(d,k),m.apply(this,arguments)}return k._origin=m,this._on(d,k,g,T)},E.prototype.emit=function(){if(!this._events&&!this._all)return!1;this._events||c.call(this);var d=arguments[0],f,m=this.wildcard,g,T,v,k,D;if(d==="newListener"&&!this._newListener&&!this._events.newListener)return!1;if(m&&(f=d,d!=="newListener"&&d!=="removeListener"&&typeof d=="object")){if(T=d.length,s){for(v=0;v<T;v++)if(typeof d[v]=="symbol"){D=!0;break}}D||(d=d.join(this.delimiter))}var O=arguments.length,S;if(this._all&&this._all.length)for(S=this._all.slice(),v=0,T=S.length;v<T;v++)switch(this.event=d,O){case 1:S[v].call(this,d);break;case 2:S[v].call(this,d,arguments[1]);break;case 3:S[v].call(this,d,arguments[1],arguments[2]);break;default:S[v].apply(this,arguments)}if(m)S=[],G.call(this,S,f,this.listenerTree,0,T);else if(S=this._events[d],typeof S=="function"){switch(this.event=d,O){case 1:S.call(this);break;case 2:S.call(this,arguments[1]);break;case 3:S.call(this,arguments[1],arguments[2]);break;default:for(g=new Array(O-1),k=1;k<O;k++)g[k-1]=arguments[k];S.apply(this,g)}return!0}else S&&(S=S.slice());if(S&&S.length){if(O>3)for(g=new Array(O-1),k=1;k<O;k++)g[k-1]=arguments[k];for(v=0,T=S.length;v<T;v++)switch(this.event=d,O){case 1:S[v].call(this);break;case 2:S[v].call(this,arguments[1]);break;case 3:S[v].call(this,arguments[1],arguments[2]);break;default:S[v].apply(this,g)}return!0}else if(!this.ignoreErrors&&!this._all&&d==="error")throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},E.prototype.emitAsync=function(){if(!this._events&&!this._all)return!1;this._events||c.call(this);var d=arguments[0],f=this.wildcard,m,g,T,v,k,D;if(d==="newListener"&&!this._newListener&&!this._events.newListener)return Promise.resolve([!1]);if(f&&(m=d,d!=="newListener"&&d!=="removeListener"&&typeof d=="object")){if(v=d.length,s){for(k=0;k<v;k++)if(typeof d[k]=="symbol"){g=!0;break}}g||(d=d.join(this.delimiter))}var O=[],S=arguments.length,I;if(this._all)for(k=0,v=this._all.length;k<v;k++)switch(this.event=d,S){case 1:O.push(this._all[k].call(this,d));break;case 2:O.push(this._all[k].call(this,d,arguments[1]));break;case 3:O.push(this._all[k].call(this,d,arguments[1],arguments[2]));break;default:O.push(this._all[k].apply(this,arguments))}if(f?(I=[],G.call(this,I,m,this.listenerTree,0)):I=this._events[d],typeof I=="function")switch(this.event=d,S){case 1:O.push(I.call(this));break;case 2:O.push(I.call(this,arguments[1]));break;case 3:O.push(I.call(this,arguments[1],arguments[2]));break;default:for(T=new Array(S-1),D=1;D<S;D++)T[D-1]=arguments[D];O.push(I.apply(this,T))}else if(I&&I.length){if(I=I.slice(),S>3)for(T=new Array(S-1),D=1;D<S;D++)T[D-1]=arguments[D];for(k=0,v=I.length;k<v;k++)switch(this.event=d,S){case 1:O.push(I[k].call(this));break;case 2:O.push(I[k].call(this,arguments[1]));break;case 3:O.push(I[k].call(this,arguments[1],arguments[2]));break;default:O.push(I[k].apply(this,T))}}else if(!this.ignoreErrors&&!this._all&&d==="error")return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(O)},E.prototype.on=function(d,f,m){return this._on(d,f,!1,m)},E.prototype.prependListener=function(d,f,m){return this._on(d,f,!0,m)},E.prototype.onAny=function(d){return this._onAny(d,!1)},E.prototype.prependAny=function(d){return this._onAny(d,!0)},E.prototype.addListener=E.prototype.on,E.prototype._onAny=function(d,f){if(typeof d!="function")throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),f?this._all.unshift(d):this._all.push(d),this},E.prototype._on=function(d,f,m,g){if(typeof d=="function")return this._onAny(d,f),this;if(typeof f!="function")throw new Error("on only accepts instances of Function");this._events||c.call(this);var T=this,v;return g!==r&&(v=A.call(this,d,f,g),f=v[0],T=v[1]),this._newListener&&this.emit("newListener",d,f),this.wildcard?(j.call(this,d,f,m),T):(this._events[d]?(typeof this._events[d]=="function"&&(this._events[d]=[this._events[d]]),m?this._events[d].unshift(f):this._events[d].push(f),!this._events[d].warned&&this._maxListeners>0&&this._events[d].length>this._maxListeners&&(this._events[d].warned=!0,h.call(this,this._events[d].length,d))):this._events[d]=f,T)},E.prototype.off=function(d,f){if(typeof f!="function")throw new Error("removeListener only takes instances of Function");var m,g=[];if(this.wildcard){var T=typeof d=="string"?d.split(this.delimiter):d.slice();if(g=G.call(this,null,T,this.listenerTree,0),!g)return this}else{if(!this._events[d])return this;m=this._events[d],g.push({_listeners:m})}for(var v=0;v<g.length;v++){var k=g[v];if(m=k._listeners,t(m)){for(var D=-1,O=0,S=m.length;O<S;O++)if(m[O]===f||m[O].listener&&m[O].listener===f||m[O]._origin&&m[O]._origin===f){D=O;break}if(D<0)continue;return this.wildcard?k._listeners.splice(D,1):this._events[d].splice(D,1),m.length===0&&(this.wildcard?delete k._listeners:delete this._events[d]),this._removeListener&&this.emit("removeListener",d,f),this}else(m===f||m.listener&&m.listener===f||m._origin&&m._origin===f)&&(this.wildcard?delete k._listeners:delete this._events[d],this._removeListener&&this.emit("removeListener",d,f))}return this.listenerTree&&Ie(this.listenerTree),this},E.prototype.offAny=function(d){var f=0,m=0,g;if(d&&this._all&&this._all.length>0){for(g=this._all,f=0,m=g.length;f<m;f++)if(d===g[f])return g.splice(f,1),this._removeListener&&this.emit("removeListenerAny",d),this}else{if(g=this._all,this._removeListener)for(f=0,m=g.length;f<m;f++)this.emit("removeListenerAny",g[f]);this._all=[]}return this},E.prototype.removeListener=E.prototype.off,E.prototype.removeAllListeners=function(d){if(d===r)return!this._events||c.call(this),this;if(this.wildcard){var f=G.call(this,null,d,this.listenerTree,0),m,g;if(!f)return this;for(g=0;g<f.length;g++)m=f[g],m._listeners=null;this.listenerTree&&Ie(this.listenerTree)}else this._events&&(this._events[d]=null);return this},E.prototype.listeners=function(d){var f=this._events,m,g,T,v,k;if(d===r){if(this.wildcard)throw Error("event name required for wildcard emitter");if(!f)return[];for(m=l(f),v=m.length,T=[];v-- >0;)g=f[m[v]],typeof g=="function"?T.push(g):T.push.apply(T,g);return T}else{if(this.wildcard){if(k=this.listenerTree,!k)return[];var D=[],O=typeof d=="string"?d.split(this.delimiter):d.slice();return G.call(this,D,O,k,0),D}return f?(g=f[d],g?typeof g=="function"?[g]:g:[]):[]}},E.prototype.eventNames=function(d){var f=this._events;return this.wildcard?Ce.call(this,this.listenerTree,[],null,d):f?l(f):[]},E.prototype.listenerCount=function(d){return this.listeners(d).length},E.prototype.hasListeners=function(d){if(this.wildcard){var f=[],m=typeof d=="string"?d.split(this.delimiter):d.slice();return G.call(this,f,m,this.listenerTree,0),f.length>0}var g=this._events,T=this._all;return!!(T&&T.length||g&&(d===r?l(g).length:g[d]))},E.prototype.listenersAny=function(){return this._all?this._all:[]},E.prototype.waitFor=function(d,f){var m=this,g=typeof f;return g==="number"?f={timeout:f}:g==="function"&&(f={filter:f}),f=M(f,{timeout:0,filter:r,handleError:!1,Promise,overload:!1},{filter:F,Promise:P}),V(f.Promise,function(T,v,k){function D(){var O=f.filter;if(!(O&&!O.apply(m,arguments)))if(m.off(d,D),f.handleError){var S=arguments[0];S?v(S):T(_.apply(null,arguments).slice(1))}else T(_.apply(null,arguments))}k(function(){m.off(d,D)}),m._on(d,D,!1)},{timeout:f.timeout,overload:f.overload})};function H(d,f,m){m=M(m,{Promise,timeout:0,overload:!1},{Promise:P});var g=m.Promise;return V(g,function(T,v,k){var D;if(typeof d.addEventListener=="function"){D=function(){T(_.apply(null,arguments))},k(function(){d.removeEventListener(f,D)}),d.addEventListener(f,D,{once:!0});return}var O=function(){S&&d.removeListener("error",S),T(_.apply(null,arguments))},S;f!=="error"&&(S=function(I){d.removeListener(f,O),v(I)},d.once("error",S)),k(function(){S&&d.removeListener("error",S),d.removeListener(f,O)}),d.once(f,O)},{timeout:m.timeout,overload:m.overload})}var C=E.prototype;if(Object.defineProperties(E,{defaultMaxListeners:{get:function(){return C._maxListeners},set:function(d){if(typeof d!="number"||d<0||Number.isNaN(d))throw TypeError("n must be a non-negative number");C._maxListeners=d},enumerable:!0},once:{value:H,writable:!0,configurable:!0}}),Object.defineProperties(C,{_maxListeners:{value:n,writable:!0,configurable:!0},_observers:{value:null,writable:!0,configurable:!0}}),typeof define=="function"&&define.amd)define(function(){return E});else if(typeof t_=="object")r_.exports=E;else{var Z=new Function("","return this")();Z.EventEmitter2=E}})()});var xC={};L_(xC,{default:()=>Au});module.exports=U_(xC);var M_=require("obsidian");var wi=require("obsidian");var CC=new Error("timeout while waiting for mutex to become available"),PC=new Error("mutex already locked"),W_=new Error("request for lock canceled"),q_=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(c){try{l(n.next(c))}catch(p){a(p)}}function u(c){try{l(n.throw(c))}catch(p){a(p)}}function l(c){c.done?s(c.value):i(c.value).then(o,u)}l((n=n.apply(r,e||[])).next())})},Iu=class{constructor(e,t=W_){this._value=e,this._cancelError=t,this._weightedQueues=[],this._weightedWaiters=[]}acquire(e=1){if(e<=0)throw new Error(`invalid weight ${e}: must be positive`);return new Promise((t,n)=>{this._weightedQueues[e-1]||(this._weightedQueues[e-1]=[]),this._weightedQueues[e-1].push({resolve:t,reject:n}),this._dispatch()})}runExclusive(e,t=1){return q_(this,void 0,void 0,function*(){let[n,i]=yield this.acquire(t);try{return yield e(n)}finally{i()}})}waitForUnlock(e=1){if(e<=0)throw new Error(`invalid weight ${e}: must be positive`);return new Promise(t=>{this._weightedWaiters[e-1]||(this._weightedWaiters[e-1]=[]),this._weightedWaiters[e-1].push(t),this._dispatch()})}isLocked(){return this._value<=0}getValue(){return this._value}setValue(e){this._value=e,this._dispatch()}release(e=1){if(e<=0)throw new Error(`invalid weight ${e}: must be positive`);this._value+=e,this._dispatch()}cancel(){this._weightedQueues.forEach(e=>e.forEach(t=>t.reject(this._cancelError))),this._weightedQueues=[]}_dispatch(){var e;for(let t=this._value;t>0;t--){let n=(e=this._weightedQueues[t-1])===null||e===void 0?void 0:e.shift();if(!n)continue;let i=this._value,s=t;this._value-=t,t=this._value+1,n.resolve([i,this._newReleaser(s)])}this._drainUnlockWaiters()}_newReleaser(e){let t=!1;return()=>{t||(t=!0,this.release(e))}}_drainUnlockWaiters(){for(let e=this._value;e>0;e--)!this._weightedWaiters[e-1]||(this._weightedWaiters[e-1].forEach(t=>t()),this._weightedWaiters[e-1]=[])}},$_=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(c){try{l(n.next(c))}catch(p){a(p)}}function u(c){try{l(n.throw(c))}catch(p){a(p)}}function l(c){c.done?s(c.value):i(c.value).then(o,u)}l((n=n.apply(r,e||[])).next())})},Ia=class{constructor(e){this._semaphore=new Iu(1,e)}acquire(){return $_(this,void 0,void 0,function*(){let[,e]=yield this._semaphore.acquire();return e})}runExclusive(e){return this._semaphore.runExclusive(()=>e())}isLocked(){return this._semaphore.isLocked()}waitForUnlock(){return this._semaphore.waitForUnlock()}release(){this._semaphore.isLocked()&&this._semaphore.release()}cancel(){return this._semaphore.cancel()}};var Ro=Ji(Ge());var _t=class{constructor(e,t){this.start=e,this.end=t,t.isBefore(e)&&(this.start=t,this.end=e),this.start=this.start.startOf("day"),this.end=this.end.startOf("day")}static buildRelative(e){let t=e==="week"?"isoWeek":e;return new _t(window.moment().startOf(t).startOf("day"),window.moment().endOf(t).startOf("day"))}static buildInvalid(){return new _t(window.moment.invalid(),window.moment.invalid())}isValid(){return this.start.isValid()&&this.end.isValid()}moveToPrevious(e){let t=window.moment.duration(1,e);this.start.subtract(t),this.end.subtract(t),(e==="month"||e==="quarter")&&(this.end=this.end.endOf(e).startOf("day"))}moveToNext(e){let t=window.moment.duration(1,e);this.start.add(t),this.end.add(t),(e==="month"||e==="quarter")&&(this.end=this.end.endOf(e).startOf("day"))}};var Ct=class{static parseDate(e,t=!1){return window.moment(Ro.parseDate(e,void 0,{forwardDate:t})).startOf("day")}static parseDateRange(e,t=!1){let n=[Ct.parseRelativeDateRange,Ct.parseNumberedDateRange,Ct.parseAbsoluteDateRange];for(let i of n){let s=i(e,t);if(s.isValid())return s}return _t.buildInvalid()}static parseAbsoluteDateRange(e,t){let n=Ro.parse(e,void 0,{forwardDate:t});if(n.length===0)return _t.buildInvalid();let i=n[0].start,s=n[1]&&n[1].start?n[1].start:i,a=window.moment(i.date()),o=window.moment(s.date());return new _t(a,o)}static parseRelativeDateRange(e,t){let n=/(last|this|next) (week|month|quarter|year)/,i=e.match(n);if(i&&i.length===3){let s=i[1],a=i[2],o=_t.buildRelative(a);switch(s){case"last":o.moveToPrevious(a);break;case"next":o.moveToNext(a);break}return o}return _t.buildInvalid()}static parseNumberedDateRange(e,t){let n=[[/^\s*[0-9]{4}\s*$/,"YYYY","year"],[/^\s*[0-9]{4}-Q[1-4]\s*$/,"YYYY-Q","quarter"],[/^\s*[0-9]{4}-[0-9]{2}\s*$/,"YYYY-MM","month"],[/^\s*[0-9]{4}-W[0-9]{2}\s*$/,"YYYY-WW","isoWeek"]];for(let[i,s,a]of n){let o=e.match(i);if(o){let u=o[0].trim();return new _t(window.moment(u,s).startOf(a),window.moment(u,s).endOf(a))}}return _t.buildInvalid()}};var sx={td:"today",tm:"tomorrow",yd:"yesterday",tw:"this week",nw:"next week",weekend:"sat",we:"sat"};function gi(r){for(let[e,t]of Object.entries(sx))r=r.replace(RegExp(`\\b${e}\\s`,"i"),t);return r}var Mo=["MO","TU","WE","TH","FR","SA","SU"],Ye=function(){function r(e,t){if(t===0)throw new Error("Can't create weekday with n == 0");this.weekday=e,this.n=t}return r.fromStr=function(e){return new r(Mo.indexOf(e))},r.prototype.nth=function(e){return this.n===e?this:new r(this.weekday,e)},r.prototype.equals=function(e){return this.weekday===e.weekday&&this.n===e.n},r.prototype.toString=function(){var e=Mo[this.weekday];return this.n&&(e=(this.n>0?"+":"")+String(this.n)+e),e},r.prototype.getJsWeekday=function(){return this.weekday===6?0:this.weekday+1},r}();var Re=function(r){return r!=null},Pt=function(r){return typeof r=="number"},Sf=function(r){return typeof r=="string"&&Mo.includes(r)},st=Array.isArray,Kt=function(r,e){e===void 0&&(e=r),arguments.length===1&&(e=r,r=0);for(var t=[],n=r;n<e;n++)t.push(n);return t};var ue=function(r,e){var t=0,n=[];if(st(r))for(;t<e;t++)n[t]=[].concat(r);else for(;t<e;t++)n[t]=r;return n},TT=function(r){return st(r)?r:[r]};function xn(r,e,t){t===void 0&&(t=" ");var n=String(r);return e=e>>0,n.length>e?String(n):(e=e-n.length,e>t.length&&(t+=ue(t,e/t.length)),t.slice(0,e)+String(n))}var bT=function(r,e,t){var n=r.split(e);return t?n.slice(0,t).concat([n.slice(t).join(e)]):n},ut=function(r,e){var t=r%e;return t*e<0?t+e:t},xo=function(r,e){return{div:Math.floor(r/e),mod:ut(r,e)}},Nt=function(r){return!Re(r)||r.length===0},Le=function(r){return!Nt(r)},ce=function(r,e){return Le(r)&&r.indexOf(e)!==-1};var Tr=function(r,e,t,n,i,s){return n===void 0&&(n=0),i===void 0&&(i=0),s===void 0&&(s=0),new Date(Date.UTC(r,e-1,t,n,i,s))},ax=[31,28,31,30,31,30,31,31,30,31,30,31],ET=1e3*60*60*24,Ao=9999,wT=Tr(1970,1,1),ox=[6,0,1,2,3,4,5];var yi=function(r){return r%4===0&&r%100!==0||r%400===0},Df=function(r){return r instanceof Date},An=function(r){return Df(r)&&!isNaN(r.getTime())},_T=function(r){return r.getTimezoneOffset()*60*1e3},ux=function(r,e){var t=r.getTime()-_T(r),n=e.getTime()-_T(e),i=t-n;return Math.round(i/ET)},ea=function(r){return ux(r,wT)},Co=function(r){return new Date(wT.getTime()+r*ET)},lx=function(r){var e=r.getUTCMonth();return e===1&&yi(r.getUTCFullYear())?29:ax[e]},Lr=function(r){return ox[r.getUTCDay()]},Rf=function(r,e){var t=Tr(r,e+1,1);return[Lr(t),lx(t)]},Po=function(r,e){return e=e||r,new Date(Date.UTC(r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()))},No=function(r){var e=new Date(r.getTime());return e},Mf=function(r){for(var e=[],t=0;t<r.length;t++)e.push(No(r[t]));return e},Ur=function(r){r.sort(function(e,t){return e.getTime()-t.getTime()})},Ti=function(r,e){e===void 0&&(e=!0);var t=new Date(r);return[xn(t.getUTCFullYear().toString(),4,"0"),xn(t.getUTCMonth()+1,2,"0"),xn(t.getUTCDate(),2,"0"),"T",xn(t.getUTCHours(),2,"0"),xn(t.getUTCMinutes(),2,"0"),xn(t.getUTCSeconds(),2,"0"),e?"Z":""].join("")},ta=function(r){var e=/^(\d{4})(\d{2})(\d{2})(T(\d{2})(\d{2})(\d{2})Z?)?$/,t=e.exec(r);if(!t)throw new Error("Invalid UNTIL value: ".concat(r));return new Date(Date.UTC(parseInt(t[1],10),parseInt(t[2],10)-1,parseInt(t[3],10),parseInt(t[5],10)||0,parseInt(t[6],10)||0,parseInt(t[7],10)||0))},vT=function(r,e){var t=r.toLocaleString("sv-SE",{timeZone:e});return t.replace(" ","T")+"Z"},kT=function(r,e){var t=Intl.DateTimeFormat().resolvedOptions().timeZone,n=new Date(vT(r,t)),i=new Date(vT(r,e!=null?e:"UTC")),s=i.getTime()-n.getTime();return new Date(r.getTime()-s)};var cx=function(){function r(e,t){this.minDate=null,this.maxDate=null,this._result=[],this.total=0,this.method=e,this.args=t,e==="between"?(this.maxDate=t.inc?t.before:new Date(t.before.getTime()-1),this.minDate=t.inc?t.after:new Date(t.after.getTime()+1)):e==="before"?this.maxDate=t.inc?t.dt:new Date(t.dt.getTime()-1):e==="after"&&(this.minDate=t.inc?t.dt:new Date(t.dt.getTime()+1))}return r.prototype.accept=function(e){++this.total;var t=this.minDate&&e<this.minDate,n=this.maxDate&&e>this.maxDate;if(this.method==="between"){if(t)return!0;if(n)return!1}else if(this.method==="before"){if(n)return!1}else if(this.method==="after")return t?!0:(this.add(e),!1);return this.add(e)},r.prototype.add=function(e){return this._result.push(e),!0},r.prototype.getValue=function(){var e=this._result;switch(this.method){case"all":case"between":return e;case"before":case"after":default:return e.length?e[e.length-1]:null}},r.prototype.clone=function(){return new r(this.method,this.args)},r}(),Wr=cx;var xf=function(r,e){return xf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},xf(r,e)};function bi(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");xf(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var at=function(){return at=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},at.apply(this,arguments)};function x(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return r.concat(s||Array.prototype.slice.call(e))}var dx=function(r){bi(e,r);function e(t,n,i){var s=r.call(this,t,n)||this;return s.iterator=i,s}return e.prototype.add=function(t){return this.iterator(t,this._result.length)?(this._result.push(t),!0):!1},e}(Wr),Af=dx;var fx={dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],tokens:{SKIP:/^[ \r\n\t]+|^\.$/,number:/^[1-9][0-9]*/,numberAsText:/^(one|two|three)/i,every:/^every/i,"day(s)":/^days?/i,"weekday(s)":/^weekdays?/i,"week(s)":/^weeks?/i,"hour(s)":/^hours?/i,"minute(s)":/^minutes?/i,"month(s)":/^months?/i,"year(s)":/^years?/i,on:/^(on|in)/i,at:/^(at)/i,the:/^the/i,first:/^first/i,second:/^second/i,third:/^third/i,nth:/^([1-9][0-9]*)(\.|th|nd|rd|st)/i,last:/^last/i,for:/^for/i,"time(s)":/^times?/i,until:/^(un)?til/i,monday:/^mo(n(day)?)?/i,tuesday:/^tu(e(s(day)?)?)?/i,wednesday:/^we(d(n(esday)?)?)?/i,thursday:/^th(u(r(sday)?)?)?/i,friday:/^fr(i(day)?)?/i,saturday:/^sa(t(urday)?)?/i,sunday:/^su(n(day)?)?/i,january:/^jan(uary)?/i,february:/^feb(ruary)?/i,march:/^mar(ch)?/i,april:/^apr(il)?/i,may:/^may/i,june:/^june?/i,july:/^july?/i,august:/^aug(ust)?/i,september:/^sep(t(ember)?)?/i,october:/^oct(ober)?/i,november:/^nov(ember)?/i,december:/^dec(ember)?/i,comma:/^(,\s*|(and|or)\s*)+/i}},Cn=fx;var OT=function(r,e){return r.indexOf(e)!==-1},px=function(r){return r.toString()},hx=function(r,e,t){return"".concat(e," ").concat(t,", ").concat(r)},mx=function(){function r(e,t,n,i){if(t===void 0&&(t=px),n===void 0&&(n=Cn),i===void 0&&(i=hx),this.text=[],this.language=n||Cn,this.gettext=t,this.dateFormatter=i,this.rrule=e,this.options=e.options,this.origOptions=e.origOptions,this.origOptions.bymonthday){var s=[].concat(this.options.bymonthday),a=[].concat(this.options.bynmonthday);s.sort(function(c,p){return c-p}),a.sort(function(c,p){return p-c}),this.bymonthday=s.concat(a),this.bymonthday.length||(this.bymonthday=null)}if(Re(this.origOptions.byweekday)){var o=st(this.origOptions.byweekday)?this.origOptions.byweekday:[this.origOptions.byweekday],u=String(o);this.byweekday={allWeeks:o.filter(function(c){return!c.n}),someWeeks:o.filter(function(c){return Boolean(c.n)}),isWeekdays:u.indexOf("MO")!==-1&&u.indexOf("TU")!==-1&&u.indexOf("WE")!==-1&&u.indexOf("TH")!==-1&&u.indexOf("FR")!==-1&&u.indexOf("SA")===-1&&u.indexOf("SU")===-1,isEveryDay:u.indexOf("MO")!==-1&&u.indexOf("TU")!==-1&&u.indexOf("WE")!==-1&&u.indexOf("TH")!==-1&&u.indexOf("FR")!==-1&&u.indexOf("SA")!==-1&&u.indexOf("SU")!==-1};var l=function(c,p){return c.weekday-p.weekday};this.byweekday.allWeeks.sort(l),this.byweekday.someWeeks.sort(l),this.byweekday.allWeeks.length||(this.byweekday.allWeeks=null),this.byweekday.someWeeks.length||(this.byweekday.someWeeks=null)}else this.byweekday=null}return r.isFullyConvertible=function(e){var t=!0;if(!(e.options.freq in r.IMPLEMENTED)||e.origOptions.until&&e.origOptions.count)return!1;for(var n in e.origOptions){if(OT(["dtstart","wkst","freq"],n))return!0;if(!OT(r.IMPLEMENTED[e.options.freq],n))return!1}return t},r.prototype.isFullyConvertible=function(){return r.isFullyConvertible(this.rrule)},r.prototype.toString=function(){var e=this.gettext;if(!(this.options.freq in r.IMPLEMENTED))return e("RRule error: Unable to fully convert this rrule to text");if(this.text=[e("every")],this[$.FREQUENCIES[this.options.freq]](),this.options.until){this.add(e("until"));var t=this.options.until;this.add(this.dateFormatter(t.getUTCFullYear(),this.language.monthNames[t.getUTCMonth()],t.getUTCDate()))}else this.options.count&&this.add(e("for")).add(this.options.count.toString()).add(this.plural(this.options.count)?e("times"):e("time"));return this.isFullyConvertible()||this.add(e("(~ approximate)")),this.text.join("")},r.prototype.HOURLY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("hours"):e("hour"))},r.prototype.MINUTELY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("minutes"):e("minute"))},r.prototype.DAILY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.byweekday&&this.byweekday.isWeekdays?this.add(this.plural(this.options.interval)?e("weekdays"):e("weekday")):this.add(this.plural(this.options.interval)?e("days"):e("day")),this.origOptions.bymonth&&(this.add(e("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday?this._byweekday():this.origOptions.byhour&&this._byhour()},r.prototype.WEEKLY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()).add(this.plural(this.options.interval)?e("weeks"):e("week")),this.byweekday&&this.byweekday.isWeekdays?this.options.interval===1?this.add(this.plural(this.options.interval)?e("weekdays"):e("weekday")):this.add(e("on")).add(e("weekdays")):this.byweekday&&this.byweekday.isEveryDay?this.add(this.plural(this.options.interval)?e("days"):e("day")):(this.options.interval===1&&this.add(e("week")),this.origOptions.bymonth&&(this.add(e("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday())},r.prototype.MONTHLY=function(){var e=this.gettext;this.origOptions.bymonth?(this.options.interval!==1&&(this.add(this.options.interval.toString()).add(e("months")),this.plural(this.options.interval)&&this.add(e("in"))),this._bymonth()):(this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("months"):e("month"))),this.bymonthday?this._bymonthday():this.byweekday&&this.byweekday.isWeekdays?this.add(e("on")).add(e("weekdays")):this.byweekday&&this._byweekday()},r.prototype.YEARLY=function(){var e=this.gettext;this.origOptions.bymonth?(this.options.interval!==1&&(this.add(this.options.interval.toString()),this.add(e("years"))),this._bymonth()):(this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("years"):e("year"))),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday(),this.options.byyearday&&this.add(e("on the")).add(this.list(this.options.byyearday,this.nth,e("and"))).add(e("day")),this.options.byweekno&&this.add(e("in")).add(this.plural(this.options.byweekno.length)?e("weeks"):e("week")).add(this.list(this.options.byweekno,void 0,e("and")))},r.prototype._bymonthday=function(){var e=this.gettext;this.byweekday&&this.byweekday.allWeeks?this.add(e("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext,e("or"))).add(e("the")).add(this.list(this.bymonthday,this.nth,e("or"))):this.add(e("on the")).add(this.list(this.bymonthday,this.nth,e("and")))},r.prototype._byweekday=function(){var e=this.gettext;this.byweekday.allWeeks&&!this.byweekday.isWeekdays&&this.add(e("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext)),this.byweekday.someWeeks&&(this.byweekday.allWeeks&&this.add(e("and")),this.add(e("on the")).add(this.list(this.byweekday.someWeeks,this.weekdaytext,e("and"))))},r.prototype._byhour=function(){var e=this.gettext;this.add(e("at")).add(this.list(this.origOptions.byhour,void 0,e("and")))},r.prototype._bymonth=function(){this.add(this.list(this.options.bymonth,this.monthtext,this.gettext("and")))},r.prototype.nth=function(e){e=parseInt(e.toString(),10);var t,n=this.gettext;if(e===-1)return n("last");var i=Math.abs(e);switch(i){case 1:case 21:case 31:t=i+n("st");break;case 2:case 22:t=i+n("nd");break;case 3:case 23:t=i+n("rd");break;default:t=i+n("th")}return e<0?t+" "+n("last"):t},r.prototype.monthtext=function(e){return this.language.monthNames[e-1]},r.prototype.weekdaytext=function(e){var t=Pt(e)?(e+1)%7:e.getJsWeekday();return(e.n?this.nth(e.n)+" ":"")+this.language.dayNames[t]},r.prototype.plural=function(e){return e%100!==1},r.prototype.add=function(e){return this.text.push(" "),this.text.push(e),this},r.prototype.list=function(e,t,n,i){var s=this;i===void 0&&(i=","),st(e)||(e=[e]);var a=function(u,l,c){for(var p="",h=0;h<u.length;h++)h!==0&&(h===u.length-1?p+=" "+c+" ":p+=l+" "),p+=u[h];return p};t=t||function(u){return u.toString()};var o=function(u){return t&&t.call(s,u)};return n?a(e.map(o),i,n):e.map(o).join(i+" ")},r}(),br=mx;var gx=function(){function r(e){this.done=!0,this.rules=e}return r.prototype.start=function(e){return this.text=e,this.done=!1,this.nextSymbol()},r.prototype.isDone=function(){return this.done&&this.symbol===null},r.prototype.nextSymbol=function(){var e,t;this.symbol=null,this.value=null;do{if(this.done)return!1;var n=void 0;e=null;for(var i in this.rules){n=this.rules[i];var s=n.exec(this.text);s&&(e===null||s[0].length>e[0].length)&&(e=s,t=i)}if(e!=null&&(this.text=this.text.substr(e[0].length),this.text===""&&(this.done=!0)),e==null){this.done=!0,this.symbol=null,this.value=null;return}}while(t==="SKIP");return this.symbol=t,this.value=e,!0},r.prototype.accept=function(e){if(this.symbol===e){if(this.value){var t=this.value;return this.nextSymbol(),t}return this.nextSymbol(),!0}return!1},r.prototype.acceptNumber=function(){return this.accept("number")},r.prototype.expect=function(e){if(this.accept(e))return!0;throw new Error("expected "+e+" but found "+this.symbol)},r}();function ra(r,e){e===void 0&&(e=Cn);var t={},n=new gx(e.tokens);if(!n.start(r))return null;return i(),t;function i(){n.expect("every");var h=n.acceptNumber();if(h&&(t.interval=parseInt(h[0],10)),n.isDone())throw new Error("Unexpected end");switch(n.symbol){case"day(s)":t.freq=$.DAILY,n.nextSymbol()&&(a(),p());break;case"weekday(s)":t.freq=$.WEEKLY,t.byweekday=[$.MO,$.TU,$.WE,$.TH,$.FR],n.nextSymbol(),p();break;case"week(s)":t.freq=$.WEEKLY,n.nextSymbol()&&(s(),p());break;case"hour(s)":t.freq=$.HOURLY,n.nextSymbol()&&(s(),p());break;case"minute(s)":t.freq=$.MINUTELY,n.nextSymbol()&&(s(),p());break;case"month(s)":t.freq=$.MONTHLY,n.nextSymbol()&&(s(),p());break;case"year(s)":t.freq=$.YEARLY,n.nextSymbol()&&(s(),p());break;case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":t.freq=$.WEEKLY;var _=n.symbol.substr(0,2).toUpperCase();if(t.byweekday=[$[_]],!n.nextSymbol())return;for(;n.accept("comma");){if(n.isDone())throw new Error("Unexpected end");var y=u();if(!y)throw new Error("Unexpected symbol "+n.symbol+", expected weekday");t.byweekday.push($[y]),n.nextSymbol()}c(),p();break;case"january":case"february":case"march":case"april":case"may":case"june":case"july":case"august":case"september":case"october":case"november":case"december":if(t.freq=$.YEARLY,t.bymonth=[o()],!n.nextSymbol())return;for(;n.accept("comma");){if(n.isDone())throw new Error("Unexpected end");var w=o();if(!w)throw new Error("Unexpected symbol "+n.symbol+", expected month");t.bymonth.push(w),n.nextSymbol()}s(),p();break;default:throw new Error("Unknown symbol")}}function s(){var h=n.accept("on"),_=n.accept("the");if(!!(h||_))do{var y=l(),w=u(),M=o();if(y)w?(n.nextSymbol(),t.byweekday||(t.byweekday=[]),t.byweekday.push($[w].nth(y))):(t.bymonthday||(t.bymonthday=[]),t.bymonthday.push(y),n.accept("day(s)"));else if(w)n.nextSymbol(),t.byweekday||(t.byweekday=[]),t.byweekday.push($[w]);else if(n.symbol==="weekday(s)")n.nextSymbol(),t.byweekday||(t.byweekday=[$.MO,$.TU,$.WE,$.TH,$.FR]);else if(n.symbol==="week(s)"){n.nextSymbol();var P=n.acceptNumber();if(!P)throw new Error("Unexpected symbol "+n.symbol+", expected week number");for(t.byweekno=[parseInt(P[0],10)];n.accept("comma");){if(P=n.acceptNumber(),!P)throw new Error("Unexpected symbol "+n.symbol+"; expected monthday");t.byweekno.push(parseInt(P[0],10))}}else if(M)n.nextSymbol(),t.bymonth||(t.bymonth=[]),t.bymonth.push(M);else return}while(n.accept("comma")||n.accept("the")||n.accept("on"))}function a(){var h=n.accept("at");if(!!h)do{var _=n.acceptNumber();if(!_)throw new Error("Unexpected symbol "+n.symbol+", expected hour");for(t.byhour=[parseInt(_[0],10)];n.accept("comma");){if(_=n.acceptNumber(),!_)throw new Error("Unexpected symbol "+n.symbol+"; expected hour");t.byhour.push(parseInt(_[0],10))}}while(n.accept("comma")||n.accept("at"))}function o(){switch(n.symbol){case"january":return 1;case"february":return 2;case"march":return 3;case"april":return 4;case"may":return 5;case"june":return 6;case"july":return 7;case"august":return 8;case"september":return 9;case"october":return 10;case"november":return 11;case"december":return 12;default:return!1}}function u(){switch(n.symbol){case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":return n.symbol.substr(0,2).toUpperCase();default:return!1}}function l(){switch(n.symbol){case"last":return n.nextSymbol(),-1;case"first":return n.nextSymbol(),1;case"second":return n.nextSymbol(),n.accept("last")?-2:2;case"third":return n.nextSymbol(),n.accept("last")?-3:3;case"nth":var h=parseInt(n.value[1],10);if(h<-366||h>366)throw new Error("Nth out of range: "+h);return n.nextSymbol(),n.accept("last")?-h:h;default:return!1}}function c(){n.accept("on"),n.accept("the");var h=l();if(!!h)for(t.bymonthday=[h],n.nextSymbol();n.accept("comma");){if(h=l(),!h)throw new Error("Unexpected symbol "+n.symbol+"; expected monthday");t.bymonthday.push(h),n.nextSymbol()}}function p(){if(n.symbol==="until"){var h=Date.parse(n.text);if(!h)throw new Error("Cannot parse until date:"+n.text);t.until=new Date(h)}else n.accept("for")&&(t.count=parseInt(n.value[0],10),n.expect("number"))}}var ae;(function(r){r[r.YEARLY=0]="YEARLY",r[r.MONTHLY=1]="MONTHLY",r[r.WEEKLY=2]="WEEKLY",r[r.DAILY=3]="DAILY",r[r.HOURLY=4]="HOURLY",r[r.MINUTELY=5]="MINUTELY",r[r.SECONDLY=6]="SECONDLY"})(ae||(ae={}));function na(r){return r<ae.HOURLY}var ST=function(r,e){return e===void 0&&(e=Cn),new $(ra(r,e)||void 0)},_i=["count","until","interval","byweekday","bymonthday","bymonth"];br.IMPLEMENTED=[];br.IMPLEMENTED[ae.HOURLY]=_i;br.IMPLEMENTED[ae.MINUTELY]=_i;br.IMPLEMENTED[ae.DAILY]=["byhour"].concat(_i);br.IMPLEMENTED[ae.WEEKLY]=_i;br.IMPLEMENTED[ae.MONTHLY]=_i;br.IMPLEMENTED[ae.YEARLY]=["byweekno","byyearday"].concat(_i);var DT=function(r,e,t,n){return new br(r,e,t,n).toString()},RT=br.isFullyConvertible;var vi=function(){function r(e,t,n,i){this.hour=e,this.minute=t,this.second=n,this.millisecond=i||0}return r.prototype.getHours=function(){return this.hour},r.prototype.getMinutes=function(){return this.minute},r.prototype.getSeconds=function(){return this.second},r.prototype.getMilliseconds=function(){return this.millisecond},r.prototype.getTime=function(){return(this.hour*60*60+this.minute*60+this.second)*1e3+this.millisecond},r}();var MT=function(r){bi(e,r);function e(t,n,i,s,a,o,u){var l=r.call(this,s,a,o,u)||this;return l.year=t,l.month=n,l.day=i,l}return e.fromDate=function(t){return new this(t.getUTCFullYear(),t.getUTCMonth()+1,t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.valueOf()%1e3)},e.prototype.getWeekday=function(){return Lr(new Date(this.getTime()))},e.prototype.getTime=function(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond)).getTime()},e.prototype.getDay=function(){return this.day},e.prototype.getMonth=function(){return this.month},e.prototype.getYear=function(){return this.year},e.prototype.addYears=function(t){this.year+=t},e.prototype.addMonths=function(t){if(this.month+=t,this.month>12){var n=Math.floor(this.month/12),i=ut(this.month,12);this.month=i,this.year+=n,this.month===0&&(this.month=12,--this.year)}},e.prototype.addWeekly=function(t,n){n>this.getWeekday()?this.day+=-(this.getWeekday()+1+(6-n))+t*7:this.day+=-(this.getWeekday()-n)+t*7,this.fixDay()},e.prototype.addDaily=function(t){this.day+=t,this.fixDay()},e.prototype.addHours=function(t,n,i){for(n&&(this.hour+=Math.floor((23-this.hour)/t)*t);;){this.hour+=t;var s=xo(this.hour,24),a=s.div,o=s.mod;if(a&&(this.hour=o,this.addDaily(a)),Nt(i)||ce(i,this.hour))break}},e.prototype.addMinutes=function(t,n,i,s){for(n&&(this.minute+=Math.floor((1439-(this.hour*60+this.minute))/t)*t);;){this.minute+=t;var a=xo(this.minute,60),o=a.div,u=a.mod;if(o&&(this.minute=u,this.addHours(o,!1,i)),(Nt(i)||ce(i,this.hour))&&(Nt(s)||ce(s,this.minute)))break}},e.prototype.addSeconds=function(t,n,i,s,a){for(n&&(this.second+=Math.floor((86399-(this.hour*3600+this.minute*60+this.second))/t)*t);;){this.second+=t;var o=xo(this.second,60),u=o.div,l=o.mod;if(u&&(this.second=l,this.addMinutes(u,!1,i,s)),(Nt(i)||ce(i,this.hour))&&(Nt(s)||ce(s,this.minute))&&(Nt(a)||ce(a,this.second)))break}},e.prototype.fixDay=function(){if(!(this.day<=28)){var t=Rf(this.year,this.month-1)[1];if(!(this.day<=t))for(;this.day>t;){if(this.day-=t,++this.month,this.month===13&&(this.month=1,++this.year,this.year>Ao))return;t=Rf(this.year,this.month-1)[1]}}},e.prototype.add=function(t,n){var i=t.freq,s=t.interval,a=t.wkst,o=t.byhour,u=t.byminute,l=t.bysecond;switch(i){case ae.YEARLY:return this.addYears(s);case ae.MONTHLY:return this.addMonths(s);case ae.WEEKLY:return this.addWeekly(s,a);case ae.DAILY:return this.addDaily(s);case ae.HOURLY:return this.addHours(s,n,o);case ae.MINUTELY:return this.addMinutes(s,n,o,u);case ae.SECONDLY:return this.addSeconds(s,n,o,u,l)}},e}(vi);function Cf(r){for(var e=[],t=Object.keys(r),n=0,i=t;n<i.length;n++){var s=i[n];ce(CT,s)||e.push(s),Df(r[s])&&!An(r[s])&&e.push(s)}if(e.length)throw new Error("Invalid options: "+e.join(", "));return at({},r)}function xT(r){var e=at(at({},ia),Cf(r));if(Re(e.byeaster)&&(e.freq=$.YEARLY),!(Re(e.freq)&&$.FREQUENCIES[e.freq]))throw new Error("Invalid frequency: ".concat(e.freq," ").concat(r.freq));if(e.dtstart||(e.dtstart=new Date(new Date().setMilliseconds(0))),Re(e.wkst)?Pt(e.wkst)||(e.wkst=e.wkst.weekday):e.wkst=$.MO.weekday,Re(e.bysetpos)){Pt(e.bysetpos)&&(e.bysetpos=[e.bysetpos]);for(var t=0;t<e.bysetpos.length;t++){var n=e.bysetpos[t];if(n===0||!(n>=-366&&n<=366))throw new Error("bysetpos must be between 1 and 366, or between -366 and -1")}}if(!(Boolean(e.byweekno)||Le(e.byweekno)||Le(e.byyearday)||Boolean(e.bymonthday)||Le(e.bymonthday)||Re(e.byweekday)||Re(e.byeaster)))switch(e.freq){case $.YEARLY:e.bymonth||(e.bymonth=e.dtstart.getUTCMonth()+1),e.bymonthday=e.dtstart.getUTCDate();break;case $.MONTHLY:e.bymonthday=e.dtstart.getUTCDate();break;case $.WEEKLY:e.byweekday=[Lr(e.dtstart)];break}if(Re(e.bymonth)&&!st(e.bymonth)&&(e.bymonth=[e.bymonth]),Re(e.byyearday)&&!st(e.byyearday)&&Pt(e.byyearday)&&(e.byyearday=[e.byyearday]),!Re(e.bymonthday))e.bymonthday=[],e.bynmonthday=[];else if(st(e.bymonthday)){for(var i=[],s=[],t=0;t<e.bymonthday.length;t++){var n=e.bymonthday[t];n>0?i.push(n):n<0&&s.push(n)}e.bymonthday=i,e.bynmonthday=s}else e.bymonthday<0?(e.bynmonthday=[e.bymonthday],e.bymonthday=[]):(e.bynmonthday=[],e.bymonthday=[e.bymonthday]);if(Re(e.byweekno)&&!st(e.byweekno)&&(e.byweekno=[e.byweekno]),!Re(e.byweekday))e.bynweekday=null;else if(Pt(e.byweekday))e.byweekday=[e.byweekday],e.bynweekday=null;else if(Sf(e.byweekday))e.byweekday=[Ye.fromStr(e.byweekday).weekday],e.bynweekday=null;else if(e.byweekday instanceof Ye)!e.byweekday.n||e.freq>$.MONTHLY?(e.byweekday=[e.byweekday.weekday],e.bynweekday=null):(e.bynweekday=[[e.byweekday.weekday,e.byweekday.n]],e.byweekday=null);else{for(var a=[],o=[],t=0;t<e.byweekday.length;t++){var u=e.byweekday[t];if(Pt(u)){a.push(u);continue}else if(Sf(u)){a.push(Ye.fromStr(u).weekday);continue}!u.n||e.freq>$.MONTHLY?a.push(u.weekday):o.push([u.weekday,u.n])}e.byweekday=Le(a)?a:null,e.bynweekday=Le(o)?o:null}return Re(e.byhour)?Pt(e.byhour)&&(e.byhour=[e.byhour]):e.byhour=e.freq<$.HOURLY?[e.dtstart.getUTCHours()]:null,Re(e.byminute)?Pt(e.byminute)&&(e.byminute=[e.byminute]):e.byminute=e.freq<$.MINUTELY?[e.dtstart.getUTCMinutes()]:null,Re(e.bysecond)?Pt(e.bysecond)&&(e.bysecond=[e.bysecond]):e.bysecond=e.freq<$.SECONDLY?[e.dtstart.getUTCSeconds()]:null,{parsedOptions:e}}function AT(r){var e=r.dtstart.getTime()%1e3;if(!na(r.freq))return[];var t=[];return r.byhour.forEach(function(n){r.byminute.forEach(function(i){r.bysecond.forEach(function(s){t.push(new vi(n,i,s,e))})})}),t}function aa(r){var e=r.split(`
`).map(yx).filter(function(t){return t!==null});return at(at({},e[0]),e[1])}function sa(r){var e={},t=/DTSTART(?:;TZID=([^:=]+?))?(?::|=)([^;\s]+)/i.exec(r);if(!t)return e;var n=t[1],i=t[2];return n&&(e.tzid=n),e.dtstart=ta(i),e}function yx(r){if(r=r.replace(/^\s+|\s+$/,""),!r.length)return null;var e=/^([A-Z]+?)[:;]/.exec(r.toUpperCase());if(!e)return PT(r);var t=e[1];switch(t.toUpperCase()){case"RRULE":case"EXRULE":return PT(r);case"DTSTART":return sa(r);default:throw new Error("Unsupported RFC prop ".concat(t," in ").concat(r))}}function PT(r){var e=r.replace(/^RRULE:/i,""),t=sa(e),n=r.replace(/^(?:RRULE|EXRULE):/i,"").split(";");return n.forEach(function(i){var s=i.split("="),a=s[0],o=s[1];switch(a.toUpperCase()){case"FREQ":t.freq=ae[o.toUpperCase()];break;case"WKST":t.wkst=Vt[o.toUpperCase()];break;case"COUNT":case"INTERVAL":case"BYSETPOS":case"BYMONTH":case"BYMONTHDAY":case"BYYEARDAY":case"BYWEEKNO":case"BYHOUR":case"BYMINUTE":case"BYSECOND":var u=Tx(o),l=a.toLowerCase();t[l]=u;break;case"BYWEEKDAY":case"BYDAY":t.byweekday=bx(o);break;case"DTSTART":case"TZID":var c=sa(r);t.tzid=c.tzid,t.dtstart=c.dtstart;break;case"UNTIL":t.until=ta(o);break;case"BYEASTER":t.byeaster=Number(o);break;default:throw new Error("Unknown RRULE property '"+a+"'")}}),t}function Tx(r){if(r.indexOf(",")!==-1){var e=r.split(",");return e.map(NT)}return NT(r)}function NT(r){return/^[+-]?\d+$/.test(r)?Number(r):r}function bx(r){var e=r.split(",");return e.map(function(t){if(t.length===2)return Vt[t];var n=t.match(/^([+-]?\d{1,2})([A-Z]{2})$/);if(!n||n.length<3)throw new SyntaxError("Invalid weekday string: ".concat(t));var i=Number(n[1]),s=n[2],a=Vt[s].weekday;return new Ye(a,i)})}var Pn=function(){function r(e,t){if(isNaN(e.getTime()))throw new RangeError("Invalid date passed to DateWithZone");this.date=e,this.tzid=t}return Object.defineProperty(r.prototype,"isUTC",{get:function(){return!this.tzid||this.tzid.toUpperCase()==="UTC"},enumerable:!1,configurable:!0}),r.prototype.toString=function(){var e=Ti(this.date.getTime(),this.isUTC);return this.isUTC?":".concat(e):";TZID=".concat(this.tzid,":").concat(e)},r.prototype.getTime=function(){return this.date.getTime()},r.prototype.rezonedDate=function(){return this.isUTC?this.date:kT(this.date,this.tzid)},r}();function oa(r){for(var e=[],t="",n=Object.keys(r),i=Object.keys(ia),s=0;s<n.length;s++)if(n[s]!=="tzid"&&!!ce(i,n[s])){var a=n[s].toUpperCase(),o=r[n[s]],u="";if(!(!Re(o)||st(o)&&!o.length)){switch(a){case"FREQ":u=$.FREQUENCIES[r.freq];break;case"WKST":Pt(o)?u=new Ye(o).toString():u=o.toString();break;case"BYWEEKDAY":a="BYDAY",u=TT(o).map(function(_){return _ instanceof Ye?_:st(_)?new Ye(_[0],_[1]):new Ye(_)}).toString();break;case"DTSTART":t=_x(o,r.tzid);break;case"UNTIL":u=Ti(o,!r.tzid);break;default:if(st(o)){for(var l=[],c=0;c<o.length;c++)l[c]=String(o[c]);u=l.toString()}else u=String(o)}u&&e.push([a,u])}}var p=e.map(function(_){var y=_[0],w=_[1];return"".concat(y,"=").concat(w.toString())}).join(";"),h="";return p!==""&&(h="RRULE:".concat(p)),[t,h].filter(function(_){return!!_}).join(`
`)}function _x(r,e){return r?"DTSTART"+new Pn(new Date(r),e).toString():""}function vx(r,e){return Array.isArray(r)?!Array.isArray(e)||r.length!==e.length?!1:r.every(function(t,n){return t.getTime()===e[n].getTime()}):r instanceof Date?e instanceof Date&&r.getTime()===e.getTime():r===e}var IT=function(){function r(){this.all=!1,this.before=[],this.after=[],this.between=[]}return r.prototype._cacheAdd=function(e,t,n){t&&(t=t instanceof Date?No(t):Mf(t)),e==="all"?this.all=t:(n._value=t,this[e].push(n))},r.prototype._cacheGet=function(e,t){var n=!1,i=t?Object.keys(t):[],s=function(c){for(var p=0;p<i.length;p++){var h=i[p];if(!vx(t[h],c[h]))return!0}return!1},a=this[e];if(e==="all")n=this.all;else if(st(a))for(var o=0;o<a.length;o++){var u=a[o];if(!(i.length&&s(u))){n=u._value;break}}if(!n&&this.all){for(var l=new Wr(e,t),o=0;o<this.all.length&&l.accept(this.all[o]);o++);n=l.getValue(),this._cacheAdd(e,n,t)}return st(n)?Mf(n):n instanceof Date?No(n):n},r}();var FT=x(x(x(x(x(x(x(x(x(x(x(x(x([],ue(1,31),!0),ue(2,28),!0),ue(3,31),!0),ue(4,30),!0),ue(5,31),!0),ue(6,30),!0),ue(7,31),!0),ue(8,31),!0),ue(9,30),!0),ue(10,31),!0),ue(11,30),!0),ue(12,31),!0),ue(1,7),!0),LT=x(x(x(x(x(x(x(x(x(x(x(x(x([],ue(1,31),!0),ue(2,29),!0),ue(3,31),!0),ue(4,30),!0),ue(5,31),!0),ue(6,30),!0),ue(7,31),!0),ue(8,31),!0),ue(9,30),!0),ue(10,31),!0),ue(11,30),!0),ue(12,31),!0),ue(1,7),!0),Ex=Kt(1,29),wx=Kt(1,30),an=Kt(1,31),lt=Kt(1,32),UT=x(x(x(x(x(x(x(x(x(x(x(x(x([],lt,!0),wx,!0),lt,!0),an,!0),lt,!0),an,!0),lt,!0),lt,!0),an,!0),lt,!0),an,!0),lt,!0),lt.slice(0,7),!0),WT=x(x(x(x(x(x(x(x(x(x(x(x(x([],lt,!0),Ex,!0),lt,!0),an,!0),lt,!0),an,!0),lt,!0),lt,!0),an,!0),lt,!0),an,!0),lt,!0),lt.slice(0,7),!0),kx=Kt(-28,0),Ox=Kt(-29,0),on=Kt(-30,0),ct=Kt(-31,0),qT=x(x(x(x(x(x(x(x(x(x(x(x(x([],ct,!0),Ox,!0),ct,!0),on,!0),ct,!0),on,!0),ct,!0),ct,!0),on,!0),ct,!0),on,!0),ct,!0),ct.slice(0,7),!0),$T=x(x(x(x(x(x(x(x(x(x(x(x(x([],ct,!0),kx,!0),ct,!0),on,!0),ct,!0),on,!0),ct,!0),ct,!0),on,!0),ct,!0),on,!0),ct,!0),ct.slice(0,7),!0),YT=[0,31,60,91,121,152,182,213,244,274,305,335,366],GT=[0,31,59,90,120,151,181,212,243,273,304,334,365],Pf=function(){for(var r=[],e=0;e<55;e++)r=r.concat(Kt(7));return r}();function jT(r,e){var t=Tr(r,1,1),n=yi(r)?366:365,i=yi(r+1)?366:365,s=ea(t),a=Lr(t),o=at(at({yearlen:n,nextyearlen:i,yearordinal:s,yearweekday:a},Sx(r)),{wnomask:null});if(Nt(e.byweekno))return o;o.wnomask=ue(0,n+7);var u,l,c=u=ut(7-a+e.wkst,7);c>=4?(c=0,l=o.yearlen+ut(a-e.wkst,7)):l=n-c;for(var p=Math.floor(l/7),h=ut(l,7),_=Math.floor(p+h/4),y=0;y<e.byweekno.length;y++){var w=e.byweekno[y];if(w<0&&(w+=_+1),w>0&&w<=_){var M=void 0;w>1?(M=c+(w-1)*7,c!==u&&(M-=7-u)):M=c;for(var P=0;P<7&&(o.wnomask[M]=1,M++,o.wdaymask[M]!==e.wkst);P++);}}if(ce(e.byweekno,1)){var M=c+_*7;if(c!==u&&(M-=7-u),M<n)for(var y=0;y<7&&(o.wnomask[M]=1,M+=1,o.wdaymask[M]!==e.wkst);y++);}if(c){var N=void 0;if(ce(e.byweekno,-1))N=-1;else{var F=Lr(Tr(r-1,1,1)),X=ut(7-F.valueOf()+e.wkst,7),V=yi(r-1)?366:365,he=void 0;X>=4?(X=0,he=V+ut(F-e.wkst,7)):he=n-c,N=Math.floor(52+ut(he,7)/4)}if(ce(e.byweekno,N))for(var M=0;M<c;M++)o.wnomask[M]=1}return o}function Sx(r){var e=yi(r)?366:365,t=Tr(r,1,1),n=Lr(t);return e===365?{mmask:FT,mdaymask:WT,nmdaymask:$T,wdaymask:Pf.slice(n),mrange:GT}:{mmask:LT,mdaymask:UT,nmdaymask:qT,wdaymask:Pf.slice(n),mrange:YT}}function BT(r,e,t,n,i,s){var a={lastyear:r,lastmonth:e,nwdaymask:[]},o=[];if(s.freq===$.YEARLY)if(Nt(s.bymonth))o=[[0,t]];else for(var u=0;u<s.bymonth.length;u++)e=s.bymonth[u],o.push(n.slice(e-1,e+1));else s.freq===$.MONTHLY&&(o=[n.slice(e-1,e+1)]);if(Nt(o))return a;a.nwdaymask=ue(0,t);for(var u=0;u<o.length;u++)for(var l=o[u],c=l[0],p=l[1]-1,h=0;h<s.bynweekday.length;h++){var _=void 0,y=s.bynweekday[h],w=y[0],M=y[1];M<0?(_=p+(M+1)*7,_-=ut(i[_]-w,7)):(_=c+(M-1)*7,_+=ut(7-i[_]+w,7)),c<=_&&_<=p&&(a.nwdaymask[_]=1)}return a}function HT(r,e){e===void 0&&(e=0);var t=r%19,n=Math.floor(r/100),i=r%100,s=Math.floor(n/4),a=n%4,o=Math.floor((n+8)/25),u=Math.floor((n-o+1)/3),l=Math.floor(19*t+n-s-u+15)%30,c=Math.floor(i/4),p=i%4,h=Math.floor(32+2*a+2*c-l-p)%7,_=Math.floor((t+11*l+22*h)/451),y=Math.floor((l+h-7*_+114)/31),w=(l+h-7*_+114)%31+1,M=Date.UTC(r,y-1,w+e),P=Date.UTC(r,0,1);return[Math.ceil((M-P)/(1e3*60*60*24))]}var Dx=function(){function r(e){this.options=e}return r.prototype.rebuild=function(e,t){var n=this.options;if(e!==this.lastyear&&(this.yearinfo=jT(e,n)),Le(n.bynweekday)&&(t!==this.lastmonth||e!==this.lastyear)){var i=this.yearinfo,s=i.yearlen,a=i.mrange,o=i.wdaymask;this.monthinfo=BT(e,t,s,a,o,n)}Re(n.byeaster)&&(this.eastermask=HT(e,n.byeaster))},Object.defineProperty(r.prototype,"lastyear",{get:function(){return this.monthinfo?this.monthinfo.lastyear:null},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"lastmonth",{get:function(){return this.monthinfo?this.monthinfo.lastmonth:null},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"yearlen",{get:function(){return this.yearinfo.yearlen},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"yearordinal",{get:function(){return this.yearinfo.yearordinal},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"mrange",{get:function(){return this.yearinfo.mrange},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"wdaymask",{get:function(){return this.yearinfo.wdaymask},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"mmask",{get:function(){return this.yearinfo.mmask},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"wnomask",{get:function(){return this.yearinfo.wnomask},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"nwdaymask",{get:function(){return this.monthinfo?this.monthinfo.nwdaymask:[]},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"nextyearlen",{get:function(){return this.yearinfo.nextyearlen},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"mdaymask",{get:function(){return this.yearinfo.mdaymask},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"nmdaymask",{get:function(){return this.yearinfo.nmdaymask},enumerable:!1,configurable:!0}),r.prototype.ydayset=function(){return[Kt(this.yearlen),0,this.yearlen]},r.prototype.mdayset=function(e,t){for(var n=this.mrange[t-1],i=this.mrange[t],s=ue(null,this.yearlen),a=n;a<i;a++)s[a]=a;return[s,n,i]},r.prototype.wdayset=function(e,t,n){for(var i=ue(null,this.yearlen+7),s=ea(Tr(e,t,n))-this.yearordinal,a=s,o=0;o<7&&(i[s]=s,++s,this.wdaymask[s]!==this.options.wkst);o++);return[i,a,s]},r.prototype.ddayset=function(e,t,n){var i=ue(null,this.yearlen),s=ea(Tr(e,t,n))-this.yearordinal;return i[s]=s,[i,s,s+1]},r.prototype.htimeset=function(e,t,n,i){var s=this,a=[];return this.options.byminute.forEach(function(o){a=a.concat(s.mtimeset(e,o,n,i))}),Ur(a),a},r.prototype.mtimeset=function(e,t,n,i){var s=this.options.bysecond.map(function(a){return new vi(e,t,a,i)});return Ur(s),s},r.prototype.stimeset=function(e,t,n,i){return[new vi(e,t,n,i)]},r.prototype.getdayset=function(e){switch(e){case ae.YEARLY:return this.ydayset.bind(this);case ae.MONTHLY:return this.mdayset.bind(this);case ae.WEEKLY:return this.wdayset.bind(this);case ae.DAILY:return this.ddayset.bind(this);default:return this.ddayset.bind(this)}},r.prototype.gettimeset=function(e){switch(e){case ae.HOURLY:return this.htimeset.bind(this);case ae.MINUTELY:return this.mtimeset.bind(this);case ae.SECONDLY:return this.stimeset.bind(this)}},r}(),zT=Dx;function KT(r,e,t,n,i,s){for(var a=[],o=0;o<r.length;o++){var u=void 0,l=void 0,c=r[o];c<0?(u=Math.floor(c/e.length),l=ut(c,e.length)):(u=Math.floor((c-1)/e.length),l=ut(c-1,e.length));for(var p=[],h=t;h<n;h++){var _=s[h];!Re(_)||p.push(_)}var y=void 0;u<0?y=p.slice(u)[0]:y=p[u];var w=e[l],M=Co(i.yearordinal+y),P=Po(M,w);ce(a,P)||a.push(P)}return Ur(a),a}function Io(r,e){var t=e.dtstart,n=e.freq,i=e.interval,s=e.until,a=e.bysetpos,o=e.count;if(o===0||i===0)return qr(r);var u=MT.fromDate(t),l=new zT(e);l.rebuild(u.year,u.month);for(var c=xx(l,u,e);;){var p=l.getdayset(n)(u.year,u.month,u.day),h=p[0],_=p[1],y=p[2],w=Mx(h,_,y,l,e);if(Le(a))for(var M=KT(a,c,_,y,l,h),P=0;P<M.length;P++){var N=M[P];if(s&&N>s)return qr(r);if(N>=t){var F=VT(N,e);if(!r.accept(F)||o&&(--o,!o))return qr(r)}}else for(var P=_;P<y;P++){var X=h[P];if(!!Re(X))for(var V=Co(l.yearordinal+X),he=0;he<c.length;he++){var G=c[he],N=Po(V,G);if(s&&N>s)return qr(r);if(N>=t){var F=VT(N,e);if(!r.accept(F)||o&&(--o,!o))return qr(r)}}}if(e.interval===0||(u.add(e,w),u.year>Ao))return qr(r);na(n)||(c=l.gettimeset(n)(u.hour,u.minute,u.second,0)),l.rebuild(u.year,u.month)}}function Rx(r,e,t){var n=t.bymonth,i=t.byweekno,s=t.byweekday,a=t.byeaster,o=t.bymonthday,u=t.bynmonthday,l=t.byyearday;return Le(n)&&!ce(n,r.mmask[e])||Le(i)&&!r.wnomask[e]||Le(s)&&!ce(s,r.wdaymask[e])||Le(r.nwdaymask)&&!r.nwdaymask[e]||a!==null&&!ce(r.eastermask,e)||(Le(o)||Le(u))&&!ce(o,r.mdaymask[e])&&!ce(u,r.nmdaymask[e])||Le(l)&&(e<r.yearlen&&!ce(l,e+1)&&!ce(l,-r.yearlen+e)||e>=r.yearlen&&!ce(l,e+1-r.yearlen)&&!ce(l,-r.nextyearlen+e-r.yearlen))}function VT(r,e){return new Pn(r,e.tzid).rezonedDate()}function qr(r){return r.getValue()}function Mx(r,e,t,n,i){for(var s=!1,a=e;a<t;a++){var o=r[a];s=Rx(n,o,i),s&&(r[o]=null)}return s}function xx(r,e,t){var n=t.freq,i=t.byhour,s=t.byminute,a=t.bysecond;return na(n)?AT(t):n>=$.HOURLY&&Le(i)&&!ce(i,e.hour)||n>=$.MINUTELY&&Le(s)&&!ce(s,e.minute)||n>=$.SECONDLY&&Le(a)&&!ce(a,e.second)?[]:r.gettimeset(n)(e.hour,e.minute,e.second,e.millisecond)}var Vt={MO:new Ye(0),TU:new Ye(1),WE:new Ye(2),TH:new Ye(3),FR:new Ye(4),SA:new Ye(5),SU:new Ye(6)},ia={freq:ae.YEARLY,dtstart:null,interval:1,wkst:Vt.MO,count:null,until:null,tzid:null,bysetpos:null,bymonth:null,bymonthday:null,bynmonthday:null,byyearday:null,byweekno:null,byweekday:null,bynweekday:null,byhour:null,byminute:null,bysecond:null,byeaster:null},CT=Object.keys(ia),$=function(){function r(e,t){e===void 0&&(e={}),t===void 0&&(t=!1),this._cache=t?null:new IT,this.origOptions=Cf(e);var n=xT(e).parsedOptions;this.options=n}return r.parseText=function(e,t){return ra(e,t)},r.fromText=function(e,t){return ST(e,t)},r.fromString=function(e){return new r(r.parseString(e)||void 0)},r.prototype._iter=function(e){return Io(e,this.options)},r.prototype._cacheGet=function(e,t){return this._cache?this._cache._cacheGet(e,t):!1},r.prototype._cacheAdd=function(e,t,n){if(!!this._cache)return this._cache._cacheAdd(e,t,n)},r.prototype.all=function(e){if(e)return this._iter(new Af("all",{},e));var t=this._cacheGet("all");return t===!1&&(t=this._iter(new Wr("all",{})),this._cacheAdd("all",t)),t},r.prototype.between=function(e,t,n,i){if(n===void 0&&(n=!1),!An(e)||!An(t))throw new Error("Invalid date passed in to RRule.between");var s={before:t,after:e,inc:n};if(i)return this._iter(new Af("between",s,i));var a=this._cacheGet("between",s);return a===!1&&(a=this._iter(new Wr("between",s)),this._cacheAdd("between",a,s)),a},r.prototype.before=function(e,t){if(t===void 0&&(t=!1),!An(e))throw new Error("Invalid date passed in to RRule.before");var n={dt:e,inc:t},i=this._cacheGet("before",n);return i===!1&&(i=this._iter(new Wr("before",n)),this._cacheAdd("before",i,n)),i},r.prototype.after=function(e,t){if(t===void 0&&(t=!1),!An(e))throw new Error("Invalid date passed in to RRule.after");var n={dt:e,inc:t},i=this._cacheGet("after",n);return i===!1&&(i=this._iter(new Wr("after",n)),this._cacheAdd("after",i,n)),i},r.prototype.count=function(){return this.all().length},r.prototype.toString=function(){return oa(this.origOptions)},r.prototype.toText=function(e,t,n){return DT(this,e,t,n)},r.prototype.isFullyConvertibleToText=function(){return RT(this)},r.prototype.clone=function(){return new r(this.origOptions)},r.FREQUENCIES=["YEARLY","MONTHLY","WEEKLY","DAILY","HOURLY","MINUTELY","SECONDLY"],r.YEARLY=ae.YEARLY,r.MONTHLY=ae.MONTHLY,r.WEEKLY=ae.WEEKLY,r.DAILY=ae.DAILY,r.HOURLY=ae.HOURLY,r.MINUTELY=ae.MINUTELY,r.SECONDLY=ae.SECONDLY,r.MO=Vt.MO,r.TU=Vt.TU,r.WE=Vt.WE,r.TH=Vt.TH,r.FR=Vt.FR,r.SA=Vt.SA,r.SU=Vt.SU,r.parseString=aa,r.optionsToString=oa,r}();function QT(r,e,t,n,i,s){var a={},o=r.accept;function u(h,_){t.forEach(function(y){y.between(h,_,!0).forEach(function(w){a[Number(w)]=!0})})}i.forEach(function(h){var _=new Pn(h,s).rezonedDate();a[Number(_)]=!0}),r.accept=function(h){var _=Number(h);return isNaN(_)?o.call(this,h):!a[_]&&(u(new Date(_-1),new Date(_+1)),!a[_])?(a[_]=!0,o.call(this,h)):!0},r.method==="between"&&(u(r.args.after,r.args.before),r.accept=function(h){var _=Number(h);return a[_]?!0:(a[_]=!0,o.call(this,h))});for(var l=0;l<n.length;l++){var c=new Pn(n[l],s).rezonedDate();if(!r.accept(new Date(c.getTime())))break}e.forEach(function(h){Io(r,h.options)});var p=r._result;switch(Ur(p),r.method){case"all":case"between":return p;case"before":return p.length&&p[p.length-1]||null;case"after":default:return p.length&&p[0]||null}}var XT={dtstart:null,cache:!1,unfold:!1,forceset:!1,compatible:!1,tzid:null};function Ax(r,e){var t=[],n=[],i=[],s=[],a=sa(r),o=a.dtstart,u=a.tzid,l=Fx(r,e.unfold);return l.forEach(function(c){var p;if(!!c){var h=Ix(c),_=h.name,y=h.parms,w=h.value;switch(_.toUpperCase()){case"RRULE":if(y.length)throw new Error("unsupported RRULE parm: ".concat(y.join(",")));t.push(aa(c));break;case"RDATE":var M=(p=/RDATE(?:;TZID=([^:=]+))?/i.exec(c))!==null&&p!==void 0?p:[],P=M[1];P&&!u&&(u=P),n=n.concat(ZT(w,y));break;case"EXRULE":if(y.length)throw new Error("unsupported EXRULE parm: ".concat(y.join(",")));i.push(aa(w));break;case"EXDATE":s=s.concat(ZT(w,y));break;case"DTSTART":break;default:throw new Error("unsupported property: "+_)}}}),{dtstart:o,tzid:u,rrulevals:t,rdatevals:n,exrulevals:i,exdatevals:s}}function Cx(r,e){var t=Ax(r,e),n=t.rrulevals,i=t.rdatevals,s=t.exrulevals,a=t.exdatevals,o=t.dtstart,u=t.tzid,l=e.cache===!1;if(e.compatible&&(e.forceset=!0,e.unfold=!0),e.forceset||n.length>1||i.length||s.length||a.length){var c=new If(l);return c.dtstart(o),c.tzid(u||void 0),n.forEach(function(h){c.rrule(new $(Nf(h,o,u),l))}),i.forEach(function(h){c.rdate(h)}),s.forEach(function(h){c.exrule(new $(Nf(h,o,u),l))}),a.forEach(function(h){c.exdate(h)}),e.compatible&&e.dtstart&&c.rdate(o),c}var p=n[0]||{};return new $(Nf(p,p.dtstart||e.dtstart||o,p.tzid||e.tzid||u),l)}function Fo(r,e){return e===void 0&&(e={}),Cx(r,Px(e))}function Nf(r,e,t){return at(at({},r),{dtstart:e,tzid:t})}function Px(r){var e=[],t=Object.keys(r),n=Object.keys(XT);if(t.forEach(function(i){ce(n,i)||e.push(i)}),e.length)throw new Error("Invalid options: "+e.join(", "));return at(at({},XT),r)}function Nx(r){if(r.indexOf(":")===-1)return{name:"RRULE",value:r};var e=bT(r,":",1),t=e[0],n=e[1];return{name:t,value:n}}function Ix(r){var e=Nx(r),t=e.name,n=e.value,i=t.split(";");if(!i)throw new Error("empty property name");return{name:i[0].toUpperCase(),parms:i.slice(1),value:n}}function Fx(r,e){if(e===void 0&&(e=!1),r=r&&r.trim(),!r)throw new Error("Invalid empty string");if(!e)return r.split(/\s/);for(var t=r.split(`
`),n=0;n<t.length;){var i=t[n]=t[n].replace(/\s+$/g,"");i?n>0&&i[0]===" "?(t[n-1]+=i.slice(1),t.splice(n,1)):n+=1:t.splice(n,1)}return t}function Lx(r){r.forEach(function(e){if(!/(VALUE=DATE(-TIME)?)|(TZID=)/.test(e))throw new Error("unsupported RDATE/EXDATE parm: "+e)})}function ZT(r,e){return Lx(e),r.split(",").map(function(t){return ta(t)})}function JT(r){var e=this;return function(t){if(t!==void 0&&(e["_".concat(r)]=t),e["_".concat(r)]!==void 0)return e["_".concat(r)];for(var n=0;n<e._rrule.length;n++){var i=e._rrule[n].origOptions[r];if(i)return i}}}var If=function(r){bi(e,r);function e(t){t===void 0&&(t=!1);var n=r.call(this,{},t)||this;return n.dtstart=JT.apply(n,["dtstart"]),n.tzid=JT.apply(n,["tzid"]),n._rrule=[],n._rdate=[],n._exrule=[],n._exdate=[],n}return e.prototype._iter=function(t){return QT(t,this._rrule,this._exrule,this._rdate,this._exdate,this.tzid())},e.prototype.rrule=function(t){eb(t,this._rrule)},e.prototype.exrule=function(t){eb(t,this._exrule)},e.prototype.rdate=function(t){tb(t,this._rdate)},e.prototype.exdate=function(t){tb(t,this._exdate)},e.prototype.rrules=function(){return this._rrule.map(function(t){return Fo(t.toString())})},e.prototype.exrules=function(){return this._exrule.map(function(t){return Fo(t.toString())})},e.prototype.rdates=function(){return this._rdate.map(function(t){return new Date(t.getTime())})},e.prototype.exdates=function(){return this._exdate.map(function(t){return new Date(t.getTime())})},e.prototype.valueOf=function(){var t=[];return!this._rrule.length&&this._dtstart&&(t=t.concat(oa({dtstart:this._dtstart}))),this._rrule.forEach(function(n){t=t.concat(n.toString().split(`
`))}),this._exrule.forEach(function(n){t=t.concat(n.toString().split(`
`).map(function(i){return i.replace(/^RRULE:/,"EXRULE:")}).filter(function(i){return!/^DTSTART/.test(i)}))}),this._rdate.length&&t.push(rb("RDATE",this._rdate,this.tzid())),this._exdate.length&&t.push(rb("EXDATE",this._exdate,this.tzid())),t},e.prototype.toString=function(){return this.valueOf().join(`
`)},e.prototype.clone=function(){var t=new e(!!this._cache);return this._rrule.forEach(function(n){return t.rrule(n.clone())}),this._exrule.forEach(function(n){return t.exrule(n.clone())}),this._rdate.forEach(function(n){return t.rdate(new Date(n.getTime()))}),this._exdate.forEach(function(n){return t.exdate(new Date(n.getTime()))}),t},e}($);function eb(r,e){if(!(r instanceof $))throw new TypeError(String(r)+" is not RRule instance");ce(e.map(String),String(r))||e.push(r)}function tb(r,e){if(!(r instanceof Date))throw new TypeError(String(r)+" is not Date instance");ce(e.map(Number),Number(r))||(e.push(r),Ur(e))}function rb(r,e,t){var n=!t||t.toUpperCase()==="UTC",i=n?"".concat(r,":"):"".concat(r,";TZID=").concat(t,":"),s=e.map(function(a){return Ti(a.valueOf(),n)}).join(",");return"".concat(i).concat(s)}function $r(r,e){return r!==null&&e===null?-1:r===null&&e!==null?1:r!==null&&e!==null?r.isValid()&&!e.isValid()?-1:!r.isValid()&&e.isValid()||r.isAfter(e)?1:r.isBefore(e)?-1:0:0}var Ze=class{constructor({rrule:e,baseOnToday:t,referenceDate:n,startDate:i,scheduledDate:s,dueDate:a}){this.rrule=e,this.baseOnToday=t,this.referenceDate=n,this.startDate=i,this.scheduledDate=s,this.dueDate=a}static fromText({recurrenceRuleText:e,startDate:t,scheduledDate:n,dueDate:i}){try{let s=e.match(/^([a-zA-Z0-9, !]+?)( when done)?$/i);if(s==null)return null;let a=s[1].trim(),o=s[2]!==void 0,u=$.parseText(a);if(u!==null){let l=null;i?l=window.moment(i):n?l=window.moment(n):t&&(l=window.moment(t)),!o&&l!==null?u.dtstart=window.moment(l).startOf("day").utc(!0).toDate():u.dtstart=window.moment().startOf("day").utc(!0).toDate();let c=new $(u);return new Ze({rrule:c,baseOnToday:o,referenceDate:l,startDate:t,scheduledDate:n,dueDate:i})}}catch(s){s instanceof Error&&console.log(s.message)}return null}toText(){let e=this.rrule.toText();return this.baseOnToday&&(e+=" when done"),e}next(){let e=this.nextReferenceDate();if(e!==null){let t=null,n=null,i=null;if(this.referenceDate){if(this.startDate){let s=window.moment.duration(this.startDate.diff(this.referenceDate));t=window.moment(e),t.add(Math.round(s.asDays()),"days")}if(this.scheduledDate){let s=window.moment.duration(this.scheduledDate.diff(this.referenceDate));n=window.moment(e),n.add(Math.round(s.asDays()),"days")}if(this.dueDate){let s=window.moment.duration(this.dueDate.diff(this.referenceDate));i=window.moment(e),i.add(Math.round(s.asDays()),"days")}}return{startDate:t,scheduledDate:n,dueDate:i}}return null}identicalTo(e){return this.baseOnToday!==e.baseOnToday||$r(this.startDate,e.startDate)!==0||$r(this.scheduledDate,e.scheduledDate)!==0||$r(this.dueDate,e.dueDate)!==0?!1:this.toText()===e.toText()}nextReferenceDate(){if(this.baseOnToday){let e=window.moment();return this.nextReferenceDateFromToday(e).toDate()}else return this.nextReferenceDateFromOriginalReferenceDate().toDate()}nextReferenceDateFromToday(e){let t=new $(Tt(pe({},this.rrule.origOptions),{dtstart:e.startOf("day").utc(!0).toDate()}));return this.nextAfter(e.endOf("day"),t)}nextReferenceDateFromOriginalReferenceDate(){var t;let e=window.moment((t=this.referenceDate)!=null?t:void 0).endOf("day");return this.nextAfter(e,this.rrule)}nextAfter(e,t){e.utc(!0);let n=window.moment(t.after(e.toDate())),i=this.toText(),s=i.match(/every( \d+)? month(s)?(.*)?/);s!==null&&(i.includes(" on ")||(n=Ze.nextAfterMonths(e,n,t,s[1])));let a=i.match(/every( \d+)? year(s)?(.*)?/);return a!==null&&(n=Ze.nextAfterYears(e,n,t,a[1])),Ze.addTimezone(n)}static nextAfterMonths(e,t,n,i){let s=1;for(i!==void 0&&(s=Number.parseInt(i.trim(),10));Ze.isSkippingTooManyMonths(e,t,s);)t=Ze.fromOneDayEarlier(e,n);return t}static isSkippingTooManyMonths(e,t,n){let i=t.month()-e.month();return i+=(t.year()-e.year())*12,i>n}static nextAfterYears(e,t,n,i){let s=1;for(i!==void 0&&(s=Number.parseInt(i.trim(),10));Ze.isSkippingTooManyYears(e,t,s);)t=Ze.fromOneDayEarlier(e,n);return t}static isSkippingTooManyYears(e,t,n){return t.year()-e.year()>n}static fromOneDayEarlier(e,t){e.subtract(1,"days").endOf("day");let n=t.origOptions;return n.dtstart=e.startOf("day").toDate(),t=new $(n),window.moment(t.after(e.toDate()))}static addTimezone(e){return window.moment.utc(e).local(!0).startOf("day")}};function Lo(r){return r.replace(/([.*+?^${}()|[\]/\\])/g,"\\$1")}var un=class{constructor(){this._globalFilter="";this._removeGlobalFilter=!1}static getInstance(){return un.instance||(un.instance=new un),un.instance}get(){return this._globalFilter}set(e){this._globalFilter=e}reset(){this.set(un.empty)}isEmpty(){return this.get()===un.empty}equals(e){return this.get()===e}includedIn(e){let t=this.get();return e.includes(t)}prependTo(e){return this.get()+" "+e}removeAsWordFromDependingOnSettings(e){return this.getRemoveGlobalFilter()?this.removeAsWordFrom(e):e}getRemoveGlobalFilter(){return this._removeGlobalFilter}setRemoveGlobalFilter(e){this._removeGlobalFilter=e}removeAsWordFrom(e){if(this.isEmpty())return e;let t=RegExp("(^|\\s)"+Lo(this.get())+"($|\\s)","ug");return e.search(t)>-1&&(e=e.replace(t,"$1$2").replace("  "," ").trim()),e}removeAsSubstringFrom(e){let t=this.get();return e.replace(t,"").trim()}},ge=un;ge.empty="";var Ff=5;function Lf(r,e){let t=[r.startDateSymbol,r.scheduledDateSymbol,r.dueDateSymbol].join("|");return(n,i,s)=>{let a=[];return a=a.concat(Wx(n,i,s,t,e)),a=a.concat(qx(n,i,s,r.recurrenceSymbol)),a=a.concat(Ux(n,i,s,r)),a.length>0&&!a.some(o=>o.suggestionType==="match")&&a.unshift({suggestionType:"empty",displayText:"\u23CE",appendText:`
`}),a=a.slice(0,s.autoSuggestMaxItems),a}}function Ux(r,e,t,n){let i=u=>Object.values(n.prioritySymbols).some(l=>l.length>0&&u.includes(l)),s=[];if(r.includes(n.dueDateSymbol)||s.push({displayText:`${n.dueDateSymbol} due date`,appendText:`${n.dueDateSymbol} `}),r.includes(n.startDateSymbol)||s.push({displayText:`${n.startDateSymbol} start date`,appendText:`${n.startDateSymbol} `}),r.includes(n.scheduledDateSymbol)||s.push({displayText:`${n.scheduledDateSymbol} scheduled date`,appendText:`${n.scheduledDateSymbol} `}),i(r)||(s.push({displayText:`${n.prioritySymbols.High} high priority`,appendText:`${n.prioritySymbols.High} `}),s.push({displayText:`${n.prioritySymbols.Medium} medium priority`,appendText:`${n.prioritySymbols.Medium} `}),s.push({displayText:`${n.prioritySymbols.Low} low priority`,appendText:`${n.prioritySymbols.Low} `}),s.push({displayText:`${n.prioritySymbols.Highest} highest priority`,appendText:`${n.prioritySymbols.Highest} `}),s.push({displayText:`${n.prioritySymbols.Lowest} lowest priority`,appendText:`${n.prioritySymbols.Lowest} `})),r.includes(n.recurrenceSymbol)||s.push({displayText:`${n.recurrenceSymbol} recurring (repeat)`,appendText:`${n.recurrenceSymbol} `}),!r.includes(n.createdDateSymbol)){let l=Ct.parseDate("today",!0).format(z.dateFormat);s.push({textToMatch:`${n.createdDateSymbol} created`,displayText:`${n.createdDateSymbol} created today (${l})`,appendText:`${n.createdDateSymbol} ${l} `})}let a=Uf(r,/([a-zA-Z'_-]*)/g,e),o=[];if(a&&a.length>0){let u=a[0];if(u.length>=Math.max(1,t.autoSuggestMinMatch)){let l=s.filter(c=>(c.textToMatch||c.displayText).toLowerCase().includes(u.toLowerCase()));for(let c of l)o.push({suggestionType:"match",displayText:c.displayText,appendText:c.appendText,insertAt:a.index,insertSkip:u.length})}}return o.length===0&&t.autoSuggestMinMatch===0?s:o}function Wx(r,e,t,n,i){let s=["today","tomorrow","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","next week","next month","next year"],a=[],o=new RegExp(`(${n})\\s*([0-9a-zA-Z ]*)`,"ug"),u=Uf(r,o,e);if(u&&u.length>=2){let l=u[1],c=u[2];if(c.length<t.autoSuggestMinMatch)return[];let p=c&&c.length>1?Ct.parseDate(gi(c),!0):null;p&&p.isValid()&&a.push({displayText:`${p.format(z.dateFormat)}`,appendText:`${l} ${p.format(z.dateFormat)} `,insertAt:u.index,insertSkip:u[0].length});let h=1,_=s.filter(y=>c&&c.length>=h&&y.toLowerCase().includes(c.toLowerCase())).slice(0,i);_.length===0&&(_=s.slice(0,i));for(let y of _){let M=`${Ct.parseDate(y,!0).format(z.dateFormat)}`;a.push({suggestionType:"match",displayText:`${y} (${M})`,appendText:`${l} ${M} `,insertAt:u.index,insertSkip:u[0].length})}}return a}function qx(r,e,t,n){var u;let i=["every","every day","every week","every month","every month on the","every year","every week on Sunday","every week on Monday","every week on Tuesday","every week on Wednesday","every week on Thursday","every week on Friday","every week on Saturday"],s=[],a=new RegExp(`(${n})\\s*([0-9a-zA-Z ]*)`,"ug"),o=Uf(r,a,e);if(o&&o.length>=2){let l=o[1],c=o[2];if(c.length<t.autoSuggestMinMatch)return[];if(c.length>0){let y=(u=Ze.fromText({recurrenceRuleText:c,startDate:null,scheduledDate:null,dueDate:null}))==null?void 0:u.toText();if(y){let w=`${l} ${y} `;if(s.push({suggestionType:"match",displayText:`\u2705 ${y}`,appendText:w,insertAt:o.index,insertSkip:o[0].length}),o[0]==w)return[]}}let p=1,h=t.autoSuggestMaxItems/2,_=i.filter(y=>c&&c.length>=p&&y.toLowerCase().includes(c.toLowerCase())).slice(0,h);_.length===0&&c.trim().length===0&&(_=i.slice(0,h));for(let y of _)s.push({suggestionType:"match",displayText:`${y}`,appendText:`${l} ${y} `,insertAt:o.index,insertSkip:o[0].length})}return s}function Uf(r,e,t){let n=r.matchAll(e);for(let i of n)if((i==null?void 0:i.index)&&i.index<=t&&t<=i.index+i[0].length)return i}function $x(r,e){if(e.length===0)return!1;let t=Object.fromEntries(e.map(([i,s])=>[i,0])),n=Object.fromEntries(e.map(([i,s])=>[s,i]));for(let i of r)i in t?t[i]++:i in n&&(t[n[i]]=Math.max(0,t[n[i]]-1));return Object.values(t).some(i=>i>0)}function ib(r,e){return(t,n,i)=>$x(t.slice(0,n),e)?r(t,n,i):[]}function sb(r,e){return ge.getInstance().includedIn(r)&&Yx(r,e)}function Yx(r,e){if(r.length===0)return!1;let t=ye.extractTaskComponents(r);if(!t)return!1;let n=t.indentation+t.listMarker+" ["+t.status.symbol+"] ";return e>=n.length}var ua=class{constructor(){this.hideTaskCount=!1;this.hideBacklinks=!1;this.hidePriority=!1;this.hideCreatedDate=!1;this.hideStartDate=!1;this.hideScheduledDate=!1;this.hideDoneDate=!1;this.hideDueDate=!1;this.hideRecurrenceRule=!1;this.hideEditButton=!1;this.hideUrgency=!0;this.hideTags=!1;this.shortMode=!1;this.explainQuery=!1}},ln=class{constructor(e){this.defaultLayout=["description","priority","recurrenceRule","createdDate","startDate","scheduledDate","dueDate","doneDate","blockLink"];this.hiddenTaskLayoutComponents=[];this.taskListHiddenClasses=[];e?this.options=e:this.options=new ua,this.shownTaskLayoutComponents=this.defaultLayout,this.applyOptions()}applyOptions(){let e=[[this.options.hidePriority,"priority"],[this.options.hideRecurrenceRule,"recurrenceRule"],[this.options.hideCreatedDate,"createdDate"],[this.options.hideStartDate,"startDate"],[this.options.hideScheduledDate,"scheduledDate"],[this.options.hideDueDate,"dueDate"],[this.options.hideDoneDate,"doneDate"]];for(let[n,i]of e)this.hideComponent(n,i),this.generateHiddenClassForTaskList(n,i);let t=[[this.options.hideTags,"tags"],[this.options.hideUrgency,"urgency"],[this.options.hideBacklinks,"backlinks"],[this.options.hideEditButton,"edit-button"]];for(let[n,i]of t)this.generateHiddenClassForTaskList(n,i);this.options.shortMode&&this.taskListHiddenClasses.push("tasks-layout-short-mode")}generateHiddenClassForTaskList(e,t){e&&this.taskListHiddenClasses.push(`tasks-layout-hide-${t}`)}hideComponent(e,t){e&&(this.hiddenTaskLayoutComponents.push(t),this.shownTaskLayoutComponents=this.shownTaskLayoutComponents.filter(n=>n!=t))}};var Wf={prioritySymbols:{Highest:"\u{1F53A}",High:"\u23EB",Medium:"\u{1F53C}",Low:"\u{1F53D}",Lowest:"\u23EC",None:""},startDateSymbol:"\u{1F6EB}",createdDateSymbol:"\u2795",scheduledDateSymbol:"\u23F3",dueDateSymbol:"\u{1F4C5}",doneDateSymbol:"\u2705",recurrenceSymbol:"\u{1F501}",TaskFormatRegularExpressions:{priorityRegex:/([🔺⏫🔼🔽⏬])$/u,startDateRegex:/🛫 *(\d{4}-\d{2}-\d{2})$/u,createdDateRegex:/➕ *(\d{4}-\d{2}-\d{2})$/u,scheduledDateRegex:/[⏳⌛] *(\d{4}-\d{2}-\d{2})$/u,dueDateRegex:/[📅📆🗓] *(\d{4}-\d{2}-\d{2})$/u,doneDateRegex:/✅ *(\d{4}-\d{2}-\d{2})$/u,recurrenceRegex:/🔁 ?([a-zA-Z0-9, !]+)$/iu}},Nn=class{constructor(e){this.symbols=e}serialize(e){let t=new ln,n="";for(let i of t.shownTaskLayoutComponents)n+=this.componentToString(e,t,i);return n}componentToString(e,t,n){var p;let{prioritySymbols:i,startDateSymbol:s,createdDateSymbol:a,scheduledDateSymbol:o,doneDateSymbol:u,recurrenceSymbol:l,dueDateSymbol:c}=this.symbols;switch(n){case"description":return e.description;case"priority":{let h="";return e.priority==="0"?h=" "+i.Highest:e.priority==="1"?h=" "+i.High:e.priority==="2"?h=" "+i.Medium:e.priority==="4"?h=" "+i.Low:e.priority==="5"&&(h=" "+i.Lowest),h}case"startDate":return e.startDate?t.options.shortMode?" "+s:` ${s} ${e.startDate.format(z.dateFormat)}`:"";case"createdDate":return e.createdDate?t.options.shortMode?" "+a:` ${a} ${e.createdDate.format(z.dateFormat)}`:"";case"scheduledDate":return!e.scheduledDate||e.scheduledDateIsInferred?"":t.options.shortMode?" "+o:` ${o} ${e.scheduledDate.format(z.dateFormat)}`;case"doneDate":return e.doneDate?t.options.shortMode?" "+u:` ${u} ${e.doneDate.format(z.dateFormat)}`:"";case"dueDate":return e.dueDate?t.options.shortMode?" "+c:` ${c} ${e.dueDate.format(z.dateFormat)}`:"";case"recurrenceRule":return e.recurrence?t.options.shortMode?" "+l:` ${l} ${e.recurrence.toText()}`:"";case"blockLink":return(p=e.blockLink)!=null?p:"";default:throw new Error(`Don't know how to render task component of type '${n}'`)}}parsePriority(e){let{prioritySymbols:t}=this.symbols;switch(e){case t.Lowest:return"5";case t.Low:return"4";case t.Medium:return"2";case t.High:return"1";case t.Highest:return"0";default:return"3"}}deserialize(e){let{TaskFormatRegularExpressions:t}=this.symbols,n,i="3",s=null,a=null,o=null,u=null,l=null,c="",p=null,h="",_=20,y=0;do{n=!1;let w=e.match(t.priorityRegex);w!==null&&(i=this.parsePriority(w[1]),e=e.replace(t.priorityRegex,"").trim(),n=!0);let M=e.match(t.doneDateRegex);M!==null&&(u=window.moment(M[1],z.dateFormat),e=e.replace(t.doneDateRegex,"").trim(),n=!0);let P=e.match(t.dueDateRegex);P!==null&&(o=window.moment(P[1],z.dateFormat),e=e.replace(t.dueDateRegex,"").trim(),n=!0);let N=e.match(t.scheduledDateRegex);N!==null&&(a=window.moment(N[1],z.dateFormat),e=e.replace(t.scheduledDateRegex,"").trim(),n=!0);let F=e.match(t.startDateRegex);F!==null&&(s=window.moment(F[1],z.dateFormat),e=e.replace(t.startDateRegex,"").trim(),n=!0);let X=e.match(t.createdDateRegex);X!==null&&(l=window.moment(X[1],z.dateFormat),e=e.replace(t.createdDateRegex,"").trim(),n=!0);let V=e.match(t.recurrenceRegex);V!==null&&(c=V[1].trim(),e=e.replace(t.recurrenceRegex,"").trim(),n=!0);let he=e.match(z.hashTagsFromEnd);if(he!=null){e=e.replace(z.hashTagsFromEnd,"").trim(),n=!0;let G=he[0].trim();h=h.length>0?[G,h].join(" "):G}y++}while(n&&y<=_);return c.length>0&&(p=Ze.fromText({recurrenceRuleText:c,startDate:s,scheduledDate:a,dueDate:o})),h.length>0&&(e+=" "+h),{description:e,priority:i,startDate:s,createdDate:l,scheduledDate:a,dueDate:o,doneDate:u,recurrence:p,tags:ye.extractHashtags(e)}}};function In(r){let e=["(?:",/(?=[^\]]+\])\[/,"|",/(?=[^)]+\))\(/,")",/ */,r,/ */,/[)\]]/,/(?: *,)?/,/$/].map(t=>t instanceof RegExp?t.source:t).join("");return new RegExp(e,r.flags)}var qf={prioritySymbols:{Highest:"priority:: highest",High:"priority:: high",Medium:"priority:: medium",Low:"priority:: low",Lowest:"priority:: lowest",None:""},startDateSymbol:"start::",createdDateSymbol:"created::",scheduledDateSymbol:"scheduled::",dueDateSymbol:"due::",doneDateSymbol:"completion::",recurrenceSymbol:"repeat::",TaskFormatRegularExpressions:{priorityRegex:In(/priority:: *(highest|high|medium|low|lowest)/),startDateRegex:In(/start:: *(\d{4}-\d{2}-\d{2})/),createdDateRegex:In(/created:: *(\d{4}-\d{2}-\d{2})/),scheduledDateRegex:In(/scheduled:: *(\d{4}-\d{2}-\d{2})/),dueDateRegex:In(/due:: *(\d{4}-\d{2}-\d{2})/),doneDateRegex:In(/completion:: *(\d{4}-\d{2}-\d{2})/),recurrenceRegex:In(/repeat:: *([a-zA-Z0-9, !]+)/)}},Uo=class extends Nn{constructor(){super(qf)}parsePriority(e){switch(e){case"highest":return"0";case"high":return"1";case"medium":return"2";case"low":return"4";case"lowest":return"5";default:return"3"}}componentToString(e,t,n){let i=super.componentToString(e,t,n);return i!==""&&!["blockLink","description"].includes(n)?`  [${i.trim()}]`:i}};var Qt=(a=>(a.TODO="TODO",a.DONE="DONE",a.IN_PROGRESS="IN_PROGRESS",a.CANCELLED="CANCELLED",a.NON_TASK="NON_TASK",a.EMPTY="EMPTY",a))(Qt||{}),Je=class{constructor(e,t,n,i,s="TODO"){this.symbol=e,this.name=t,this.nextStatusSymbol=n,this.availableAsCommand=i,this.type=s}};var Dt=class{get symbol(){return this.configuration.symbol}get name(){return this.configuration.name}get nextStatusSymbol(){return this.configuration.nextStatusSymbol}get nextSymbol(){return this.configuration.nextStatusSymbol}get availableAsCommand(){return this.configuration.availableAsCommand}get type(){return this.configuration.type}get typeGroupText(){let e=this.type,t;switch(e){case"IN_PROGRESS":t="1";break;case"TODO":t="2";break;case"DONE":t="3";break;case"CANCELLED":t="4";break;case"NON_TASK":t="5";break;case"EMPTY":t="6";break}return`%%${t}%%${e}`}constructor(e){this.configuration=e}static makeDone(){return new Dt(new Je("x","Done"," ",!0,"DONE"))}static makeEmpty(){return new Dt(new Je("","EMPTY","",!0,"EMPTY"))}static makeTodo(){return new Dt(new Je(" ","Todo","x",!0,"TODO"))}static makeCancelled(){return new Dt(new Je("-","Cancelled"," ",!0,"CANCELLED"))}static makeInProgress(){return new Dt(new Je("/","In Progress","x",!0,"IN_PROGRESS"))}static getTypeForUnknownSymbol(e){switch(e){case"x":case"X":return"DONE";case"/":return"IN_PROGRESS";case"-":return"CANCELLED";case"":return"EMPTY";case" ":default:return"TODO"}}static getTypeFromStatusTypeString(e){return Qt[e]||"TODO"}static createUnknownStatus(e){return new Dt(new Je(e,"Unknown","x",!1,"TODO"))}static createFromImportedValue(e){let t=e[0],n=Dt.getTypeFromStatusTypeString(e[3]);return new Dt(new Je(t,e[1],e[2],!1,n))}isCompleted(){return this.type==="DONE"}identicalTo(e){let t=["symbol","name","nextStatusSymbol","availableAsCommand","type"];for(let n of t)if(this[n]!==e[n])return!1;return!0}previewText(){let e="";return Dt.tasksPluginCanCreateCommandsForStatuses()&&this.availableAsCommand&&(e=" Available as a command."),`- [${this.symbol}] => [${this.nextStatusSymbol}], name: '${this.name}', type: '${this.configuration.type}'.${e}`}static tasksPluginCanCreateCommandsForStatuses(){return!1}},te=Dt;te.DONE=Dt.makeDone(),te.EMPTY=Dt.makeEmpty(),te.TODO=Dt.makeTodo();var Wo=class{constructor(e=!1,t=!1){this.ignoreSortInstructions=e,this.showTaskHiddenData=t}};var je=class{constructor(){this.coreStatuses=[te.makeTodo().configuration,te.makeDone().configuration],this.customStatuses=[te.makeInProgress().configuration,te.makeCancelled().configuration]}static addStatus(e,t){e.push(t)}static replaceStatus(e,t,n){let i=this.findStatusIndex(t,e);return i<=-1?!1:(e.splice(i,1,n),!0)}static findStatusIndex(e,t){let n=new te(e);return t.findIndex(i=>new te(i).previewText()==n.previewText())}static deleteStatus(e,t){let n=this.findStatusIndex(t,e);return n<=-1?!1:(e.splice(n,1),!0)}static deleteAllCustomStatuses(e){e.customStatuses.splice(0)}static resetAllCustomStatuses(e){je.deleteAllCustomStatuses(e),new je().customStatuses.forEach(n=>{je.addStatus(e.customStatuses,n)})}static bulkAddStatusCollection(e,t){let n=[];return t.forEach(i=>{e.customStatuses.find(a=>a.symbol==i[0]&&a.name==i[1]&&a.nextStatusSymbol==i[2])?n.push(`The status ${i[1]} (${i[0]}) is already added.`):je.addStatus(e.customStatuses,te.createFromImportedValue(i))}),n}static applyToStatusRegistry(e,t){t.clearStatuses(),e.coreStatuses.forEach(n=>{t.add(n)}),e.customStatuses.forEach(n=>{t.add(n)})}};var ab=[{index:9999,internalName:"INTERNAL_TESTING_ENABLED_BY_DEFAULT",displayName:"Test Item. Used to validate the Feature Framework.",description:"Description",enabledByDefault:!0,stable:!1}];var _r=class{constructor(e,t,n,i,s,a){this.internalName=e;this.index=t;this.description=n;this.displayName=i;this.enabledByDefault=s;this.stable=a}static get values(){let e=[];return ab.forEach(t=>{e=[...e,new _r(t.internalName,t.index,t.description,t.displayName,t.enabledByDefault,t.stable)]}),e}static get settingsFlags(){let e={};return _r.values.forEach(t=>{e[t.internalName]=t.enabledByDefault}),e}static fromString(e){for(let t of _r.values)if(e===t.internalName)return t;throw new RangeError(`Illegal argument passed to fromString(): ${e} does not correspond to any available Feature ${this.prototype.constructor.name}`)}};var Yr={tasksPluginEmoji:{displayName:"Tasks Emoji Format",taskSerializer:new Nn(Wf),buildSuggestions:Lf(Wf,Ff)},dataview:{displayName:"Dataview",taskSerializer:new Uo,buildSuggestions:ib(Lf(qf,Ff),[["(",")"],["[","]"]])}},jx={globalQuery:"",globalFilter:"",removeGlobalFilter:!1,taskFormat:"tasksPluginEmoji",setCreatedDate:!1,setDoneDate:!0,autoSuggestInEditor:!0,autoSuggestMinMatch:0,autoSuggestMaxItems:6,provideAccessKeys:!0,useFilenameAsScheduledDate:!1,filenameAsDateFolders:[],recurrenceOnNextLine:!1,statusSettings:new je,features:_r.settingsFlags,generalSettings:{},headingOpened:{},debugSettings:new Wo},cn=pe({},jx),Q=()=>{for(let r in _r.settingsFlags)cn.features[r]===void 0&&(cn.features[r]=_r.settingsFlags[r]);return cn.statusSettings.customStatuses.forEach((r,e,t)=>{var i,s;let n=te.getTypeFromStatusTypeString(r.type);t[e]=new Je((i=r.symbol)!=null?i:" ",r.name,(s=r.nextStatusSymbol)!=null?s:"x",r.availableAsCommand,n)}),pe({},cn)},et=r=>(cn=pe(pe({},cn),r),Q());var Fn=(r,e)=>(cn.generalSettings[r]=e,Q()),ob=r=>{var e;return(e=cn.features[r])!=null?e:!1};function ca(){return Yr[Q().taskFormat]}var De=class{constructor(){this._registeredStatuses=[];this.addDefaultStatusTypes()}get registeredStatuses(){return this._registeredStatuses.filter(({symbol:e})=>e!==te.EMPTY.symbol)}static getInstance(){return De.instance||(De.instance=new De),De.instance}add(e){this.hasSymbol(e.symbol)||(e instanceof te?this._registeredStatuses.push(e):this._registeredStatuses.push(new te(e)))}bySymbol(e){return this.hasSymbol(e)?this.getSymbol(e):te.EMPTY}bySymbolOrCreate(e){return this.hasSymbol(e)?this.getSymbol(e):te.createUnknownStatus(e)}byName(e){return this._registeredStatuses.filter(({name:t})=>t===e).length>0?this._registeredStatuses.filter(({name:t})=>t===e)[0]:te.EMPTY}resetToDefaultStatuses(){this.clearStatuses(),this.addDefaultStatusTypes()}clearStatuses(){this._registeredStatuses=[]}getNextStatus(e){if(e.nextStatusSymbol!==""){let t=this.bySymbol(e.nextStatusSymbol);if(t!==null)return t}return te.EMPTY}getNextStatusOrCreate(e){let t=this.getNextStatus(e);return t.type!=="EMPTY"?t:te.createUnknownStatus(e.nextStatusSymbol)}findUnknownStatuses(e){let t=e.filter(s=>!this.hasSymbol(s.symbol)),n=new De,i=[];return t.forEach(s=>{if(n.hasSymbol(s.symbol))return;let a=De.copyStatusWithNewName(s,`Unknown (${s.symbol})`);i.push(a),n.add(a)}),i}static copyStatusWithNewName(e,t){let n=new Je(e.symbol,t,e.nextStatusSymbol,e.availableAsCommand,e.type);return new te(n)}getSymbol(e){return this._registeredStatuses.filter(({symbol:t})=>t===e)[0]}hasSymbol(e){return this._registeredStatuses.find(t=>t.symbol===e)!==void 0}addDefaultStatusTypes(){[te.makeTodo(),te.makeInProgress(),te.makeDone(),te.makeCancelled()].forEach(t=>{this.add(t)})}};var or=class{static calculate(e){let t=0;if(e.dueDate!==null){let n=window.moment().startOf("day"),i=Math.round(n.diff(e.dueDate)/or.milliSecondsPerDay),s;i>=7?s=1:i>=-14?s=(i+14)*.8/21+.2:s=.2,t+=s*or.dueCoefficient}switch(e.scheduledDate!==null&&window.moment().isSameOrAfter(e.scheduledDate)&&(t+=1*or.scheduledCoefficient),e.startDate!==null&&window.moment().isBefore(e.startDate)&&(t+=1*or.startedCoefficient),e.priority){case"0":t+=1.5*or.priorityCoefficient;break;case"1":t+=1*or.priorityCoefficient;break;case"2":t+=.65*or.priorityCoefficient;break;case"3":t+=.325*or.priorityCoefficient;break;case"5":t-=.3*or.priorityCoefficient;break}return t}},Gr=or;Gr.dueCoefficient=12,Gr.scheduledCoefficient=5,Gr.startedCoefficient=-3,Gr.priorityCoefficient=6,Gr.milliSecondsPerDay=1e3*60*60*24;var Rt=class{static fromPath(e){let{useFilenameAsScheduledDate:t,filenameAsDateFolders:n}=Q();return!t||!this.matchesAnyFolder(n,e)?null:this.extractDateFromPath(e)}static matchesAnyFolder(e,t){return e.length===0?!0:e.some(n=>t.startsWith(n+"/"))}static extractDateFromPath(e){let t=Math.max(0,e.lastIndexOf("/")+1),n=e.lastIndexOf("."),i=e.substring(t,n),s=/(\d{4})-(\d{2})-(\d{2})/.exec(i);if(s||(s=/(\d{4})(\d{2})(\d{2})/.exec(i)),s){let a=window.moment([parseInt(s[1]),parseInt(s[2])-1,parseInt(s[3])]);if(a.isValid())return a}return null}static canApplyFallback({startDate:e,scheduledDate:t,dueDate:n}){return e===null&&n===null&&t===null}static updateTaskPath(e,t,n){let i=e.scheduledDate,s=e.scheduledDateIsInferred;return n===null?s&&(s=!1,i=null):s?i=n:this.canApplyFallback(e)&&(i=n,s=!0),new ye(Tt(pe({},e),{taskLocation:e.taskLocation.fromRenamedFile(t),scheduledDate:i,scheduledDateIsInferred:s}))}static removeInferredStatusIfNeeded(e,t){let n=e.scheduledDateIsInferred?e.scheduledDate:null;return t.map(i=>(n!==null&&!n.isSame(i.scheduledDate,"day")&&(i=new ye(Tt(pe({},i),{scheduledDateIsInferred:!1}))),i))}};var jr=class{constructor(e,t){this.name=e,this.sortOrder=t}get groupText(){return this.name!==""?`%%${this.sortOrder}%% ${this.name}`:""}};var vt=class{constructor(e){this._date=null;this._date=e}get moment(){return this._date}formatAsDate(e=""){return this.format(z.dateFormat,e)}formatAsDateAndTime(e=""){return this.format(z.dateTimeFormat,e)}format(e,t=""){return this._date?this._date.format(e):t}toISOString(e){return this._date?this._date.toISOString(e):""}get category(){let e=window.moment(),t=this.moment;return t?t.isBefore(e,"day")?new jr("Overdue",1):t.isSame(e,"day")?new jr("Today",2):new jr("Future",3):new jr("Undated",4)}get fromNow(){let e=this.moment;if(!e)return new jr("",0);let t=this.fromNowOrder(e);return new jr(e.fromNow(),t)}fromNowOrder(e){let t=window.moment(),n=e.isSameOrBefore(t,"day"),i=this.fromNowStartDateOfGroup(e,n,t);return Number((n?1:3)+i.format("YYYYMMDD"))}fromNowStartDateOfGroup(e,t,n){let i=e.fromNow(!0).split(" "),s,a=Number(i[0]);isNaN(a)?s=1:s=a;let o=i[1];return t?n.subtract(s,o):n.add(s,o)}};var Ei=class{constructor(e){this._path=e}get path(){return this._path}get pathWithoutExtension(){return this.withoutExtension(this.path)}withoutExtension(e){return e.replace(/\.md$/,"")}get root(){let e=this.path.replace(/\\/g,"/");e.charAt(0)==="/"&&(e=e.substring(1));let t=e.indexOf("/");return t==-1?"/":e.substring(0,t+1)}get folder(){let e=this.path,t=this.filename,n=e.substring(0,e.lastIndexOf(t));return n===""?"/":n}get filename(){let e=this.path.match(/([^/]+)$/);return e!==null?e[1]:""}get filenameWithoutExtension(){return this.withoutExtension(this.filename)}};var Br=class{static priorityNameUsingNone(e){let t="ERROR";switch(e){case"1":t="High";break;case"0":t="Highest";break;case"2":t="Medium";break;case"3":t="None";break;case"4":t="Low";break;case"5":t="Lowest";break}return t}static priorityNameUsingNormal(e){return Br.priorityNameUsingNone(e).replace("None","Normal")}};var It=class{},z=It;z.dateFormat="YYYY-MM-DD",z.dateTimeFormat="YYYY-MM-DD HH:mm",z.indentationRegex=/^([\s\t>]*)/,z.listMarkerRegex=/([-*+]|[0-9]+\.)/,z.checkboxRegex=/\[(.)\]/u,z.afterCheckboxRegex=/ *(.*)/u,z.taskRegex=new RegExp(It.indentationRegex.source+It.listMarkerRegex.source+" +"+It.checkboxRegex.source+It.afterCheckboxRegex.source,"u"),z.nonTaskRegex=new RegExp(It.indentationRegex.source+It.listMarkerRegex.source+"? *("+It.checkboxRegex.source+")?"+It.afterCheckboxRegex.source,"u"),z.listItemRegex=new RegExp(It.indentationRegex.source+It.listMarkerRegex.source),z.blockLinkRegex=/ \^[a-zA-Z0-9-]+$/u,z.hashTags=/(^|\s)#[^ !@#$%^&*(),.?":{}|<>]+/g,z.hashTagsFromEnd=new RegExp(It.hashTags.source+"$");var ye=class{constructor({status:e,description:t,taskLocation:n,indentation:i,listMarker:s,priority:a,createdDate:o,startDate:u,scheduledDate:l,dueDate:c,doneDate:p,recurrence:h,blockLink:_,tags:y,originalMarkdown:w,scheduledDateIsInferred:M}){this._urgency=null;this.status=e,this.description=t,this.indentation=i,this.listMarker=s,this.taskLocation=n,this.tags=y,this.priority=a,this.createdDate=o,this.startDate=u,this.scheduledDate=l,this.dueDate=c,this.doneDate=p,this.recurrence=h,this.blockLink=_,this.originalMarkdown=w,this.scheduledDateIsInferred=M}static fromLine({line:e,taskLocation:t,fallbackDate:n}){let i=ye.extractTaskComponents(e);return i===null||!ge.getInstance().includedIn(i.body)?null:ye.parseTaskSignifiers(e,t,n)}static parseTaskSignifiers(e,t,n){let i=ye.extractTaskComponents(e);if(i===null)return null;let{taskSerializer:s}=ca(),a=s.deserialize(i.body),o=!1;return Rt.canApplyFallback(a)&&n!==null&&(a.scheduledDate=n,o=!0),a.tags=a.tags.map(u=>u.trim()),a.tags=a.tags.filter(u=>!ge.getInstance().equals(u)),new ye(Tt(pe(pe({},i),a),{taskLocation:t,originalMarkdown:e,scheduledDateIsInferred:o}))}static extractTaskComponents(e){let t=e.match(z.taskRegex);if(t===null)return null;let n=t[1],i=t[2],s=t[3],a=De.getInstance().bySymbolOrCreate(s),o=t[4].trim(),u=o.match(z.blockLinkRegex),l=u!==null?u[0]:"";return l!==""&&(o=o.replace(z.blockLinkRegex,"").trim()),{indentation:n,listMarker:i,status:a,body:o,blockLink:l}}toString(){return ca().taskSerializer.serialize(this)}toFileLineString(){return`${this.indentation}${this.listMarker} [${this.status.symbol}] ${this.toString()}`}toggle(){let e=De.getInstance().getNextStatusOrCreate(this.status),t=null,n=null;if(e.isCompleted()){let{setDoneDate:a}=Q();a&&(t=window.moment()),this.recurrence!==null&&(n=this.recurrence.next())}let i=new ye(Tt(pe({},this),{status:e,doneDate:t})),s=[];if(n!==null){let{setCreatedDate:a}=Q(),o=null;a&&(o=window.moment());let u=De.getInstance().getNextStatusOrCreate(e),l=new ye(Tt(pe(pe({},this),n),{status:u,blockLink:"",createdDate:o}));s.push(l)}return s.push(i),s}toggleWithRecurrenceInUsersOrder(){let e=this.toggle(),{recurrenceOnNextLine:t}=Q();return t?e.reverse():e}get isDone(){return this.status.type==="DONE"||this.status.type==="CANCELLED"||this.status.type==="NON_TASK"}get priorityNumber(){return Number.parseInt(this.priority)}get priorityNameGroupText(){let e=Br.priorityNameUsingNormal(this.priority);return`%%${this.priority}%%${e} priority`}get descriptionWithoutTags(){return this.description.replace(z.hashTags,"").trim()}get priorityName(){return Br.priorityNameUsingNormal(this.priority)}get urgency(){return this._urgency===null&&(this._urgency=Gr.calculate(this)),this._urgency}get path(){return this.taskLocation.path}get created(){return new vt(this.createdDate)}get done(){return new vt(this.doneDate)}get due(){return new vt(this.dueDate)}get scheduled(){return new vt(this.scheduledDate)}get start(){return new vt(this.startDate)}get happensDates(){return Array.of(this.startDate,this.scheduledDate,this.dueDate)}get happens(){let t=this.happensDates.sort($r);return new vt(t[0])}get isRecurring(){return this.recurrence!==null}get recurrenceRule(){return this.recurrence?this.recurrence.toText():""}get heading(){return this.precedingHeader}get hasHeading(){return this.precedingHeader!==null}get file(){return new Ei(this.path)}get filename(){let e=this.path.match(/([^/]+)\.md$/);return e!==null?e[1]:null}get lineNumber(){return this.taskLocation.lineNumber}get sectionStart(){return this.taskLocation.sectionStart}get sectionIndex(){return this.taskLocation.sectionIndex}get precedingHeader(){return this.taskLocation.precedingHeader}getLinkText({isFilenameUnique:e}){let t;return e?t=this.filename:t="/"+this.path,t===null?null:(this.precedingHeader!==null&&this.precedingHeader!==t&&(t=t+" > "+this.precedingHeader),t)}static tasksListsIdentical(e,t){return e.length!==t.length?!1:e.every((n,i)=>n.identicalTo(t[i]))}identicalTo(e){let t=["description","path","indentation","listMarker","lineNumber","sectionStart","sectionIndex","precedingHeader","priority","blockLink","scheduledDateIsInferred"];for(let s of t)if(this[s]!==e[s])return!1;if(!this.status.identicalTo(e.status)||this.tags.length!==e.tags.length||!this.tags.every(function(s,a){return s===e.tags[a]}))return!1;t=["createdDate","startDate","scheduledDate","dueDate","doneDate"];for(let s of t){let a=this[s],o=e[s];if($r(a,o)!==0)return!1}let n=this.recurrence,i=e.recurrence;return n===null&&i!==null||n!==null&&i===null?!1:!(n&&i&&!n.identicalTo(i))}static extractHashtags(e){var t,n;return(n=(t=e.match(z.hashTags))==null?void 0:t.map(i=>i.trim()))!=null?n:[]}};var da=class{constructor(e){this.fetch=e;this._value=void 0}get value(){return this._value===void 0&&(this._value=this.fetch()),this._value}};var ot=class{constructor(e,t,n,i,s){this._path=e,this._lineNumber=t,this._sectionStart=n,this._sectionIndex=i,this._precedingHeader=s}static fromUnknownPosition(e){return new ot(e,0,0,0,null)}fromRenamedFile(e){return new ot(e,this.lineNumber,this.sectionStart,this.sectionIndex,this.precedingHeader)}get path(){return this._path}get lineNumber(){return this._lineNumber}get sectionStart(){return this._sectionStart}get sectionIndex(){return this._sectionIndex}get precedingHeader(){return this._precedingHeader}};var Ln=class{constructor({metadataCache:e,vault:t,events:n}){this.metadataCache=e,this.metadataCacheEventReferences=[],this.vault=t,this.vaultEventReferences=[],this.events=n,this.eventsEventReferences=[],this.tasksMutex=new Ia,this.state="Cold",this.tasks=[],this.loadedAfterFirstResolve=!1,this.subscribeToCache(),this.subscribeToVault(),this.subscribeToEvents(),this.loadVault()}unload(){for(let e of this.metadataCacheEventReferences)this.metadataCache.offref(e);for(let e of this.vaultEventReferences)this.vault.offref(e);for(let e of this.eventsEventReferences)this.events.off(e)}getTasks(){return this.tasks}getState(){return this.state}notifySubscribers(){this.events.triggerCacheUpdate({tasks:this.tasks,state:this.state})}subscribeToCache(){let e=this.metadataCache.on("resolved",()=>q(this,null,function*(){this.loadedAfterFirstResolve||(this.loadedAfterFirstResolve=!0,this.loadVault())}));this.metadataCacheEventReferences.push(e);let t=this.metadataCache.on("changed",n=>{this.tasksMutex.runExclusive(()=>{this.indexFile(n)})});this.metadataCacheEventReferences.push(t)}subscribeToVault(){let{useFilenameAsScheduledDate:e}=Q(),t=this.vault.on("create",s=>{s instanceof wi.TFile&&this.tasksMutex.runExclusive(()=>{this.indexFile(s)})});this.vaultEventReferences.push(t);let n=this.vault.on("delete",s=>{s instanceof wi.TFile&&this.tasksMutex.runExclusive(()=>{this.tasks=this.tasks.filter(a=>a.path!==s.path),this.notifySubscribers()})});this.vaultEventReferences.push(n);let i=this.vault.on("rename",(s,a)=>{s instanceof wi.TFile&&this.tasksMutex.runExclusive(()=>{let o=new da(()=>Rt.fromPath(s.path));this.tasks=this.tasks.map(u=>u.path===a?e?Rt.updateTaskPath(u,s.path,o.value):new ye(Tt(pe({},u),{taskLocation:u.taskLocation.fromRenamedFile(s.path)})):u),this.notifySubscribers()})});this.vaultEventReferences.push(i)}subscribeToEvents(){let e=this.events.onRequestCacheUpdate(t=>{t({tasks:this.tasks,state:this.state})});this.eventsEventReferences.push(e)}loadVault(){return this.tasksMutex.runExclusive(()=>q(this,null,function*(){this.state="Initializing",yield Promise.all(this.vault.getMarkdownFiles().map(e=>this.indexFile(e))),this.state="Warm",this.notifySubscribers()}))}indexFile(e){return q(this,null,function*(){let t=this.metadataCache.getFileCache(e);if(t==null)return;let n=this.tasks.filter(a=>a.path===e.path),i=t.listItems,s=[];if(i!==void 0){let a=yield this.vault.cachedRead(e);s=this.getTasksFromFileContent(a,i,t,e)}ye.tasksListsIdentical(n,s)||(this.tasks=this.tasks.filter(a=>a.path!==e.path),this.tasks.push(...s),this.notifySubscribers())})}getTasksFromFileContent(e,t,n,i){let s=[],a=e.split(`
`),o=a.length,u=new da(()=>Rt.fromPath(i.path)),l=null,c=0;for(let p of t)if(p.task!==void 0){let h=p.position.start.line;if(h>=o)return console.log(`${i.path} Obsidian gave us a line number ${h} past the end of the file. ${o}.`),s;if((l===null||l.position.end.line<h)&&(l=Ln.getSection(h,n.sections),c=0),l===null)continue;let _=a[h];if(_===void 0){console.log(`${i.path}: line ${h} - ignoring 'undefined' line.`);continue}let y;try{y=ye.fromLine({line:_,taskLocation:new ot(i.path,h,l.position.start.line,c,Ln.getPrecedingHeader(h,n.headings)),fallbackDate:u.value})}catch(w){this.reportTaskParsingErrorToUser(w,i,p,_);continue}y!==null&&(c++,s.push(y))}return s}reportTaskParsingErrorToUser(e,t,n,i){let s=`There was an error reading one of the tasks in this vault.
The following task has been ignored, to prevent Tasks queries getting stuck with 'Loading Tasks ...'
Error: ${e}
File: ${t.path}
Line number: ${n.position.start.line}
Task line: ${i}

Please create a bug report for this message at
https://github.com/obsidian-tasks-group/obsidian-tasks/issues/new/choose
to help us find and fix the underlying issue.

Include:
- either a screenshot of the error popup, or copy the text from the console, if on a desktop machine.
- the output from running the Obsidian command 'Show debug info'

The error popup will only be shown when Tasks is starting up, but if the error persists,
it will be shown in the console every time this file is edited during the Obsidian
session.
`;console.error(s),e instanceof Error&&console.error(e.stack),this.state==="Initializing"&&new wi.Notice(s,1e4)}static getSection(e,t){if(t===void 0)return null;for(let n of t)if(n.position.start.line<=e&&n.position.end.line>=e)return n;return null}static getPrecedingHeader(e,t){if(t===void 0)return null;let n=null;for(let i of t){if(i.position.start.line>e)return n;n=i.heading}return n}};var Xf=require("obsidian");var Ob=require("obsidian");function Hr(){}function Gf(r){return r()}function ub(){return Object.create(null)}function Wn(r){r.forEach(Gf)}function qo(r){return typeof r=="function"}function cb(r,e){return r!=r?e==e:r!==e||r&&typeof r=="object"||typeof r=="function"}function db(r){return Object.keys(r).length===0}var fb=typeof window!="undefined"?window:typeof globalThis!="undefined"?globalThis:global,pa=class{constructor(e){this.options=e,this._listeners="WeakMap"in fb?new WeakMap:void 0}observe(e,t){return this._listeners.set(e,t),this._getObserver().observe(e,this.options),()=>{this._listeners.delete(e),this._observer.unobserve(e)}}_getObserver(){var e;return(e=this._observer)!==null&&e!==void 0?e:this._observer=new ResizeObserver(t=>{var n;for(let i of t)pa.entries.set(i.target,i),(n=this._listeners.get(i.target))===null||n===void 0||n(i)})}};pa.entries="WeakMap"in fb?new WeakMap:void 0;var pb=!1;function Hx(){pb=!0}function zx(){pb=!1}function R(r,e){r.appendChild(e)}function Di(r,e,t){r.insertBefore(e,t||null)}function qn(r){r.parentNode&&r.parentNode.removeChild(r)}function jf(r,e){for(let t=0;t<r.length;t+=1)r[t]&&r[t].d(e)}function K(r){return document.createElement(r)}function Kx(r){return document.createElementNS("http://www.w3.org/2000/svg",r)}function dt(r){return document.createTextNode(r)}function de(){return dt(" ")}function Et(r,e,t,n){return r.addEventListener(e,t,n),()=>r.removeEventListener(e,t,n)}function hb(r){return function(e){return e.preventDefault(),r.call(this,e)}}function L(r,e,t){t==null?r.removeAttribute(e):r.getAttribute(e)!==t&&r.setAttribute(e,t)}function mb(r){let e;return{p(...t){e=t,e.forEach(n=>r.push(n))},r(){e.forEach(t=>r.splice(r.indexOf(t),1))}}}function Vx(r){return Array.from(r.childNodes)}function Bf(r,e){e=""+e,r.data!==e&&(r.data=e)}function ur(r,e){r.value=e==null?"":e}function Hf(r,e,t){for(let n=0;n<r.options.length;n+=1){let i=r.options[n];if(i.__value===e){i.selected=!0;return}}(!t||e!==void 0)&&(r.selectedIndex=-1)}function gb(r){let e=r.querySelector(":checked");return e&&e.__value}function lr(r,e,t){r.classList[t?"add":"remove"](e)}var Un=class{constructor(e=!1){this.is_svg=!1,this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,t,n=null){this.e||(this.is_svg?this.e=Kx(t.nodeName):this.e=K(t.nodeType===11?"TEMPLATE":t.nodeName),this.t=t.tagName!=="TEMPLATE"?t:t.content,this.c(e)),this.i(n)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)Di(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(qn)}};var ha;function fa(r){ha=r}function Qx(){if(!ha)throw new Error("Function called outside component initialization");return ha}function zf(r){Qx().$$.on_mount.push(r)}var Oi=[];var $o=[],Si=[],lb=[],Xx=Promise.resolve(),Yf=!1;function Zx(){Yf||(Yf=!0,Xx.then(yb))}function ma(r){Si.push(r)}var $f=new Set,ki=0;function yb(){if(ki!==0)return;let r=ha;do{try{for(;ki<Oi.length;){let e=Oi[ki];ki++,fa(e),Jx(e.$$)}}catch(e){throw Oi.length=0,ki=0,e}for(fa(null),Oi.length=0,ki=0;$o.length;)$o.pop()();for(let e=0;e<Si.length;e+=1){let t=Si[e];$f.has(t)||($f.add(t),t())}Si.length=0}while(Oi.length);for(;lb.length;)lb.pop()();Yf=!1,$f.clear(),fa(r)}function Jx(r){if(r.fragment!==null){r.update(),Wn(r.before_update);let e=r.dirty;r.dirty=[-1],r.fragment&&r.fragment.p(r.ctx,e),r.after_update.forEach(ma)}}function eA(r){let e=[],t=[];Si.forEach(n=>r.indexOf(n)===-1?e.push(n):t.push(n)),t.forEach(n=>n()),Si=e}var tA=new Set;function rA(r,e){r&&r.i&&(tA.delete(r),r.i(e))}var nA=["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"],eU=new Set([...nA]);function iA(r,e,t,n){let{fragment:i,after_update:s}=r.$$;i&&i.m(e,t),n||ma(()=>{let a=r.$$.on_mount.map(Gf).filter(qo);r.$$.on_destroy?r.$$.on_destroy.push(...a):Wn(a),r.$$.on_mount=[]}),s.forEach(ma)}function Tb(r,e){let t=r.$$;t.fragment!==null&&(eA(t.after_update),Wn(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function sA(r,e){r.$$.dirty[0]===-1&&(Oi.push(r),Zx(),r.$$.dirty.fill(0)),r.$$.dirty[e/31|0]|=1<<e%31}function bb(r,e,t,n,i,s,a,o=[-1]){let u=ha;fa(r);let l=r.$$={fragment:null,ctx:[],props:s,update:Hr,not_equal:i,bound:ub(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:ub(),dirty:o,skip_bound:!1,root:e.target||u.$$.root};a&&a(l.root);let c=!1;if(l.ctx=t?t(r,e.props||{},(p,h,..._)=>{let y=_.length?_[0]:h;return l.ctx&&i(l.ctx[p],l.ctx[p]=y)&&(!l.skip_bound&&l.bound[p]&&l.bound[p](y),c&&sA(r,p)),h}):[],l.update(),c=!0,Wn(l.before_update),l.fragment=n?n(l.ctx):!1,e.target){if(e.hydrate){Hx();let p=Vx(e.target);l.fragment&&l.fragment.l(p),p.forEach(qn)}else l.fragment&&l.fragment.c();e.intro&&rA(r.$$.fragment),iA(r,e.target,e.anchor,e.customElement),zx(),yb()}fa(u)}var aA;typeof HTMLElement=="function"&&(aA=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){let{on_mount:r}=this.$$;this.$$.on_disconnect=r.map(Gf).filter(qo);for(let e in this.$$.slotted)this.appendChild(this.$$.slotted[e])}attributeChangedCallback(r,e,t){this[r]=t}disconnectedCallback(){Wn(this.$$.on_disconnect)}$destroy(){Tb(this,1),this.$destroy=Hr}$on(r,e){if(!qo(e))return Hr;let t=this.$$.callbacks[r]||(this.$$.callbacks[r]=[]);return t.push(e),()=>{let n=t.indexOf(e);n!==-1&&t.splice(n,1)}}$set(r){this.$$set&&!db(r)&&(this.$$.skip_bound=!0,this.$$set(r),this.$$.skip_bound=!1)}});var Yo=class{$destroy(){Tb(this,1),this.$destroy=Hr}$on(e,t){if(!qo(t))return Hr;let n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{let i=n.indexOf(t);i!==-1&&n.splice(i,1)}}$set(e){this.$$set&&!db(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}};var Vf=Ji(Ge());function _b(r,e,t){let n=r.slice();return n[45]=e[t],n}function vb(r,e,t){let n=r.slice();return n[48]=e[t].value,n[49]=e[t].label,n[50]=e[t].symbol,n[51]=e[t].accessKey,n[52]=e[t].accessKeyIndex,n}function oA(r){let e,t=r[50]+"",n;return{c(){e=K("span"),n=dt(t)},m(i,s){Di(i,e,s),R(e,n)},p:Hr,d(i){i&&qn(e)}}}function Eb(r){let e,t,n,i,s,a,o,u,l=r[49].substring(0,r[52])+"",c,p,h=r[49].substring(r[52],r[52]+1)+"",_,y,w=r[49].substring(r[52]+1)+"",M,P,N=r[50]&&r[50].charCodeAt(0)>=256,F,X,V,he,G,j=N&&oA(r);return V=mb(r[33][0]),{c(){e=K("span"),t=K("input"),a=de(),o=K("label"),u=K("span"),c=dt(l),p=K("span"),_=dt(h),y=K("span"),M=dt(w),P=de(),j&&j.c(),X=de(),L(t,"type","radio"),L(t,"id",n="priority-"+r[48]),t.__value=i=r[48],t.value=t.__value,L(t,"accesskey",s=r[15](r[51])),L(p,"class","accesskey"),L(o,"for",F="priority-"+r[48]),V.p(t)},m(Ce,Ie){Di(Ce,e,Ie),R(e,t),t.checked=t.__value===r[1].priority,R(e,a),R(e,o),R(o,u),R(u,c),R(o,p),R(p,_),R(o,y),R(y,M),R(o,P),j&&j.m(o,null),R(e,X),he||(G=Et(t,"change",r[32]),he=!0)},p(Ce,Ie){Ie[0]&32768&&s!==(s=Ce[15](Ce[51]))&&L(t,"accesskey",s),Ie[0]&3&&(t.checked=t.__value===Ce[1].priority),N&&j.p(Ce,Ie)},d(Ce){Ce&&qn(e),j&&j.d(),V.r(),he=!1,G()}}}function wb(r){let e,t=r[45].name+"",n,i,s=r[45].symbol+"",a,o,u;return{c(){e=K("option"),n=dt(t),i=dt(" ["),a=dt(s),o=dt("]"),e.__value=u=r[45],e.value=e.__value},m(l,c){Di(l,e,c),R(e,n),R(e,i),R(e,a),R(e,o)},p(l,c){c[0]&1&&t!==(t=l[45].name+"")&&Bf(n,t),c[0]&1&&s!==(s=l[45].symbol+"")&&Bf(a,s),c[0]&1&&u!==(u=l[45])&&(e.__value=u,e.value=e.__value)},d(l){l&&qn(e)}}}function uA(r){let e,t,n,i,s,a,o,u,l,c,p,h,_,y,w,M,P,N,F,X,V,he,G,j,Ce,Ie,B,A,E,H,C,Z,d,f,m,g,T,v,k,D,O,S,I,me,se,re,Se,U,Me,Ae,tt,Dr,Ue,Fe,Op,Hi,Sa,Sp,fr,Da,Dp,Qn,Ra,Rp,qt,Ma,Mp,Qr,zi,xa,xp,Xr,Aa,Ap,Ki,Cu,Cp,Ca,Pp,Vi,Pu,Np,Pa,Ip,Xn,Tn,Fp,Na,Lp,Qi,Nu,Up,Zn=r[20],gt=[];for(let Y=0;Y<Zn.length;Y+=1)gt[Y]=Eb(vb(r,Zn,Y));let Jn=r[0],yt=[];for(let Y=0;Y<Jn.length;Y+=1)yt[Y]=wb(_b(r,Jn,Y));return{c(){e=K("div"),t=K("form"),n=K("div"),i=K("label"),i.innerHTML='Descrip<span class="accesskey">t</span>ion',s=de(),a=K("textarea"),u=de(),l=K("div"),c=K("label"),p=dt("Priority"),_=de();for(let Y=0;Y<gt.length;Y+=1)gt[Y].c();y=de(),w=K("div"),M=K("label"),M.textContent="Recurs",P=de(),N=K("input"),X=de(),V=K("code"),he=dt(r[16]),G=de(),j=new Un(!1),Ce=de(),Ie=K("label"),Ie.textContent="Due",B=de(),A=K("input"),H=de(),C=K("code"),Z=dt(r[19]),d=de(),f=new Un(!1),m=de(),g=K("label"),g.textContent="Scheduled",T=de(),v=K("input"),D=de(),O=K("code"),S=dt(r[18]),I=de(),me=new Un(!1),se=de(),re=K("label"),re.innerHTML='St<span class="accesskey">a</span>rt',Se=de(),U=K("input"),Ae=de(),tt=K("code"),Dr=dt(r[17]),Ue=de(),Fe=new Un(!1),Op=de(),Hi=K("div"),Sa=K("label"),Sa.innerHTML=`Only
                    <span class="accesskey-first">future</span> dates:`,Sp=de(),fr=K("input"),Dp=de(),Qn=K("div"),Ra=K("label"),Ra.innerHTML='Stat<span class="accesskey">u</span>s',Rp=de(),qt=K("select");for(let Y=0;Y<yt.length;Y+=1)yt[Y].c();Mp=de(),Qr=K("div"),zi=K("div"),xa=K("label"),xa.textContent="Completed:",xp=de(),Xr=K("input"),Ap=de(),Ki=K("div"),Cu=K("span"),Cu.textContent="Created on:",Cp=de(),Ca=K("code"),Pp=de(),Vi=K("div"),Pu=K("span"),Pu.textContent="Done on:",Np=de(),Pa=K("code"),Ip=de(),Xn=K("div"),Tn=K("button"),Fp=dt("Apply"),Lp=de(),Qi=K("button"),Qi.textContent="Cancel",L(i,"for","description"),L(a,"id","description"),L(a,"class","tasks-modal-description"),L(a,"placeholder","Take out the trash"),L(a,"accesskey",o=r[15]("t")),L(n,"class","tasks-modal-section"),L(c,"for",h="priority-"+r[1].priority),L(l,"class","tasks-modal-section tasks-modal-priorities"),L(M,"for","recurrence"),L(M,"class","accesskey-first"),L(N,"id","recurrence"),L(N,"type","text"),L(N,"placeholder","Try 'every 2 weeks on Thursday'."),L(N,"accesskey",F=r[15]("r")),lr(N,"tasks-modal-error",!r[8]),j.a=null,L(Ie,"for","due"),L(Ie,"class","accesskey-first"),L(A,"id","due"),L(A,"type","text"),L(A,"placeholder",Kf),L(A,"accesskey",E=r[15]("d")),lr(A,"tasks-modal-error",!r[7]),f.a=null,L(g,"for","scheduled"),L(g,"class","accesskey-first"),L(v,"id","scheduled"),L(v,"type","text"),L(v,"placeholder",Kf),L(v,"accesskey",k=r[15]("s")),lr(v,"tasks-modal-error",!r[5]),me.a=null,L(re,"for","start"),L(U,"id","start"),L(U,"type","text"),L(U,"placeholder",Kf),L(U,"accesskey",Me=r[15]("a")),lr(U,"tasks-modal-error",!r[3]),Fe.a=null,L(Sa,"for","forwardOnly"),L(fr,"id","forwardOnly"),L(fr,"type","checkbox"),L(fr,"class","task-list-item-checkbox tasks-modal-checkbox"),L(fr,"accesskey",Da=r[15]("f")),L(w,"class","tasks-modal-section tasks-modal-dates"),L(Ra,"for","status"),L(qt,"id","status-type"),L(qt,"class","dropdown"),L(qt,"accesskey",Ma=r[15]("u")),r[1].status===void 0&&ma(()=>r[39].call(qt)),L(Qn,"class","tasks-modal-section"),L(xa,"for","status"),L(Xr,"id","status"),L(Xr,"type","checkbox"),L(Xr,"class","task-list-item-checkbox tasks-modal-checkbox"),Xr.checked=Aa=r[1].status.isCompleted(),Xr.disabled=!0,L(Qr,"class","tasks-modal-section tasks-modal-status"),Tn.disabled=Na=!r[14],L(Tn,"type","submit"),L(Tn,"class","mod-cta"),L(Qi,"type","button"),L(Xn,"class","tasks-modal-section tasks-modal-buttons"),lr(t,"with-accesskeys",r[9]),L(e,"class","tasks-modal")},m(Y,fe){Di(Y,e,fe),R(e,t),R(t,n),R(n,i),R(n,s),R(n,a),ur(a,r[1].description),r[31](a),R(t,u),R(t,l),R(l,c),R(c,p),R(l,_);for(let le=0;le<gt.length;le+=1)gt[le]&&gt[le].m(l,null);R(t,y),R(t,w),R(w,M),R(w,P),R(w,N),ur(N,r[1].recurrenceRule),R(w,X),R(w,V),R(V,he),R(V,G),j.m(r[12],V),R(w,Ce),R(w,Ie),R(w,B),R(w,A),ur(A,r[1].dueDate),R(w,H),R(w,C),R(C,Z),R(C,d),f.m(r[6],C),R(w,m),R(w,g),R(w,T),R(w,v),ur(v,r[1].scheduledDate),R(w,D),R(w,O),R(O,S),R(O,I),me.m(r[4],O),R(w,se),R(w,re),R(w,Se),R(w,U),ur(U,r[1].startDate),R(w,Ae),R(w,tt),R(tt,Dr),R(tt,Ue),Fe.m(r[2],tt),R(w,Op),R(w,Hi),R(Hi,Sa),R(Hi,Sp),R(Hi,fr),fr.checked=r[1].forwardOnly,R(t,Dp),R(t,Qn),R(Qn,Ra),R(Qn,Rp),R(Qn,qt);for(let le=0;le<yt.length;le+=1)yt[le]&&yt[le].m(qt,null);Hf(qt,r[1].status,!0),R(t,Mp),R(t,Qr),R(Qr,zi),R(zi,xa),R(zi,xp),R(zi,Xr),R(Qr,Ap),R(Qr,Ki),R(Ki,Cu),R(Ki,Cp),R(Ki,Ca),Ca.innerHTML=r[11],R(Qr,Pp),R(Qr,Vi),R(Vi,Pu),R(Vi,Np),R(Vi,Pa),Pa.innerHTML=r[13],R(t,Ip),R(t,Xn),R(Xn,Tn),R(Tn,Fp),R(Xn,Lp),R(Xn,Qi),Nu||(Up=[Et(a,"input",r[30]),Et(a,"keydown",r[23]),Et(a,"paste",r[24]),Et(a,"drop",r[24]),Et(l,"keyup",r[21]),Et(N,"input",r[34]),Et(A,"input",r[35]),Et(v,"input",r[36]),Et(U,"input",r[37]),Et(fr,"change",r[38]),Et(qt,"change",r[39]),Et(Qi,"click",r[22]),Et(t,"submit",hb(r[25]))],Nu=!0)},p(Y,fe){if(fe[0]&32768&&o!==(o=Y[15]("t"))&&L(a,"accesskey",o),fe[0]&3&&ur(a,Y[1].description),fe[0]&3&&h!==(h="priority-"+Y[1].priority)&&L(c,"for",h),fe[0]&1081346){Zn=Y[20];let le;for(le=0;le<Zn.length;le+=1){let Xi=vb(Y,Zn,le);gt[le]?gt[le].p(Xi,fe):(gt[le]=Eb(Xi),gt[le].c(),gt[le].m(l,null))}for(;le<gt.length;le+=1)gt[le].d(1);gt.length=Zn.length}if(fe[0]&32768&&F!==(F=Y[15]("r"))&&L(N,"accesskey",F),fe[0]&3&&N.value!==Y[1].recurrenceRule&&ur(N,Y[1].recurrenceRule),fe[0]&256&&lr(N,"tasks-modal-error",!Y[8]),fe[0]&4096&&j.p(Y[12]),fe[0]&32768&&E!==(E=Y[15]("d"))&&L(A,"accesskey",E),fe[0]&3&&A.value!==Y[1].dueDate&&ur(A,Y[1].dueDate),fe[0]&128&&lr(A,"tasks-modal-error",!Y[7]),fe[0]&64&&f.p(Y[6]),fe[0]&32768&&k!==(k=Y[15]("s"))&&L(v,"accesskey",k),fe[0]&3&&v.value!==Y[1].scheduledDate&&ur(v,Y[1].scheduledDate),fe[0]&32&&lr(v,"tasks-modal-error",!Y[5]),fe[0]&16&&me.p(Y[4]),fe[0]&32768&&Me!==(Me=Y[15]("a"))&&L(U,"accesskey",Me),fe[0]&3&&U.value!==Y[1].startDate&&ur(U,Y[1].startDate),fe[0]&8&&lr(U,"tasks-modal-error",!Y[3]),fe[0]&4&&Fe.p(Y[2]),fe[0]&32768&&Da!==(Da=Y[15]("f"))&&L(fr,"accesskey",Da),fe[0]&3&&(fr.checked=Y[1].forwardOnly),fe[0]&1){Jn=Y[0];let le;for(le=0;le<Jn.length;le+=1){let Xi=_b(Y,Jn,le);yt[le]?yt[le].p(Xi,fe):(yt[le]=wb(Xi),yt[le].c(),yt[le].m(qt,null))}for(;le<yt.length;le+=1)yt[le].d(1);yt.length=Jn.length}fe[0]&32768&&Ma!==(Ma=Y[15]("u"))&&L(qt,"accesskey",Ma),fe[0]&3&&Hf(qt,Y[1].status),fe[0]&3&&Aa!==(Aa=Y[1].status.isCompleted())&&(Xr.checked=Aa),fe[0]&2048&&(Ca.innerHTML=Y[11]),fe[0]&8192&&(Pa.innerHTML=Y[13]),fe[0]&16384&&Na!==(Na=!Y[14])&&(Tn.disabled=Na),fe[0]&512&&lr(t,"with-accesskeys",Y[9])},i:Hr,o:Hr,d(Y){Y&&qn(e),r[31](null),jf(gt,Y),jf(yt,Y),Nu=!1,Wn(Up)}}}var Kf="Try 'Monday' or 'tomorrow', or [td|tm|yd|tw|nw|we] then space.";function lA(r,e,t){let n;var i;let{task:s}=e,{onSubmit:a}=e,{statusOptions:o}=e,{prioritySymbols:u,recurrenceSymbol:l,startDateSymbol:c,scheduledDateSymbol:p,dueDateSymbol:h}=Yr.tasksPluginEmoji.taskSerializer.symbols,_,y={description:"",status:te.TODO,priority:"none",recurrenceRule:"",createdDate:"",startDate:"",scheduledDate:"",dueDate:"",doneDate:"",forwardOnly:!0},w=!0,M="",P="",N=!0,F="",X=!0,V="",he=!0,G="",j=!0,Ce="",Ie=!1,B=!0,A=!0,E=[{value:"lowest",label:"Lowest",symbol:u.Lowest,accessKey:"o",accessKeyIndex:1},{value:"low",label:"Low",symbol:u.Low,accessKey:"l",accessKeyIndex:0},{value:"none",label:"Normal",symbol:u.None,accessKey:"n",accessKeyIndex:0},{value:"medium",label:"Medium",symbol:u.Medium,accessKey:"m",accessKeyIndex:0},{value:"high",label:"High",symbol:u.High,accessKey:"h",accessKeyIndex:0},{value:"highest",label:"Highest",symbol:u.Highest,accessKey:"i",accessKeyIndex:1}];function H(U,Me,Ae=void 0){if(!Me)return`<i>no ${U} date</i>`;let tt=Vf.parseDate(Me,Ae,{forwardDate:Ae!=null});return tt!==null?window.moment(tt).format("YYYY-MM-DD"):`<i>invalid ${U} date</i>`}function C(U,Me){return H(U,Me,y.forwardOnly?new Date:void 0)}function Z(U){let Me=null,Ae=Vf.parseDate(U,new Date,{forwardDate:y.forwardOnly});return Ae!==null&&(Me=window.moment(Ae)),Me}zf(()=>{let{provideAccessKeys:U}=Q();t(9,B=U);let Me=ge.getInstance().removeAsWordFrom(s.description);(Me!=s.description||!ge.getInstance().includedIn(s.description))&&(Ie=!0);let Ae="none";s.priority==="5"?Ae="lowest":s.priority==="4"?Ae="low":s.priority==="2"?Ae="medium":s.priority==="1"?Ae="high":s.priority==="0"&&(Ae="highest"),t(1,y={description:Me,status:s.status,priority:Ae,recurrenceRule:s.recurrence?s.recurrence.toText():"",createdDate:new vt(s.createdDate).formatAsDate(),startDate:new vt(s.startDate).formatAsDate(),scheduledDate:new vt(s.scheduledDate).formatAsDate(),dueDate:new vt(s.dueDate).formatAsDate(),doneDate:new vt(s.doneDate).formatAsDate(),forwardOnly:!0}),setTimeout(()=>{_.focus()},10)});let d=U=>{if(U.key&&!U.altKey&&!U.ctrlKey){let Me=E.find(Ae=>Ae.label.charAt(0).toLowerCase()==U.key);Me&&t(1,y.priority=Me.value,y)}},f=()=>{a([])},m=U=>{U.key==="Enter"&&(U.preventDefault(),A&&T())},g=()=>{setTimeout(()=>{t(1,y.description=y.description.replace(/[\r\n]+/g," "),y)},0)},T=()=>{let U=y.description.trim();Ie&&(U=ge.getInstance().prependTo(U));let Me=Z(y.startDate),Ae=Z(y.scheduledDate),tt=Z(y.dueDate),Dr=null;y.recurrenceRule&&(Dr=Ze.fromText({recurrenceRuleText:y.recurrenceRule,startDate:Me,scheduledDate:Ae,dueDate:tt}));let Ue;switch(y.priority){case"lowest":Ue="5";break;case"low":Ue="4";break;case"medium":Ue="2";break;case"high":Ue="1";break;case"highest":Ue="0";break;default:Ue="3"}let Fe=new ye(Object.assign(Object.assign({},s),{description:U,status:y.status,priority:Ue,recurrence:Dr,startDate:Me,scheduledDate:Ae,dueDate:tt,doneDate:window.moment(y.doneDate,"YYYY-MM-DD").isValid()?window.moment(y.doneDate,"YYYY-MM-DD"):null}));a([Fe])},v=[[]];function k(){y.description=this.value,t(1,y),t(6,V),t(2,P),t(4,F),t(0,o)}function D(U){$o[U?"unshift":"push"](()=>{_=U,t(10,_)})}function O(){y.priority=this.__value,t(1,y),t(6,V),t(2,P),t(4,F),t(0,o)}function S(){y.recurrenceRule=this.value,t(1,y),t(6,V),t(2,P),t(4,F),t(0,o)}function I(){y.dueDate=this.value,t(1,y),t(6,V),t(2,P),t(4,F),t(0,o)}function me(){y.scheduledDate=this.value,t(1,y),t(6,V),t(2,P),t(4,F),t(0,o)}function se(){y.startDate=this.value,t(1,y),t(6,V),t(2,P),t(4,F),t(0,o)}function re(){y.forwardOnly=this.checked,t(1,y),t(6,V),t(2,P),t(4,F),t(0,o)}function Se(){y.status=gb(this),t(1,y),t(6,V),t(2,P),t(4,F),t(0,o)}return r.$$set=U=>{"task"in U&&t(26,s=U.task),"onSubmit"in U&&t(27,a=U.onSubmit),"statusOptions"in U&&t(0,o=U.statusOptions)},r.$$.update=()=>{if(r.$$.dirty[0]&512){e:t(15,n=U=>B?U:null)}if(r.$$.dirty[0]&66){e:t(1,y.dueDate=gi(y.dueDate),y),t(6,V=C("due",y.dueDate)),t(7,he=!V.includes("invalid"))}if(r.$$.dirty[0]&6){e:t(1,y.startDate=gi(y.startDate),y),t(2,P=C("start",y.startDate)),t(3,N=!P.includes("invalid"))}if(r.$$.dirty[0]&18){e:t(1,y.scheduledDate=gi(y.scheduledDate),y),t(4,F=C("scheduled",y.scheduledDate)),t(5,X=!F.includes("invalid"))}if(r.$$.dirty[0]&268435458){e:if(t(8,j=!0),!y.recurrenceRule)t(12,G="<i>not recurring</>");else{let U=t(28,i=Ze.fromText({recurrenceRuleText:y.recurrenceRule,startDate:null,scheduledDate:null,dueDate:null}))===null||i===void 0?void 0:i.toText();U?t(12,G=U):(t(12,G="<i>invalid recurrence rule</i>"),t(8,j=!1))}}if(r.$$.dirty[0]&2){e:t(29,w=y.description.trim()!=="")}if(r.$$.dirty[0]&536871336){e:t(14,A=he&&j&&X&&N&&w)}if(r.$$.dirty[0]&2){e:t(11,M=H("created",y.createdDate)),t(13,Ce=H("done",y.doneDate))}},[o,y,P,N,F,X,V,he,j,B,_,M,G,Ce,A,n,l,c,p,h,E,d,f,m,g,T,s,a,i,w,k,D,O,v,S,I,me,se,re,Se]}var Qf=class extends Yo{constructor(e){super(),bb(this,e,lA,uA,cb,{task:26,onSubmit:27,statusOptions:0},null,[-1,-1])}},kb=Qf;var dn=class extends Ob.Modal{constructor({app:t,task:n,onSubmit:i}){super(t);this.task=n,this.onSubmit=s=>{s.length&&i(s),this.close()}}onOpen(){this.titleEl.setText("Create or edit Task");let{contentEl:t}=this,n=this.getKnownStatusesAndCurrentTaskStatusIfNotKnown();new kb({target:t,props:{task:this.task,statusOptions:n,onSubmit:this.onSubmit}})}getKnownStatusesAndCurrentTaskStatusIfNotKnown(){let t=De.getInstance().registeredStatuses;return De.getInstance().bySymbol(this.task.status.symbol)===te.EMPTY&&t.push(this.task.status),t}onClose(){let{contentEl:t}=this;t.empty()}};function cA(){let{setCreatedDate:r}=Q();return r?window.moment():null}function dA(r){let{setCreatedDate:e}=Q();if(!e||r.createdDate!==null)return!1;let t=r.description==="",n=!ge.getInstance().isEmpty(),i=!ge.getInstance().includedIn(r.description);return t||n&&i}var Go=({line:r,path:e})=>{var h,_;let t=ye.parseTaskSignifiers(r,ot.fromUnknownPosition(e),Rt.fromPath(e)),n=cA();if(t!==null)return dA(t)?new ye(Tt(pe({},t),{createdDate:n})):t;let i=r.match(z.nonTaskRegex);if(i===null)return console.error("Tasks: Cannot create task on line:",r),new ye({status:te.TODO,description:"",taskLocation:ot.fromUnknownPosition(e),indentation:"",listMarker:"-",priority:"3",createdDate:n,startDate:null,scheduledDate:null,dueDate:null,doneDate:null,recurrence:null,blockLink:"",tags:[],originalMarkdown:"",scheduledDateIsInferred:!1});let s=i[1],a=(h=i[2])!=null?h:"-",o=(_=i[4])!=null?_:" ",u=De.getInstance().bySymbolOrCreate(o),l=i[5],c=r.match(z.blockLinkRegex),p=c!==null?c[0]:"";return p!==""&&(l=l.replace(z.blockLinkRegex,"")),new ye({status:u,description:l,taskLocation:ot.fromUnknownPosition(e),indentation:s,listMarker:a,blockLink:p,priority:"3",createdDate:n,startDate:null,scheduledDate:null,dueDate:null,doneDate:null,recurrence:null,tags:[],originalMarkdown:"",scheduledDateIsInferred:!1})};var Sb=(r,e,t,n)=>{var p;if(r)return t instanceof Xf.MarkdownView;if(!(t instanceof Xf.MarkdownView))return;let i=(p=t.file)==null?void 0:p.path;if(i===void 0)return;let a=e.getCursor().line,o=e.getLine(a),u=Go({line:o,path:i}),l=h=>{let _=Rt.removeInferredStatusIfNeeded(u,h).map(y=>y.toFileLineString()).join(`
`);e.setLine(a,_)};new dn({app:n,task:u,onSubmit:l}).open()};var Zf=require("obsidian");var Db=(r,e,t)=>{var u;if(r)return t instanceof Zf.MarkdownView;if(!(t instanceof Zf.MarkdownView))return;let n=(u=t.file)==null?void 0:u.path;if(n===void 0)return;let i=e.getCursor(),s=i.line,a=e.getLine(s),o=fA(a,n);e.setLine(s,o.text),e.setCursor(pA(i,o))},fA=(r,e)=>{let t=ye.fromLine({line:r,taskLocation:ot.fromUnknownPosition(e),fallbackDate:null});if(t!==null){let n=t.toggleWithRecurrenceInUsersOrder().map(i=>i.toFileLineString());return{text:n.join(`
`),moveTo:{line:n.length-1}}}else{let n=r.match(z.taskRegex);if(n!==null){let i=n[3],a=De.getInstance().bySymbol(i).nextStatusSymbol;return{text:r.replace(z.taskRegex,`$1- [${a}] $4`)}}else if(z.listItemRegex.test(r)){let i=r.replace(z.listItemRegex,"$1$2 [ ]");return{text:i,moveTo:{ch:i.length}}}else{let i=r.replace(z.indentationRegex,"$1- ");return{text:i,moveTo:{ch:i.length}}}}},pA=(r,e)=>{var s;let t={line:0,ch:r.ch},n=pe(pe({},t),(s=e.moveTo)!=null?s:{}),i=e.text.split(`
`)[n.line].length;return{line:r.line+n.line,ch:Math.min(n.ch,i)}};var jo=class{get app(){return this.plugin.app}constructor({plugin:e}){this.plugin=e,e.addCommand({id:"edit-task",name:"Create or edit task",icon:"pencil",editorCheckCallback:(t,n,i)=>Sb(t,n,i,this.app)}),e.addCommand({id:"toggle-done",name:"Toggle task done",icon:"check-in-circle",editorCheckCallback:Db})}};var hA=Object.prototype.toString,Mi=Array.isArray||function(e){return hA.call(e)==="[object Array]"};function ep(r){return typeof r=="function"}function mA(r){return Mi(r)?"array":typeof r}function Jf(r){return r.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function Rb(r,e){return r!=null&&typeof r=="object"&&e in r}function gA(r,e){return r!=null&&typeof r!="object"&&r.hasOwnProperty&&r.hasOwnProperty(e)}var yA=RegExp.prototype.test;function TA(r,e){return yA.call(r,e)}var bA=/\S/;function _A(r){return!TA(bA,r)}var vA={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function EA(r){return String(r).replace(/[&<>"'`=\/]/g,function(t){return vA[t]})}var wA=/\s*/,kA=/\s+/,Mb=/\s*=/,OA=/\s*\}/,SA=/#|\^|\/|>|\{|&|=|!/;function DA(r,e){if(!r)return[];var t=!1,n=[],i=[],s=[],a=!1,o=!1,u="",l=0;function c(){if(a&&!o)for(;s.length;)delete i[s.pop()];else s=[];a=!1,o=!1}var p,h,_;function y(j){if(typeof j=="string"&&(j=j.split(kA,2)),!Mi(j)||j.length!==2)throw new Error("Invalid tags: "+j);p=new RegExp(Jf(j[0])+"\\s*"),h=new RegExp("\\s*"+Jf(j[1])),_=new RegExp("\\s*"+Jf("}"+j[1]))}y(e||Xt.tags);for(var w=new ya(r),M,P,N,F,X,V;!w.eos();){if(M=w.pos,N=w.scanUntil(p),N)for(var he=0,G=N.length;he<G;++he)F=N.charAt(he),_A(F)?(s.push(i.length),u+=F):(o=!0,t=!0,u+=" "),i.push(["text",F,M,M+1]),M+=1,F===`
`&&(c(),u="",l=0,t=!1);if(!w.scan(p))break;if(a=!0,P=w.scan(SA)||"name",w.scan(wA),P==="="?(N=w.scanUntil(Mb),w.scan(Mb),w.scanUntil(h)):P==="{"?(N=w.scanUntil(_),w.scan(OA),w.scanUntil(h),P="&"):N=w.scanUntil(h),!w.scan(h))throw new Error("Unclosed tag at "+w.pos);if(P==">"?X=[P,N,M,w.pos,u,l,t]:X=[P,N,M,w.pos],l++,i.push(X),P==="#"||P==="^")n.push(X);else if(P==="/"){if(V=n.pop(),!V)throw new Error('Unopened section "'+N+'" at '+M);if(V[1]!==N)throw new Error('Unclosed section "'+V[1]+'" at '+M)}else P==="name"||P==="{"||P==="&"?o=!0:P==="="&&y(N)}if(c(),V=n.pop(),V)throw new Error('Unclosed section "'+V[1]+'" at '+w.pos);return MA(RA(i))}function RA(r){for(var e=[],t,n,i=0,s=r.length;i<s;++i)t=r[i],t&&(t[0]==="text"&&n&&n[0]==="text"?(n[1]+=t[1],n[3]=t[3]):(e.push(t),n=t));return e}function MA(r){for(var e=[],t=e,n=[],i,s,a=0,o=r.length;a<o;++a)switch(i=r[a],i[0]){case"#":case"^":t.push(i),n.push(i),t=i[4]=[];break;case"/":s=n.pop(),s[5]=i[2],t=n.length>0?n[n.length-1][4]:e;break;default:t.push(i)}return e}function ya(r){this.string=r,this.tail=r,this.pos=0}ya.prototype.eos=function(){return this.tail===""};ya.prototype.scan=function(e){var t=this.tail.match(e);if(!t||t.index!==0)return"";var n=t[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n};ya.prototype.scanUntil=function(e){var t=this.tail.search(e),n;switch(t){case-1:n=this.tail,this.tail="";break;case 0:n="";break;default:n=this.tail.substring(0,t),this.tail=this.tail.substring(t)}return this.pos+=n.length,n};function Ri(r,e){this.view=r,this.cache={".":this.view},this.parent=e}Ri.prototype.push=function(e){return new Ri(e,this)};Ri.prototype.lookup=function(e){var t=this.cache,n;if(t.hasOwnProperty(e))n=t[e];else{for(var i=this,s,a,o,u=!1;i;){if(e.indexOf(".")>0)for(s=i.view,a=e.split("."),o=0;s!=null&&o<a.length;)o===a.length-1&&(u=Rb(s,a[o])||gA(s,a[o])),s=s[a[o++]];else s=i.view[e],u=Rb(i.view,e);if(u){n=s;break}i=i.parent}t[e]=n}return ep(n)&&(n=n.call(this.view)),n};function wt(){this.templateCache={_cache:{},set:function(e,t){this._cache[e]=t},get:function(e){return this._cache[e]},clear:function(){this._cache={}}}}wt.prototype.clearCache=function(){typeof this.templateCache!="undefined"&&this.templateCache.clear()};wt.prototype.parse=function(e,t){var n=this.templateCache,i=e+":"+(t||Xt.tags).join(":"),s=typeof n!="undefined",a=s?n.get(i):void 0;return a==null&&(a=DA(e,t),s&&n.set(i,a)),a};wt.prototype.render=function(e,t,n,i){var s=this.getConfigTags(i),a=this.parse(e,s),o=t instanceof Ri?t:new Ri(t,void 0);return this.renderTokens(a,o,n,e,i)};wt.prototype.renderTokens=function(e,t,n,i,s){for(var a="",o,u,l,c=0,p=e.length;c<p;++c)l=void 0,o=e[c],u=o[0],u==="#"?l=this.renderSection(o,t,n,i,s):u==="^"?l=this.renderInverted(o,t,n,i,s):u===">"?l=this.renderPartial(o,t,n,s):u==="&"?l=this.unescapedValue(o,t):u==="name"?l=this.escapedValue(o,t,s):u==="text"&&(l=this.rawValue(o)),l!==void 0&&(a+=l);return a};wt.prototype.renderSection=function(e,t,n,i,s){var a=this,o="",u=t.lookup(e[1]);function l(h){return a.render(h,t,n,s)}if(!!u){if(Mi(u))for(var c=0,p=u.length;c<p;++c)o+=this.renderTokens(e[4],t.push(u[c]),n,i,s);else if(typeof u=="object"||typeof u=="string"||typeof u=="number")o+=this.renderTokens(e[4],t.push(u),n,i,s);else if(ep(u)){if(typeof i!="string")throw new Error("Cannot use higher-order sections without the original template");u=u.call(t.view,i.slice(e[3],e[5]),l),u!=null&&(o+=u)}else o+=this.renderTokens(e[4],t,n,i,s);return o}};wt.prototype.renderInverted=function(e,t,n,i,s){var a=t.lookup(e[1]);if(!a||Mi(a)&&a.length===0)return this.renderTokens(e[4],t,n,i,s)};wt.prototype.indentPartial=function(e,t,n){for(var i=t.replace(/[^ \t]/g,""),s=e.split(`
`),a=0;a<s.length;a++)s[a].length&&(a>0||!n)&&(s[a]=i+s[a]);return s.join(`
`)};wt.prototype.renderPartial=function(e,t,n,i){if(!!n){var s=this.getConfigTags(i),a=ep(n)?n(e[1]):n[e[1]];if(a!=null){var o=e[6],u=e[5],l=e[4],c=a;u==0&&l&&(c=this.indentPartial(a,l,o));var p=this.parse(c,s);return this.renderTokens(p,t,n,c,i)}}};wt.prototype.unescapedValue=function(e,t){var n=t.lookup(e[1]);if(n!=null)return n};wt.prototype.escapedValue=function(e,t,n){var i=this.getConfigEscape(n)||Xt.escape,s=t.lookup(e[1]);if(s!=null)return typeof s=="number"&&i===Xt.escape?String(s):i(s)};wt.prototype.rawValue=function(e){return e[1]};wt.prototype.getConfigTags=function(e){return Mi(e)?e:e&&typeof e=="object"?e.tags:void 0};wt.prototype.getConfigEscape=function(e){if(e&&typeof e=="object"&&!Mi(e))return e.escape};var Xt={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(r){ga.templateCache=r},get templateCache(){return ga.templateCache}},ga=new wt;Xt.clearCache=function(){return ga.clearCache()};Xt.parse=function(e,t){return ga.parse(e,t)};Xt.render=function(e,t,n,i){if(typeof e!="string")throw new TypeError('Invalid template! Template should be a "string" but "'+mA(e)+'" was given as the first argument for mustache#render(template, view, partials)');return ga.render(e,t,n,i)};Xt.escape=EA;Xt.Scanner=ya;Xt.Context=Ri;Xt.Writer=wt;var tp=Xt;var Nb=Ji(Pb());function Ib(r,e){tp.escape=function(t){return t};try{return tp.render(r,(0,Nb.default)(e))}catch(t){let n="";throw t instanceof Error?n=`There was an error expanding one or more placeholders.

The error message was:
    ${t.message.replace(/ > /g,".").replace("Missing Mustache data property","Unknown property")}`:n="Unknown error expanding placeholders.",n+=`

The problem is in:
    ${r}`,Error(n)}}function Fb(r){return{query:{file:new Ei(r)}}}function $n(r,e){let t=`Error: ${r}.
The error message was:
    `,n="";return e instanceof Error?n+=e:n+="Unknown error",`${t}"${n}"`}var zr=class{constructor(e,t,n){this.property=e,this.comparator=zr.maybeReverse(n,t)}static maybeReverse(e,t){return e?zr.makeReversedComparator(t):t}static makeReversedComparator(e){return(t,n)=>e(t,n)*-1}};var fn=class{constructor(e,t,n){this.property=e,this.grouper=t,this.reverse=n}};var we=class{canCreateFilterForLine(e){return we.lineMatchesFilter(this.filterRegExp(),e)}static lineMatchesFilter(e,t){return e?e.test(t):!1}static getMatch(e,t){return e?t.match(e):null}fieldNameSingular(){return this.fieldName()}fieldNameSingularEscaped(){return Lo(this.fieldNameSingular())}supportsSorting(){return!1}createSorterFromLine(e){if(!this.supportsSorting())return null;let t=we.getMatch(this.sorterRegExp(),e);if(t===null)return null;let n=!!t[1];return this.createSorter(n)}sorterRegExp(){if(!this.supportsSorting())throw Error(`sorterRegExp() unimplemented for ${this.fieldNameSingular()}`);return new RegExp(`^sort by ${this.fieldNameSingularEscaped()}( reverse)?`)}comparator(){throw Error(`comparator() unimplemented for ${this.fieldNameSingular()}`)}createSorter(e){return new zr(this.fieldNameSingular(),this.comparator(),e)}createNormalSorter(){return this.createSorter(!1)}createReverseSorter(){return this.createSorter(!0)}supportsGrouping(){return!1}createGrouperFromLine(e){if(!this.supportsGrouping())return null;let t=we.getMatch(this.grouperRegExp(),e);if(t===null)return null;let n=!!t[1];return this.createGrouper(n)}grouperRegExp(){if(!this.supportsGrouping())throw Error(`grouperRegExp() unimplemented for ${this.fieldNameSingular()}`);return new RegExp(`^group by ${this.fieldNameSingularEscaped()}( reverse)?$`)}grouper(){throw Error(`grouper() unimplemented for ${this.fieldNameSingular()}`)}createGrouper(e){return new fn(this.fieldNameSingular(),this.grouper(),e)}createNormalGrouper(){return this.createGrouper(!1)}createReverseGrouper(){return this.createGrouper(!0)}};var ke=class{constructor(e,t=[],n=""){this.description=e,this.symbol=n,this.children=t}static booleanAnd(e){return this.combineOrCreateExplanation("All of",e,"AND")}static booleanOr(e){return this.combineOrCreateExplanation("At least one of",e,"OR")}static booleanNot(e){return new ke("None of",e,"NOT")}static booleanXor(e){return new ke("Exactly one of",e,"XOR")}asString(e=""){if(this.children.length==0)return e+this.description;let t=e;this.symbol===""?t+=this.description:(t+=this.symbol,this.children.length>1&&(t+=` (${this.description})`),t+=":");let n=e+"  ";for(let i=0;i<this.children.length;i++)t+=`
${this.children[i].asString(n)}`;return t}static combineOrCreateExplanation(e,t,n){if(t.length===2){let i=t[0],s=t[1];if(i.symbol===n&&s.symbol==="")return i.children.push(s),i}return new ke(e,t,n)}};var ft=class{constructor(e,t,n){this.instruction=e,this.explanation=n,this.filterFunction=t}explainFilterIndented(e){let t=this.explanation;return t.asString()===this.instruction?`${e}${this.instruction}
`:`${e}${this.instruction} =>
${t.asString("  ")}
`}};var vr=class{constructor(e){this.instruction=e}get queryComponent(){return this._queryComponent}set queryComponent(e){this._queryComponent=e}get error(){return this._error}set error(e){this._error=e}static fromObject(e,t){let n=new vr(e);return n._queryComponent=t,n}static fromError(e,t){let n=new vr(e);return n._error=t,n}};var J=class{constructor(e){this.object=e}get instruction(){return this.object.instruction}get filter(){return this.object.queryComponent}get error(){return this.object.error}get filterFunction(){if(this.filter)return this.filter.filterFunction}static fromFilter(e){return new J(vr.fromObject(e.instruction,e))}static fromError(e,t){return new J(vr.fromError(e,t))}};var Bo=class{constructor(e,t){this._instruction=e,this._filter=t}canCreateFilterForLine(e){return e==this._instruction}createFilterOrErrorMessage(e){return e===this._instruction?J.fromFilter(new ft(e,this._filter,new ke(e))):J.fromError(e,`do not understand filter: ${e}`)}};var Er=class{constructor(){this._filters=[]}add(e,t){this._filters.push(new Bo(e,t))}canCreateFilterForLine(e){for(let t of this._filters)if(t.canCreateFilterForLine(e))return!0;return!1}createFilterOrErrorMessage(e){for(let t of this._filters){let n=t.createFilterOrErrorMessage(e);if(n.error===void 0)return n}return J.fromError(e,`do not understand filter: ${e}`)}};var pn=class extends we{constructor(){super(...arguments);this._filters=new Er}canCreateFilterForLine(t){return this._filters.canCreateFilterForLine(t)}createFilterOrErrorMessage(t){return this._filters.createFilterOrErrorMessage(t)}filterRegExp(){return null}};var wr=class extends pn{constructor(){super(),this._filters.add("done",e=>e.isDone),this._filters.add("not done",e=>!e.isDone)}fieldName(){return"status"}supportsSorting(){return!0}comparator(){return(e,t)=>{let n=wr.oldStatusName(e),i=wr.oldStatusName(t);return n<i?1:n>i?-1:0}}static oldStatusName(e){return e.status.symbol===" "?"Todo":"Done"}supportsGrouping(){return!0}grouper(){return e=>[wr.oldStatusName(e)]}};var pt=class extends we{constructor(t=null){super();t!==null?this.filterInstructions=t:(this.filterInstructions=new Er,this.filterInstructions.add(`has ${this.fieldName()} date`,n=>this.date(n)!==null),this.filterInstructions.add(`no ${this.fieldName()} date`,n=>this.date(n)===null),this.filterInstructions.add(`${this.fieldName()} date is invalid`,n=>{let i=this.date(n);return i!==null&&!i.isValid()}))}canCreateFilterForLine(t){return this.filterInstructions.canCreateFilterForLine(t)?!0:super.canCreateFilterForLine(t)}createFilterOrErrorMessage(t){let n=this.filterInstructions.createFilterOrErrorMessage(t);if(n.filter!==void 0)return n;let i=we.getMatch(this.filterRegExp(),t);if(i===null)return J.fromError(t,"do not understand query filter ("+this.fieldName()+" date)");let s=i[1],a=i[2],o=i[3],u=Ct.parseDateRange(o);if(!u.isValid()){let p=Ct.parseDate(s);p.isValid()&&(u=new _t(p,p))}if(!u.isValid())return J.fromError(t,"do not understand "+this.fieldName()+" date");let l=this.buildFilterFunction(a,u),c=pt.buildExplanation(this.fieldNameForExplanation(),a,this.filterResultIfFieldMissing(),u);return J.fromFilter(new ft(t,l,c))}buildFilterFunction(t,n){let i;switch(t){case"before":i=s=>s?s.isBefore(n.start):this.filterResultIfFieldMissing();break;case"after":i=s=>s?s.isAfter(n.end):this.filterResultIfFieldMissing();break;case"on or before":case"in or before":i=s=>s?s.isSameOrBefore(n.end):this.filterResultIfFieldMissing();break;case"on or after":case"in or after":i=s=>s?s.isSameOrAfter(n.start):this.filterResultIfFieldMissing();break;default:i=s=>s?s.isSameOrAfter(n.start)&&s.isSameOrBefore(n.end):this.filterResultIfFieldMissing()}return this.getFilter(i)}getFilter(t){return n=>t(this.date(n))}filterRegExp(){return new RegExp(`^${this.fieldNameForFilterInstruction()} (((?:on|in) or before|before|(?:on|in) or after|after|on|in)? ?(.*))`)}fieldNameForFilterInstruction(){return this.fieldName()}static buildExplanation(t,n,i,s){let a=n,o="YYYY-MM-DD (dddd Do MMMM YYYY)",u;switch(n){case"before":case"on or after":u=s.start.format(o);break;case"after":case"on or before":u=s.end.format(o);break;case"in or before":a="on or before",u=s.end.format(o);break;case"in or after":a="on or after",u=s.start.format(o);break;default:if(!s.start.isSame(s.end)){let c=`${t} date is between:`,p=[new ke(`${s.start.format(o)} and`),new ke(`${s.end.format(o)} inclusive`)];return i&&p.push(new ke(`OR no ${t} date`)),new ke(c,p)}a="on",u=s.start.format(o);break}let l=`${t} date is ${a} ${u}`;return i&&(l+=` OR no ${t} date`),new ke(l)}fieldNameForExplanation(){return this.fieldName()}supportsSorting(){return!0}comparator(){return(t,n)=>$r(this.date(t),this.date(n))}supportsGrouping(){return!0}grouper(){return t=>{let n=this.date(t);return n===null?["No "+this.fieldName()+" date"]:[n.format("YYYY-MM-DD dddd")]}}};var xi=class extends pt{fieldName(){return"due"}date(e){return e.dueDate}filterResultIfFieldMissing(){return!1}};var np=class extends we{createFilterOrErrorMessage(e){let t=we.getMatch(this.filterRegExp(),e);if(t!==null){let n=t[5],i=null;switch(n){case"lowest":i="5";break;case"low":i="4";break;case"none":i="3";break;case"medium":i="2";break;case"high":i="1";break;case"highest":i="0";break}if(i===null)return J.fromError(e,"do not understand priority");let s=e,a;switch(t[3]){case"above":a=o=>o.priority.localeCompare(i)<0;break;case"below":a=o=>o.priority.localeCompare(i)>0;break;case"not":a=o=>o.priority!==i;break;default:a=o=>o.priority===i,s=`${this.fieldName()} is ${n}`}return J.fromFilter(new ft(e,a,new ke(s)))}else return J.fromError(e,"do not understand query filter (priority)")}fieldName(){return"priority"}filterRegExp(){return np.priorityRegexp}supportsSorting(){return!0}comparator(){return(e,t)=>e.priority.localeCompare(t.priority)}supportsGrouping(){return!0}grouper(){return e=>[e.priorityNameGroupText]}},Yn=np;Yn.priorityRegexp=/^priority(\s+is)?(\s+(above|below|not))?(\s+(lowest|low|none|medium|high|highest))$/;var Ai=class{matchesAnyOf(e){return e.some(t=>this.matches(t))}};var Ci=class extends Ai{constructor(t){super();this.stringToFind=t}matches(t){return Ci.stringIncludesCaseInsensitive(t,this.stringToFind)}static stringIncludesCaseInsensitive(t,n){return t.toLocaleLowerCase().includes(n.toLocaleLowerCase())}explanation(t){return new ke(t)}};var hn=class extends Ai{constructor(t){super();this.regex=t}static validateAndConstruct(t){let n=/^\/(.+)\/([^/]*)$/,i=t.match(n);if(i!==null){let s=new RegExp(i[1],i[2]);return new hn(s)}else return null}matches(t){return t.match(this.regex)!==null}static helpMessage(){return String.raw`See https://publish.obsidian.md/tasks/Queries/Regular+Expressions

Regular expressions must look like this:
    /pattern/
or this:
    /pattern/flags

Where:
- pattern: The 'regular expression' pattern to search for.
- flags:   Optional characters that modify the search.
           i => make the search case-insensitive
           u => add Unicode support

Examples:  /^Log/
           /^Log/i
           /File Name\.md/
           /waiting|waits|waited/i
           /\d\d:\d\d/

The following characters have special meaning in the pattern:
to find them literally, you must add a \ before them:
    [\^$.|?*+()

CAUTION! Regular expression (or 'regex') searching is a powerful
but advanced feature that requires thorough knowledge in order to
use successfully, and not miss intended search results.
`}explanation(t){let i=xA(t,"using regex: ",this.regexAsString());return new ke(i)}regexAsString(){let t=`'${this.regex.source}' with `;switch(this.regex.flags.length){case 0:t+="no flags";break;case 1:t+=`flag '${this.regex.flags}'`;break;default:t+=`flags '${this.regex.flags}'`;break}return t}};function xA(r,e,t){var o;let n=r.match(/\//);if(!n)return"Error explaining instruction. Could not find a slash character";let i=2,s=((o=n.index)!=null?o:i)-i;return`${e.padEnd(s)}${t}`}var xe=class extends we{createFilterOrErrorMessage(e){let t=we.getMatch(this.filterRegExp(),e);if(t===null)return J.fromError(e,`do not understand query filter (${this.fieldName()})`);let[n,i,s]=t,a=null;if(i.includes("include"))a=new Ci(s);else if(i.includes("regex")){try{a=hn.validateAndConstruct(s)}catch(l){let c=$n("Parsing regular expression",l)+`

${hn.helpMessage()}`;return J.fromError(e,c)}if(a===null)return J.fromError(e,`Invalid instruction: '${e}'

${hn.helpMessage()}`)}if(a===null)return J.fromError(e,`do not understand query filter (${this.fieldName()})`);let o=i.match(/not/)!==null,u=new ft(e,this.getFilter(a,o),a.explanation(e));return J.fromFilter(u)}fieldPattern(){return this.fieldNameSingularEscaped()}filterOperatorPattern(){return"includes|does not include|regex matches|regex does not match"}filterRegExp(){return new RegExp(`^(?:${this.fieldPattern()}) (${this.filterOperatorPattern()}) (.*)`)}getFilter(e,t){return n=>{let i=e.matches(this.value(n));return t?!i:i}}comparator(){return(e,t)=>this.value(e).localeCompare(this.value(t),void 0,{numeric:!0})}grouper(){return e=>[this.value(e)]}static escapeMarkdownCharacters(e){return e.replace(/\\/g,"\\\\").replace(/_/g,"\\_")}};var Pi=class extends xe{fieldName(){return"path"}value(e){return e.path}supportsSorting(){return!0}supportsGrouping(){return!0}grouper(){return e=>[xe.escapeMarkdownCharacters(e.path.replace(".md",""))]}};var Ni=class extends we{canCreateFilterForLine(e){return!1}createFilterOrErrorMessage(e){return J.fromError(e,"Filtering by urgency is not yet supported")}fieldName(){return"urgency"}filterRegExp(){throw Error(`filterRegExp() unimplemented for ${this.fieldName()}`)}supportsSorting(){return!0}comparator(){return(e,t)=>t.urgency-e.urgency}supportsGrouping(){return!0}grouper(){return e=>[`${e.urgency.toFixed(2)}`]}createGrouper(e){return super.createGrouper(!e)}};var Ii=class{static by(e,t){let n=[new Ni().comparator(),new wr().comparator(),new xi().comparator(),new Yn().comparator(),new Pi().comparator()],i=[];for(let s of e)i.push(s.comparator);return t.sort(Ii.makeCompositeComparator([...i,...n]))}static makeCompositeComparator(e){return(t,n)=>{for(let i of e){let s=i(t,n);if(s!==0)return s}return 0}}};var Ho=class{constructor(e,t,n){this.nestingLevel=e,this.displayName=t,this.property=n}};var zo=class{constructor(e,t){this.lastHeadingAtLevel=new Array;this.groupers=t;let i=e.keys().next().value.length;for(let s=0;s<i;s++)this.lastHeadingAtLevel.push("")}getHeadingsForTaskGroup(e){let t=new Array;for(let n=0;n<e.length;n++){let i=e[n];if(i!=this.lastHeadingAtLevel[n]){t.push(new Ho(n,i,this.groupers[n].property));for(let s=n;s<e.length;s++)this.lastHeadingAtLevel[s]="";this.lastHeadingAtLevel[n]=i}}return t}};var Ko=class{constructor(e){this.children=new Map;this.values=[];this.values=e}generateAllPaths(e=[]){let t=new Map;if(this.children.size==0)return t.set([...e],this.values),t;for(let[n,i]of this.children)e.push(n),i.generateAllPaths(e).forEach((a,o)=>t.set(o,a)),e.pop();return t}};var Vo=class extends Ko{},Qo=class{constructor(e,t){this.root=new Vo(t),this.buildGroupingTree(e)}buildGroupingTree(e){let t=[this.root];for(let n of e){let i=[];for(let s of t)for(let a of s.values){let o=n.grouper(a);o.length===0&&o.push("");for(let u of o){let l=s.children.get(u);l===void 0&&(l=new Vo([]),s.children.set(u,l),i.push(l)),l.values.push(a)}}t=i}}generateTaskTreeStorage(){return this.root.generateAllPaths()}};var Xo=class{constructor(e,t){this.groups=e,this.groupHeadings=[],this.tasks=t}setGroupHeadings(e){for(let t of e)this.groupHeadings.push(t)}applyTaskLimit(e){this.tasks=this.tasks.slice(0,e)}tasksAsStringOfLines(){let e="";for(let t of this.tasks)e+=t.toFileLineString()+`
`;return e}toString(){let e=`
`;e+=`Group names: [${this.groups}]
`;for(let t of this.groupHeadings)e+=`${"#".repeat(4+t.nestingLevel)} [${t.property}] ${t.displayName}
`;return e+=this.tasksAsStringOfLines(),e}};var Fi=class{constructor(e,t){this._groups=new Array;this._totalTaskCount=0;this._totalTaskCount=t.length,this._groupers=e;let i=new Qo(e,t).generateTaskTreeStorage();this.addTaskGroups(i),this.sortTaskGroups(),this.setGroupsHeadings(i)}get groupers(){return this._groupers}get groups(){return this._groups}totalTasksCount(){return this._totalTaskCount}toString(){let e="";e+=`Groupers (if any):
`;for(let n of this._groupers){let i=n.reverse?" reverse":"";e+=`- ${n.property}${i}
`}for(let n of this.groups)e+=n.toString(),e+=`
---
`;return e+=`
${this.totalTasksCount()} tasks
`,e}addTaskGroups(e){for(let[t,n]of e){let i=new Xo(t,n);this.addTaskGroup(i)}}addTaskGroup(e){this._groups.push(e)}sortTaskGroups(){let e=(t,n)=>{let i=t.groups,s=n.groups;for(let a=0;a<i.length;a++){let o=this._groupers[a],u=i[a].localeCompare(s[a],void 0,{numeric:!0});if(u!==0)return o.reverse?-u:u}return 0};this._groups.sort(e)}setGroupsHeadings(e){let t=new zo(e,this._groupers);for(let n of this._groups)n.setGroupHeadings(t.getHeadingsForTaskGroup(n.groups))}applyTaskLimit(e){this._groupers.length!==0&&(this._groups.forEach(t=>{t.applyTaskLimit(e)}),this.recalculateTotalTaskCount())}recalculateTotalTaskCount(){let e=[];this._groups.forEach(n=>{e=[...e,...n.tasks]});let t=[...new Set(e)];this._totalTaskCount=t.length}};var Gn=class extends xe{fieldName(){return"description"}value(e){return ge.getInstance().removeAsSubstringFrom(e.description)}supportsSorting(){return!0}comparator(){return(e,t)=>{let n=Gn.cleanDescription(e.description),i=Gn.cleanDescription(t.description);return n.localeCompare(i,void 0,{numeric:!0})}}static cleanDescription(e){e=ge.getInstance().removeAsSubstringFrom(e);let t=/^\[\[?([^\]]*)]]?/,n=e.match(t);if(n!==null){let i=n[1];e=i.substring(i.indexOf("|")+1)+e.replace(t,"")}return e=this.replaceFormatting(e,/^\*\*([^*]+)\*\*/),e=this.replaceFormatting(e,/^\*([^*]+)\*/),e=this.replaceFormatting(e,/^==([^=]+)==/),e=this.replaceFormatting(e,/^__([^_]+)__/),e=this.replaceFormatting(e,/^_([^_]+)_/),e}static replaceFormatting(e,t){let n=e.match(t);return n!==null&&(e=n[1]+e.replace(t,"")),e}};var Zo=class extends pt{fieldName(){return"created"}date(e){return e.createdDate}filterResultIfFieldMissing(){return!1}};var Jo=class extends pt{fieldName(){return"done"}date(e){return e.doneDate}filterResultIfFieldMissing(){return!1}};var eu=class extends pn{constructor(){super(),this._filters.add("exclude sub-items",e=>{if(e.indentation==="")return!0;let t=e.indentation.lastIndexOf(">");return t===-1?!1:/^ ?$/.test(e.indentation.slice(t+1))})}fieldName(){return"exclude"}};var Ta=class extends vr{};function ba(r){return[["task",r]]}function ip(r,e){let t=r.map(([n])=>n);try{let n=e.includes("return")?e:`return ${e}`,i=e&&new Function(...t,n);return i instanceof Function?Ta.fromObject(e,i):Ta.fromError(e,"Error parsing group function")}catch(n){return Ta.fromError(e,$n(`Failed parsing expression "${e}"`,n))}}function sp(r,e){let t=e.map(([n,i])=>i);return r(...t)}function ap(r,e,t){try{return sp(r,e)}catch(n){return $n(`Failed calculating expression "${t}"`,n)}}function Lb(r,e){let t=ba(r),n=ip(t,e);return n.error?n.error:ap(n.queryComponent,t,e)}var tu=class{constructor(e){this.line=e,this.functionOrError=ip(ba(null),e)}isValid(){return this.functionOrError.error===void 0}get parseError(){return this.functionOrError.error}evaluate(e){if(!this.isValid())throw Error(`Error: Cannot evaluate an expression which is not valid: "${this.line}" gave error: "${this.parseError}"`);return sp(this.functionOrError.queryComponent,ba(e))}evaluateOrCatch(e){return this.isValid()?ap(this.functionOrError.queryComponent,ba(e),this.line):`Error: Cannot evaluate an expression which is not valid: "${this.line}" gave error: "${this.parseError}"`}};var ru=class extends we{createFilterOrErrorMessage(e){let t=we.getMatch(this.filterRegExp(),e);if(t===null)return J.fromError(e,"Unable to parse line");let n=t[1],i=new tu(n);return i.isValid()?J.fromFilter(new ft(e,AA(i),new ke(e))):J.fromError(e,i.parseError)}fieldName(){return"function"}filterRegExp(){return new RegExp(`^filter by ${this.fieldNameSingularEscaped()} (.*)`)}supportsGrouping(){return!0}createGrouperFromLine(e){let t=we.getMatch(this.grouperRegExp(),e);if(t===null)return null;let n=!!t[1],i=t[2];return new fn("function",PA(i),n)}grouperRegExp(){return new RegExp(`^group by ${this.fieldNameSingularEscaped()}( reverse)? (.*)`)}grouper(){throw Error("grouper() function not valid for FunctionField. Use createGrouperFromLine() instead.")}};function AA(r){return e=>CA(r,e)}function CA(r,e){let t=r.evaluate(e);if(typeof t=="boolean")return t;throw Error(`filtering function must return true or false. This returned "${t}".`)}function PA(r){return e=>NA(e,r)}function NA(r,e){try{let t=Lb(r,e);return Array.isArray(t)?t.map(i=>i.toString()):t===null?[]:[t.toString()]}catch(t){let n=`Error: Failed calculating expression "${e}". The error message was: `;return t instanceof Error?[n+t.message]:[n+"Unknown error"]}}var nu=class extends xe{fieldName(){return"heading"}value(e){return e.precedingHeader?e.precedingHeader:""}supportsSorting(){return!0}supportsGrouping(){return!0}grouper(){return e=>e.precedingHeader===null||e.precedingHeader.length===0?["(No heading)"]:[e.precedingHeader]}};var iu=class extends pt{fieldName(){return"scheduled"}date(e){return e.scheduledDate}filterResultIfFieldMissing(){return!1}};var su=class extends pt{fieldName(){return"start"}fieldNameForFilterInstruction(){return"starts"}date(e){return e.startDate}filterResultIfFieldMissing(){return!0}};var au=class extends pt{constructor(){let e=new Er;e.add("has happens date",t=>this.dates(t).some(n=>n!==null)),e.add("no happens date",t=>!this.dates(t).some(n=>n!==null)),super(e)}fieldName(){return"happens"}fieldNameForExplanation(){return"due, start or scheduled"}date(e){return this.earliestDate(e)}dates(e){return e.happensDates}earliestDate(e){return e.happens.moment}filterResultIfFieldMissing(){return!1}getFilter(e){return t=>this.dates(t).some(n=>e(n))}};var ou=class extends pn{constructor(){super(),this._filters.add("is recurring",e=>e.recurrence!==null),this._filters.add("is not recurring",e=>e.recurrence===null)}fieldName(){return"recurring"}supportsSorting(){return!0}comparator(){return(e,t)=>e.recurrence!==null&&t.recurrence===null?-1:e.recurrence===null&&t.recurrence!==null?1:0}supportsGrouping(){return!0}grouper(){return e=>e.recurrence!==null?["Recurring"]:["Not Recurring"]}};var uu=class extends xe{fieldNamePlural(){return this.fieldNameSingular()+"s"}fieldName(){return`${this.fieldNameSingular()}/${this.fieldNamePlural()}`}fieldPattern(){return`${this.fieldNameSingular()}|${this.fieldNamePlural()}`}filterOperatorPattern(){return`${super.filterOperatorPattern()}|include|do not include`}value(e){return this.values(e).join(", ")}getFilter(e,t){return n=>{let i=e.matchesAnyOf(this.values(n));return t?!i:i}}createGrouper(e){return new fn(this.fieldNamePlural(),this.grouper(),e)}grouperRegExp(){if(!this.supportsGrouping())throw Error(`grouperRegExp() unimplemented for ${this.fieldNameSingular()}`);return new RegExp(`^group by ${this.fieldNamePlural()}( reverse)?$`)}};var jn=class extends uu{constructor(){super();this.filterInstructions=new Er,this.filterInstructions.add(`has ${this.fieldNameSingular()}`,t=>this.values(t).length>0),this.filterInstructions.add(`has ${this.fieldNamePlural()}`,t=>this.values(t).length>0),this.filterInstructions.add(`no ${this.fieldNameSingular()}`,t=>this.values(t).length===0),this.filterInstructions.add(`no ${this.fieldNamePlural()}`,t=>this.values(t).length===0)}createFilterOrErrorMessage(t){let n=this.filterInstructions.createFilterOrErrorMessage(t);return n.filter!==void 0?n:super.createFilterOrErrorMessage(t)}canCreateFilterForLine(t){return this.filterInstructions.canCreateFilterForLine(t)?!0:super.canCreateFilterForLine(t)}fieldNameSingular(){return"tag"}values(t){return t.tags}supportsSorting(){return!0}createSorterFromLine(t){let n=t.match(this.sorterRegExp());if(n===null)return null;let i=!!n[1],s=isNaN(+n[2])?1:+n[2],a=jn.makeCompareByTagComparator(s);return new zr(this.fieldNameSingular(),a,i)}sorterRegExp(){return/^sort by tag( reverse)?[\s]*(\d+)?/}comparator(){return jn.makeCompareByTagComparator(1)}static makeCompareByTagComparator(t){return(n,i)=>{if(n.tags.length===0&&i.tags.length===0)return 0;if(n.tags.length===0)return 1;if(i.tags.length===0)return-1;let s=t-1;if(n.tags.length<t&&i.tags.length>=t)return 1;if(i.tags.length<t&&n.tags.length>=t)return-1;if(n.tags.length<t&&i.tags.length<t)return 0;let a=n.tags[s],o=i.tags[s];return a.localeCompare(o,void 0,{numeric:!0})}}supportsGrouping(){return!0}grouper(){return t=>t.tags.length==0?["(No tags)"]:t.tags}};var Xb=Ji(Qb());var pu=class extends we{constructor(){super(...arguments);this.basicBooleanRegexp=/(.*(AND|OR|XOR|NOT)\s*[("].*|\(.+\))/g;this.supportedOperators=["AND","OR","XOR","NOT"];this.subFields={}}filterRegExp(){return this.basicBooleanRegexp}createFilterOrErrorMessage(t){return this.parseLine(t)}fieldName(){return"boolean query"}parseLine(t){if(t.length===0)return J.fromError(t,"empty line");let n=this.preprocessExpression(t);try{let i=(0,Xb.parse)(n);for(let o of i)if(o.name==="IDENTIFIER"&&o.value){let u=o.value.trim();if(!(u in this.subFields)){let l=hu(u);if(l===null)return J.fromError(t,`couldn't parse sub-expression '${u}'`);if(l.error)return J.fromError(t,`couldn't parse sub-expression '${u}': ${l.error}`);l.filter&&(this.subFields[u]=l.filter)}}else if(o.name==="OPERATOR"){if(o.value==null)return J.fromError(t,"empty operator in boolean query");if(!this.supportedOperators.includes(o.value))return J.fromError(t,`unknown boolean operator '${o.value}'`)}let s=o=>this.filterTaskWithParsedQuery(o,i),a=this.constructExplanation(i);return J.fromFilter(new ft(t,s,a))}catch(i){let s=i instanceof Error?i.message:"unknown error type";return J.fromError(t,`malformed boolean query -- ${s} (check the documentation for guidelines)`)}}preprocessExpression(t){return t.replace(/\(([^()]+)\)/g,'("$1")')}filterTaskWithParsedQuery(t,n){let i=o=>o==="true",s=o=>o?"true":"false",a=[];for(let o of n)if(o.name==="IDENTIFIER"){if(o.value==null)throw Error("null token value");let l=this.subFields[o.value.trim()].filterFunction(t);a.push(s(l))}else if(o.name==="OPERATOR")if(o.value==="NOT"){let u=i(a.pop());a.push(s(!u))}else if(o.value==="OR"){let u=i(a.pop()),l=i(a.pop());a.push(s(u||l))}else if(o.value==="AND"){let u=i(a.pop()),l=i(a.pop());a.push(s(u&&l))}else if(o.value==="XOR"){let u=i(a.pop()),l=i(a.pop());a.push(s(u&&!l||!u&&l))}else throw Error("Unsupported operator: "+o.value);else throw Error("Unsupported token type: "+o);return i(a[0])}constructExplanation(t){let n=[];for(let i of t)if(i.name==="IDENTIFIER"){if(i.value==null)throw Error("null token value");let s=this.subFields[i.value.trim()];n.push(s.explanation)}else if(i.name==="OPERATOR")if(i.value==="NOT"){let s=n.pop();n.push(ke.booleanNot([s]))}else if(i.value==="OR"){let s=n.pop(),a=n.pop();n.push(ke.booleanOr([a,s]))}else if(i.value==="AND"){let s=n.pop(),a=n.pop();n.push(ke.booleanAnd([a,s]))}else if(i.value==="XOR"){let s=n.pop(),a=n.pop();n.push(ke.booleanXor([a,s]))}else throw Error("Unsupported operator: "+i.value);else throw Error("Unsupported token type: "+i.name);return n[0]}};var mu=class extends xe{fieldName(){return"filename"}value(e){let t=e.filename;return t===null?"":t+".md"}supportsSorting(){return!0}supportsGrouping(){return!0}grouper(){return e=>{let t=e.filename;return t===null?["Unknown Location"]:["[["+t+"]]"]}}};var gu=class extends xe{constructor(){super()}fieldName(){return"status.name"}value(e){return e.status.name}supportsSorting(){return!0}supportsGrouping(){return!0}};var mn=class extends we{canCreateFilterForLine(e){let t=new RegExp(`^(?:${this.fieldNameSingularEscaped()})`);return we.lineMatchesFilter(t,e)}createFilterOrErrorMessage(e){let t=we.getMatch(this.filterRegExp(),e);if(t===null)return this.helpMessage(e);let[n,i,s]=t,a=Qt[s.toUpperCase()];if(!a)return this.helpMessage(e);let o;switch(i){case"is":o=u=>u.status.type===a;break;case"is not":o=u=>u.status.type!==a;break;default:return this.helpMessage(e)}return J.fromFilter(new ft(e,o,new ke(e)))}filterRegExp(){return new RegExp(`^(?:${this.fieldNameSingularEscaped()}) (is|is not) ([^ ]+)$`)}helpMessage(e){let t=Object.values(Qt).filter(i=>i!=="EMPTY").join(" "),n=`Invalid ${this.fieldNameSingular()} instruction: '${e}'.
    Allowed options: 'is' and 'is not' (without quotes).
    Allowed values:  ${t}
                     Note: values are case-insensitive,
                           so 'in_progress' works too, for example.
    Example:         ${this.fieldNameSingular()} is not NON_TASK`;return J.fromError(e,n)}fieldName(){return"status.type"}value(e){return e.status.type}supportsSorting(){return!0}comparator(){return(e,t)=>{let n=mn.groupName(e),i=mn.groupName(t);return n.localeCompare(i,void 0,{numeric:!0})}}supportsGrouping(){return!0}grouper(){return e=>[mn.groupName(e)]}static groupName(e){return e.status.typeGroupText}};var yu=class extends xe{fieldName(){return"recurrence"}value(e){return e.recurrence!==null?e.recurrence.toText():""}supportsGrouping(){return!0}grouper(){return e=>e.recurrence!==null?[e.recurrence.toText()]:["None"]}};var Tu=class extends xe{fieldName(){return"folder"}value(e){return e.file.folder}supportsGrouping(){return!0}grouper(){return e=>[xe.escapeMarkdownCharacters(this.value(e))]}};var bu=class extends xe{fieldName(){return"root"}value(e){return e.file.root}supportsGrouping(){return!0}grouper(){return e=>[xe.escapeMarkdownCharacters(this.value(e))]}};var _u=class extends xe{fieldName(){return"backlink"}value(e){let t=e.getLinkText({isFilenameUnique:!0});return t===null?"Unknown Location":t}createFilterOrErrorMessage(e){return J.fromError(e,"backlink field does not support filtering")}canCreateFilterForLine(e){return!1}supportsGrouping(){return!0}grouper(){return e=>{let t=e.filename;if(t===null)return["Unknown Location"];let n=e.precedingHeader;return n===null?["[["+t+"]]"]:[`[[${t}#${n}|${t} > ${n}]]`]}}};var gp=[()=>new gu,()=>new mn,()=>new wr,()=>new ou,()=>new Yn,()=>new au,()=>new Zo,()=>new su,()=>new iu,()=>new xi,()=>new Jo,()=>new Pi,()=>new Tu,()=>new bu,()=>new _u,()=>new Gn,()=>new jn,()=>new nu,()=>new eu,()=>new mu,()=>new Ni,()=>new yu,()=>new ru,()=>new pu];function hu(r){for(let e of gp){let t=e();if(t.canCreateFilterForLine(r))return t.createFilterOrErrorMessage(r)}return null}function Zb(r){let e=/^sort by /;if(r.match(e)===null)return null;for(let t of gp){let i=t().createSorterFromLine(r);if(i)return i}return null}function Jb(r){let e=/^group by /;if(r.match(e)===null)return null;for(let t of gp){let i=t().createGrouperFromLine(r);if(i)return i}return null}function e_(r){return`task${r!==1?"s":""}`}var zn=class{constructor(e,t){this.totalTasksCountBeforeLimit=0;this._searchErrorMessage=void 0;this.taskGroups=e,this.totalTasksCountBeforeLimit=t}get searchErrorMessage(){return this._searchErrorMessage}set searchErrorMessage(e){this._searchErrorMessage=e}get totalTasksCount(){return this.taskGroups.totalTasksCount()}totalTasksCountDisplayText(){let e=this.totalTasksCount,t=this.totalTasksCountBeforeLimit;return e===t?`${e} ${e_(e)}`:`${e} of ${t} ${e_(t)}`}get groups(){return this.taskGroups.groups}static fromError(e){let t=new zn(new Fi([],[]),0);return t._searchErrorMessage=e,t}};var Vr=class{constructor(e,t=void 0){this._limit=void 0;this._taskGroupLimit=void 0;this._layoutOptions=new ua;this._filters=[];this._error=void 0;this._sorting=[];this._grouping=[];this._ignoreGlobalQuery=!1;this.hideOptionsRegexp=/^(hide|show) (task count|backlink|priority|created date|start date|scheduled date|done date|due date|recurrence rule|edit button|urgency|tags)/;this.shortModeRegexp=/^short/;this.explainQueryRegexp=/^explain/;this.ignoreGlobalQueryRegexp=/^ignore global query/;this.limitRegexp=/^limit (groups )?(to )?(\d+)( tasks?)?/;this.commentRegexp=/^#.*/;this.source=e,this.filePath=t,e.split(`
`).map(n=>n.trim()).forEach(n=>{let i=this.expandPlaceholders(n,t);if(this.error===void 0)switch(!0){case i==="":break;case this.shortModeRegexp.test(i):this._layoutOptions.shortMode=!0;break;case this.explainQueryRegexp.test(i):this._layoutOptions.explainQuery=!0;break;case this.ignoreGlobalQueryRegexp.test(i):this._ignoreGlobalQuery=!0;break;case this.limitRegexp.test(i):this.parseLimit(i);break;case this.parseSortBy(i):break;case this.parseGroupBy(i):break;case this.hideOptionsRegexp.test(i):this.parseHideOptions(i);break;case this.commentRegexp.test(i):break;case this.parseFilter(i):break;default:this.setError("do not understand query",i)}})}expandPlaceholders(e,t){if(e.includes("{{")&&e.includes("}}")&&this.filePath===void 0)return this._error=`The query looks like it contains a placeholder, with "{{" and "}}"
but no file path has been supplied, so cannot expand placeholder values.
The query is:
${e}`,e;let n=e;if(t){let i=Fb(t);try{n=Ib(e,i)}catch(s){return s instanceof Error?this._error=s.message:this._error="Internal error. expandPlaceholders() threw something other than Error.",e}}return n}append(e){return this.source===""?e:e.source===""?this:new Vr(`${this.source}
${e.source}`,this.filePath)}explainQuery(){let e="";if(this.error!==void 0)return e+=`Query has an error:
`,e+=this.error+`
`,e;let t=this.filters.length;if(t===0)e+="No filters supplied. All tasks will match the query.";else for(let i=0;i<t;i++)i>0&&(e+=`
`),e+=this.filters[i].explainFilterIndented("");e+=this.explainQueryLimits();let{debugSettings:n}=Q();return n.ignoreSortInstructions&&(e+=`

NOTE: All sort instructions, including default sort order, are disabled, due to 'ignoreSortInstructions' setting.`),e}explainQueryLimits(){let e="";function t(n){let i=`

At most ${n} task`;return n!==1&&(i+="s"),i}return this._limit!==void 0&&(e+=t(this._limit),e+=`.
`),this._taskGroupLimit!==void 0&&(e+=t(this._taskGroupLimit),e+=` per group (if any "group by" options are supplied).
`),e}get limit(){return this._limit}get layoutOptions(){return this._layoutOptions}get filters(){return this._filters}get sorting(){return this._sorting}get grouping(){return this._grouping}get error(){return this._error}setError(e,t){this._error=`${e}
Problem line: "${t}"`}get ignoreGlobalQuery(){return this._ignoreGlobalQuery}applyQueryToTasks(e){try{this.filters.forEach(a=>{e=e.filter(a.filterFunction)});let{debugSettings:t}=Q(),n=t.ignoreSortInstructions?e:Ii.by(this.sorting,e),i=n.slice(0,this.limit),s=new Fi(this.grouping,i);return this._taskGroupLimit!==void 0&&s.applyTaskLimit(this._taskGroupLimit),new zn(s,n.length)}catch(t){let n="Search failed";return zn.fromError($n(n,t))}}parseHideOptions(e){let t=e.match(this.hideOptionsRegexp);if(t!==null){let n=t[1]==="hide";switch(t[2]){case"task count":this._layoutOptions.hideTaskCount=n;break;case"backlink":this._layoutOptions.hideBacklinks=n;break;case"priority":this._layoutOptions.hidePriority=n;break;case"created date":this._layoutOptions.hideCreatedDate=n;break;case"start date":this._layoutOptions.hideStartDate=n;break;case"scheduled date":this._layoutOptions.hideScheduledDate=n;break;case"due date":this._layoutOptions.hideDueDate=n;break;case"done date":this._layoutOptions.hideDoneDate=n;break;case"recurrence rule":this._layoutOptions.hideRecurrenceRule=n;break;case"edit button":this._layoutOptions.hideEditButton=n;break;case"urgency":this._layoutOptions.hideUrgency=n;break;case"tags":this._layoutOptions.hideTags=n;break;default:this.setError("do not understand hide/show option",e)}}}parseFilter(e){var n;let t=hu(e);return t!=null?(t.filter?this._filters.push(t.filter):this.setError((n=t.error)!=null?n:"Unknown error",e),!0):!1}parseLimit(e){let t=e.match(this.limitRegexp);if(t===null){this.setError("do not understand query limit",e);return}let n=Number.parseInt(t[3],10);t[1]!==void 0?this._taskGroupLimit=n:this._limit=n}parseSortBy(e){let t=Zb(e);return t?(this._sorting.push(t),!0):!1}parseGroupBy(e){let t=Jb(e);return t?(this._grouping.push(t),!0):!1}};var gn=class{constructor(e=gn.empty){this._source=e}static getInstance(){return gn.instance||(gn.instance=new gn),gn.instance}set(e){this._source=e}query(e=void 0){return new Vr(this._source,e)}hasInstructions(){return this._source.trim()!==gn.empty}},Jt=gn;Jt.empty="";var vu=class{constructor({obsidianEvents:e}){this.obsidianEvents=e}onCacheUpdate(e){return this.obsidianEvents.on("obsidian-tasks-plugin:cache-update",e)}triggerCacheUpdate(e){this.obsidianEvents.trigger("obsidian-tasks-plugin:cache-update",e)}onRequestCacheUpdate(e){return this.obsidianEvents.on("obsidian-tasks-plugin:request-cache-update",e)}triggerRequestCacheUpdate(e){this.obsidianEvents.trigger("obsidian-tasks-plugin:request-cache-update",e)}off(e){this.obsidianEvents.offref(e)}};var wa=require("obsidian");var oC=require("obsidian"),i_=Ji(n_());var yp=class extends i_.EventEmitter2{constructor(){super(...arguments);this.options={minLevels:{"":"info",tasks:"info"}};this.consoleLoggerRegistered=!1;this.arrAvg=t=>t.reduce((n,i)=>n+i,0)/t.length}configure(t){return this.options=Object.assign({},this.options,t),this}getLogger(t){let n="none",i="";for(let s in this.options.minLevels)t.startsWith(s)&&s.length>=i.length&&(n=this.options.minLevels[s],i=s);return new Tp(this,t,n)}onLogEntry(t){return this.on("log",t),this}registerConsoleLogger(){return this.consoleLoggerRegistered?this:(this.onLogEntry(t=>{let n=`[${window.moment().format("YYYY-MM-DD-HH:mm:ss.SSS")}][${t.level}][${t.module}]`;switch(t.traceId&&(n+=`[${t.traceId}]`),n+=` ${t.message}`,t.objects===void 0&&(t.objects=""),t.level){case"trace":console.trace(n,t.objects);break;case"debug":console.debug(n,t.objects);break;case"info":console.info(n,t.objects);break;case"warn":console.warn(n,t.objects);break;case"error":console.error(n,t.objects);break;default:console.log(`{${t.level}} ${n}`,t.objects)}}),this.consoleLoggerRegistered=!0,this)}},Eu=new yp,Tp=class{constructor(e,t,n){this.levels={trace:1,debug:2,info:3,warn:4,error:5};this.logManager=e,this.module=t,this.minLevel=this.levelToInt(n)}levelToInt(e){return e.toLowerCase()in this.levels?this.levels[e.toLowerCase()]:99}log(e,t,n){if(this.levelToInt(e)<this.minLevel)return;let s={level:e,module:this.module,message:t,objects:n,traceId:void 0};this.logManager.emit("log",s)}trace(e,t){this.log("trace",e,t)}debug(e,t){this.log("debug",e,t)}info(e,t){this.log("info",e,t)}warn(e,t){this.log("warn",e,t)}error(e,t){this.log("error",e,t)}logWithId(e,t,n,i){if(this.levelToInt(e)<this.minLevel)return;let a={level:e,module:this.module,message:n,objects:i,traceId:t};this.logManager.emit("log",a)}traceWithId(e,t,n){this.logWithId("trace",e,t,n)}debugWithId(e,t,n){this.logWithId("debug",e,t,n)}infoWithId(e,t,n){this.logWithId("info",e,t,n)}warnWithId(e,t,n){this.logWithId("warn",e,t,n)}errorWithId(e,t,n){this.logWithId("error",e,t,n)}};var va,bp,_p,uC=["md"],Ea=Eu.getLogger("tasks"),s_=({metadataCache:r,vault:e,workspace:t})=>{va=r,bp=e,_p=t},Ou=t=>q(void 0,[t],function*({originalTask:r,newTasks:e}){if(bp===void 0||va===void 0||_p===void 0){wu("Tasks: cannot use File before initializing it.");return}Array.isArray(e)||(e=[e]),Ea.debug(`replaceTaskWithTasks entered. ${r.path}`),o_({originalTask:r,newTasks:e,vault:bp,metadataCache:va,workspace:_p,previousTries:0})});function wu(r){console.error(r),new wa.Notice(r,15e3)}function a_(r){console.warn(r),new wa.Notice(r,1e4)}function lC(r){Ea.debug(r)}var yn=class extends Error{},ku=class extends Error{},o_=a=>q(void 0,[a],function*({originalTask:r,newTasks:e,vault:t,metadataCache:n,workspace:i,previousTries:s}){Ea.debug(`tryRepetitive after ${s} previous tries`);let o=()=>{if(s>10){let l=`Tasks: Could not find the correct task line to update.

The task line not updated is:
${r.originalMarkdown}

In this markdown file:
"${r.taskLocation.path}"

Note: further clicks on this checkbox will usually now be ignored until the file is opened (or certain, specific edits are made - it's complicated).

Recommendations:

1. Close all panes that have the above file open, and then re-open the file.

2. Check for exactly identical copies of the task line, in this file, and see if you can make them different.
`;wu(l);return}let u=Math.min(Math.pow(10,s),100);Ea.debug(`timeout = ${u}`),setTimeout(()=>{o_({originalTask:r,newTasks:e,vault:t,metadataCache:n,workspace:i,previousTries:s+1})},u)};try{let[u,l,c]=yield u_(r,t),p=[...c.slice(0,u),...e.map(h=>h.toFileLineString()),...c.slice(u+1)];yield t.modify(l,p.join(`
`))}catch(u){if(u instanceof yn)return u.message&&a_(u.message),o();if(u instanceof ku)return o();u instanceof Error&&wu(u.message)}});function u_(r,e){return q(this,null,function*(){if(va===void 0)throw new yn;let t=e.getAbstractFileByPath(r.path);if(!(t instanceof wa.TFile))throw new yn(`Tasks: No file found for task ${r.description}. Retrying ...`);if(!uC.includes(t.extension))throw new Error(`Tasks: Does not support files with the ${t.extension} file extension.`);let n=va.getFileCache(t);if(n==null||n===null)throw new yn(`Tasks: No file cache found for file ${t.path}. Retrying ...`);let i=n.listItems;if(i===void 0||i.length===0)throw new yn(`Tasks: No list items found in file cache of ${t.path}. Retrying ...`);let a=(yield e.read(t)).split(`
`),o=cC(r,a,i,lC);if(o===void 0)throw new ku;return[o,t,a]})}function vp(r,e){return q(this,null,function*(){try{let[t,n,i]=yield u_(r,e);return[t,n]}catch(t){t instanceof yn?t.message&&a_(t.message):t instanceof Error&&wu(t.message)}})}function l_(r,e){return r<e.length}function cC(r,e,t,n){let i=dC(r,e);return i!==void 0||(i=fC(r,e),i!==void 0)?i:pC(r,e,t,n)}function dC(r,e){let t=r.taskLocation.lineNumber;if(l_(t,e)&&e[t]===r.originalMarkdown)return Ea.debug(`Found original markdown at original line number ${t}`),t}function fC(r,e){let t=[];for(let n=0;n<e.length;n++)e[n]===r.originalMarkdown&&t.push(n);if(t.length===1)return t[0]}function pC(r,e,t,n){let i,s=0;for(let a of t){let o=a.position.start.line;if(!l_(o,e))return;if(o<r.taskLocation.sectionStart||a.task===void 0)continue;let u=e[o];if(ge.getInstance().includedIn(u)){if(s===r.taskLocation.sectionIndex){if(u===r.originalMarkdown)i=o;else{n(`Tasks: Unable to find task in file ${r.taskLocation.path}.
Expected task:
${r.originalMarkdown}
Found task:
${u}`);return}break}s++}}return i}var d_=require("obsidian");var c_=require("obsidian");var hC={description:"task-description",priority:"task-priority",dueDate:"task-due",startDate:"task-start",createdDate:"task-created",scheduledDate:"task-scheduled",doneDate:"task-done",recurrenceRule:"task-recurring",blockLink:""},mC=7,gC="far";function yC(r,e,t){return q(this,null,function*(){var o;let n=document.createElement("li");e.parentUlElement.appendChild(n),n.classList.add("task-list-item","plugin-tasks-list-item");let i=document.createElement("span");n.appendChild(i),i.classList.add("tasks-list-text");let s=yield TC(r,e,i,t);for(let u in s)n.dataset[u]=s[u];let a=document.createElement("input");return n.appendChild(a),a.classList.add("task-list-item-checkbox"),a.type="checkbox",r.status.symbol!==" "&&(a.checked=!0,n.classList.add("is-checked")),a.addEventListener("click",u=>{u.preventDefault(),u.stopPropagation(),a.disabled=!0;let l=r.toggleWithRecurrenceInUsersOrder();Ou({originalTask:r,newTasks:l})}),n.prepend(a),n.setAttribute("data-task",r.status.symbol.trim()),n.setAttribute("data-line",e.listIndex.toString()),n.setAttribute("data-task-status-name",r.status.name),n.setAttribute("data-task-status-type",r.status.type),a.setAttribute("data-line",e.listIndex.toString()),(o=e.layoutOptions)!=null&&o.shortMode&&kC({task:r,element:i,isFilenameUnique:e.isFilenameUnique}),n})}function TC(r,e,t,n){return q(this,null,function*(){let i={},s=new ln(e.layoutOptions),a=Yr.tasksPluginEmoji.taskSerializer;for(let o of s.shownTaskLayoutComponents){let u=a.componentToString(r,s,o);if(u){o==="description"&&(u=ge.getInstance().removeAsWordFromDependingOnSettings(u));let l=document.createElement("span");if(t.appendChild(l),l){let c=document.createElement("span");l.appendChild(c),yield bC(c,u,o,r,n,e.obsidianComponent),vC(o,c);let p=_C(o,r);l.classList.add(...p);let h=Ep(o,r);for(let _ in h)l.dataset[_]=h[_];i=pe(pe({},i),h)}}}for(let o of s.hiddenTaskLayoutComponents){let u=Ep(o,r);i=pe(pe({},i),u)}if(i.taskPriority===void 0){let o=Ep("priority",r);i=pe(pe({},i),o)}return i})}function bC(r,e,t,n,i,s){return q(this,null,function*(){if(t==="description"){let{debugSettings:a}=Q();a.showTaskHiddenData&&(e+=`<br>\u{1F41B} <b>${n.lineNumber}</b> . ${n.sectionStart} . ${n.sectionIndex} . '<code>${n.originalMarkdown}</code>'<br>'<code>${n.path}</code>' > '<code>${n.precedingHeader}</code>'<br>`),yield i(e,r,n.path,s);let o=r.querySelector("blockquote"),u=o!=null?o:r,l=u.querySelector("p");if(l!==null){for(;l.firstChild;)u.insertBefore(l.firstChild,l);l.remove()}r.querySelectorAll("p").forEach(c=>{c.hasChildNodes()||c.remove()}),r.querySelectorAll(".footnotes").forEach(c=>{c.remove()})}else r.innerHTML=e})}function _C(r,e){let t=[],n=hC[r];switch(r){case"blockLink":break;case"description":case"priority":case"recurrenceRule":t.push(n);break;case"createdDate":case"dueDate":case"startDate":case"scheduledDate":case"doneDate":{e[r]&&t.push(n);break}}return t}function Ep(r,e){let t={},n={createdDate:"taskCreated",dueDate:"taskDue",startDate:"taskStart",scheduledDate:"taskScheduled",doneDate:"taskDone",priority:"taskPriority",description:"",recurrenceRule:"",blockLink:""};switch(r){case"description":case"recurrenceRule":case"blockLink":break;case"priority":{let i=n[r];t[i]=Br.priorityNameUsingNormal(e.priority).toLocaleLowerCase();break}case"createdDate":case"dueDate":case"startDate":case"scheduledDate":case"doneDate":{let i=e[r];if(i){let s=EC(i);if(s){let a=n[r];t[a]=s}}break}}return t}function vC(r,e){if(r==="description"){let t=e.getElementsByClassName("tag");for(let n=0;n<t.length;n++){let i=t[n].textContent;if(i){let s=wC(i),a=t[n];s&&(a.dataset.tagName=s)}}}}function EC(r){let e=window.moment().startOf("day"),t="",n=e.diff(r,"days");return isNaN(n)?null:n===0?"today":(n>0?t+="past-":n<0&&(t+="future-"),Math.abs(n)<=mC?t+=Math.abs(n).toString()+"d":t+=gC,t)}function wC(r){let e=/["&\x00\r\n]/g,t=r.replace(e,"-");return t=t.replace(/^[-_]+/,""),t.length>0?t:null}function kC({task:r,element:e,isFilenameUnique:t}){let{recurrenceSymbol:n,startDateSymbol:i,createdDateSymbol:s,scheduledDateSymbol:a,dueDateSymbol:o,doneDateSymbol:u}=Yr.tasksPluginEmoji.taskSerializer.symbols;e.addEventListener("mouseenter",()=>{let l=e.createDiv();l.addClasses(["tooltip","pop-up"]),r.recurrence&&l.createDiv().setText(`${n} ${r.recurrence.toText()}`),ka(l,r.createdDate,s),ka(l,r.startDate,i),ka(l,r.scheduledDate,a),ka(l,r.dueDate,o),ka(l,r.doneDate,u);let c=r.getLinkText({isFilenameUnique:t});c&&l.createDiv().setText(`\u{1F517} ${c}`),e.addEventListener("mouseleave",()=>{l.remove()})})}function ka(r,e,t){e&&r.createDiv().setText(OC({signifier:t,date:e}))}function OC({signifier:r,date:e}){return`${r} ${e.format(z.dateFormat)} (${e.from(window.moment().startOf("day"))})`}function Su(r,e){function t(n,i,s,a){return q(this,null,function*(){if(!a)throw new Error("Must call the Obsidian renderer with an Obsidian Component object");yield c_.MarkdownRenderer.renderMarkdown(n,i,s,a)})}return yC(r,e,t)}var Du=class{constructor({plugin:e}){this.markdownPostProcessor=this._markdownPostProcessor.bind(this);e.registerMarkdownPostProcessor(this._markdownPostProcessor.bind(this))}_markdownPostProcessor(e,t){return q(this,null,function*(){var c;let n=new d_.MarkdownRenderChild(e);t.addChild(n);let i=e.findAll(".task-list-item").filter(p=>{var y;let h=(y=p.textContent)==null?void 0:y.split(`
`);if(h===void 0)return!1;let _=null;for(let w=0;w<h.length;w=w+1)if(h[w]!==""){_=h[w];break}return _===null?!1:ge.getInstance().includedIn(_)});if(i.length===0)return;let s=t.sourcePath,a=t.getSectionInfo(e);if(a===null)return;let o=a.text.split(`
`),u=0,l=[];for(let p=a.lineStart;p<=a.lineEnd;p++){let h=o[p];if(h===void 0)continue;let _=null,y=ye.fromLine({line:h,taskLocation:new ot(s,p,a.lineStart,u,_),fallbackDate:null});y!==null&&(l.push(y),u++)}for(let p=0;p<i.length;p++){let h=l[p],_=i[p];if(h===void 0||_===void 0)continue;let y=(c=_.getAttr("data-line"))!=null?c:"0",w=Number.parseInt(y,10),M=yield Su(h,{parentUlElement:e,listIndex:w,obsidianComponent:n}),P=_.childNodes;for(let X=0;X<P.length;X=X+1){let V=P[X];V.nodeName.toLowerCase()==="div"?M.prepend(V):V.nodeName.toLowerCase()==="ul"&&M.append(V)}let N=_.querySelectorAll("[data-footnote-id]"),F=M.querySelectorAll("[data-footnote-id]");if(N.length===F.length)for(let X=0;X<N.length;X++)F[X].replaceWith(N[X]);_.replaceWith(M)}})}};var f_=require("@codemirror/view"),p_=require("obsidian");var h_=()=>f_.ViewPlugin.fromClass(wp),wp=class{constructor(e){this.view=e,this.handleClickEvent=this.handleClickEvent.bind(this),this.view.dom.addEventListener("click",this.handleClickEvent)}destroy(){this.view.dom.removeEventListener("click",this.handleClickEvent)}handleClickEvent(e){let{target:t}=e;if(!t||!(t instanceof HTMLInputElement)||t.type!=="checkbox")return!1;let n=t.closest("ul.plugin-tasks-query-result, div.callout-content");if(n){if(n.matches("div.callout-content")){let h=`obsidian-tasks-plugin warning: Tasks cannot add or remove completion dates or make the next copy of a recurring task for tasks written inside a callout when you click their checkboxes in Live Preview. 
If you wanted Tasks to do these things, please undo your change, then either click the line of the task and use the "Toggle Task Done" command, or switch to Reading View to click the checkbox.`;console.warn(h),new p_.Notice(h,45e3)}return!1}let{state:i}=this.view,s=this.view.posAtDOM(t),a=i.doc.lineAt(s),o=ye.fromLine({line:a.text,taskLocation:ot.fromUnknownPosition(""),fallbackDate:null});if(o===null)return!1;e.preventDefault();let l=o.toggleWithRecurrenceInUsersOrder().map(h=>h.toFileLineString()).join(i.lineBreak),c=i.update({changes:{from:a.from,to:a.to,insert:l}});this.view.dispatch(c);let p=t.checked;return setTimeout(()=>{t.checked=p},1),!0}};var ji=require("obsidian");function m_(r,e,t,n=void 0){let i="";e.isEmpty()||(i+=`Only tasks containing the global filter '${e.get()}'.

`);let s=new Vr(r,n);return s.ignoreGlobalQuery||t.hasInstructions()&&(i+=`Explanation of the global query:

${t.query(n).explainQuery()}
`),i+=`Explanation of this Tasks code block query:

${s.explainQuery()}`,i}function Ru(r,e,t){let n=new Vr(r,t);return n.ignoreGlobalQuery?n:e.query(t).append(n)}var Mu=class{constructor({plugin:e,events:t}){this.addQueryRenderChild=this._addQueryRenderChild.bind(this);this.app=e.app,this.events=t,e.registerMarkdownCodeBlockProcessor("tasks",this._addQueryRenderChild.bind(this))}_addQueryRenderChild(e,t,n){return q(this,null,function*(){n.addChild(new kp({app:this.app,events:this.events,container:t,source:e,filePath:n.sourcePath}))})}},kp=class extends ji.MarkdownRenderChild{constructor({app:t,events:n,container:i,source:s,filePath:a}){super(i);switch(this.app=t,this.events=n,this.source=s,this.filePath=a,this.containerEl.className){case"block-language-tasks":this.query=Ru(this.source,Jt.getInstance(),this.filePath),this.queryType="tasks";break;default:this.query=Ru(this.source,Jt.getInstance(),this.filePath),this.queryType="tasks";break}}onload(){this.events.triggerRequestCacheUpdate(this.render.bind(this)),this.renderEventRef=this.events.onCacheUpdate(this.render.bind(this)),this.reloadQueryAtMidnight()}onunload(){this.renderEventRef!==void 0&&this.events.off(this.renderEventRef),this.queryReloadTimeout!==void 0&&clearTimeout(this.queryReloadTimeout)}reloadQueryAtMidnight(){let t=new Date;t.setHours(24,0,0,0);let n=new Date,i=t.getTime()-n.getTime();this.queryReloadTimeout=setTimeout(()=>{this.query=Ru(this.source,Jt.getInstance(),this.filePath),this.events.triggerRequestCacheUpdate(this.render.bind(this)),this.reloadQueryAtMidnight()},i+1e3)}render(i){return q(this,arguments,function*({tasks:t,state:n}){var a;let s=this.containerEl.createEl("div");n==="Warm"&&this.query.error===void 0?yield this.renderQuerySearchResults(t,n,s):this.query.error!==void 0?this.renderErrorMessage(s,this.query.error):this.renderLoadingMessage(s),(a=this.containerEl.firstChild)==null||a.replaceWith(s)})}renderQuerySearchResults(t,n,i){return q(this,null,function*(){this.query.layoutOptions.explainQuery&&this.createExplanation(i);let a=this.query.applyQueryToTasks(t);if(a.searchErrorMessage!==void 0){this.renderErrorMessage(i,a.searchErrorMessage);return}yield this.addAllTaskGroups(a.taskGroups,i);let o=a.totalTasksCount;this.addTaskCount(i,a)})}renderErrorMessage(t,n){t.createDiv().innerHTML=`<pre>Tasks query: ${n.replace(/\n/g,"<br>")}</pre>`}renderLoadingMessage(t){t.setText("Loading Tasks ...")}createExplanation(t){let n=m_(this.source,ge.getInstance(),Jt.getInstance(),this.filePath),i=t.createEl("pre");i.addClasses(["plugin-tasks-query-explanation"]),i.setText(n),t.appendChild(i)}createTaskList(t,n){return q(this,null,function*(){let i=new ln(this.query.layoutOptions),s=n.createEl("ul");s.addClasses(["contains-task-list","plugin-tasks-query-result"]),s.addClasses(i.taskListHiddenClasses);let a=this.getGroupingAttribute();a&&a.length>0&&(s.dataset.taskGroupBy=a);for(let[o,u]of t.entries()){let l=this.isFilenameUnique({task:u}),c=yield Su(u,{parentUlElement:s,listIndex:o,layoutOptions:this.query.layoutOptions,isFilenameUnique:l,taskLayout:i,obsidianComponent:this});c.querySelectorAll("[data-footnote-id]").forEach(_=>_.remove());let h=c.createSpan("task-extras");if(this.query.layoutOptions.hideUrgency||this.addUrgency(h,u),!this.query.layoutOptions.hideBacklinks){let _=this.query.layoutOptions.shortMode;this.addBacklinks(h,u,_,l)}this.query.layoutOptions.hideEditButton||this.addEditButton(h,u),s.appendChild(c)}n.appendChild(s)})}addEditButton(t,n){t.createEl("a",{cls:"tasks-edit"}).onClickEvent(s=>{s.preventDefault();let a=u=>{Ou({originalTask:n,newTasks:Rt.removeInferredStatusIfNeeded(n,u)})};new dn({app:this.app,task:n,onSubmit:a}).open()})}addUrgency(t,n){let i=new Intl.NumberFormat().format(n.urgency);t.createSpan({text:i,cls:"tasks-urgency"})}addAllTaskGroups(t,n){return q(this,null,function*(){for(let i of t.groups)this.addGroupHeadings(n,i.groupHeadings),yield this.createTaskList(i.tasks,n)})}addGroupHeadings(t,n){for(let i of n)this.addGroupHeading(t,i)}addGroupHeading(t,n){return q(this,null,function*(){let i="h6";n.nestingLevel===0?i="h4":n.nestingLevel===1&&(i="h5");let s=t.createEl(i,{cls:"tasks-group-heading"});yield ji.MarkdownRenderer.renderMarkdown(n.displayName,s,this.filePath,this)})}addBacklinks(t,n,i,s){var c;let a=t.createSpan({cls:"tasks-backlink"});i||a.append(" (");let o=a.createEl("a");o.rel="noopener",o.target="_blank",o.addClass("internal-link"),i&&o.addClass("internal-link-short-mode");let u;i?u=" \u{1F517}":u=(c=n.getLinkText({isFilenameUnique:s}))!=null?c:"",o.setText(u);let l=this.app.vault;o.addEventListener("click",p=>q(this,null,function*(){let h=yield vp(n,l);if(h){let[_,y]=h;yield this.app.workspace.getLeaf(ji.Keymap.isModEvent(p)).openFile(y,{eState:{line:_}})}})),o.addEventListener("mousedown",p=>q(this,null,function*(){if(p.button===1){let h=yield vp(n,l);if(h){let[_,y]=h;yield this.app.workspace.getLeaf("tab").openFile(y,{eState:{line:_}})}}})),i||a.append(")")}addTaskCount(t,n){this.query.layoutOptions.hideTaskCount||t.createDiv({text:n.totalTasksCountDisplayText(),cls:"tasks-count"})}isFilenameUnique({task:t}){let n=t.path.match(/([^/]*)\..+$/i);if(n===null)return;let i=n[1];return this.app.vault.getMarkdownFiles().filter(a=>{if(a.basename===i)return!0}).length<2}getGroupingAttribute(){let t=[];for(let n of this.query.grouping)t.push(n.property);return t.join(",")}};var ve=require("obsidian");function g_(){return[[" ","Unchecked","x","TODO"],["x","Checked"," ","DONE"],[">","Rescheduled","x","TODO"],["<","Scheduled","x","TODO"],["!","Important","x","TODO"],["-","Cancelled"," ","CANCELLED"],["/","In Progress","x","IN_PROGRESS"],["?","Question","x","TODO"],["*","Star","x","TODO"],["n","Note","x","TODO"],["l","Location","x","TODO"],["i","Information","x","TODO"],["I","Idea","x","TODO"],["S","Amount","x","TODO"],["p","Pro","x","TODO"],["c","Con","x","TODO"],["b","Bookmark","x","TODO"],['"',"Quote","x","TODO"],["0","Speech bubble 0","0","NON_TASK"],["1","Speech bubble 1","1","NON_TASK"],["2","Speech bubble 2","2","NON_TASK"],["3","Speech bubble 3","3","NON_TASK"],["4","Speech bubble 4","4","NON_TASK"],["5","Speech bubble 5","5","NON_TASK"],["6","Speech bubble 6","6","NON_TASK"],["7","Speech bubble 7","7","NON_TASK"],["8","Speech bubble 8","8","NON_TASK"],["9","Speech bubble 9","9","NON_TASK"]]}function y_(){return[[" ","incomplete","x","TODO"],["x","complete / done"," ","DONE"],["-","cancelled"," ","CANCELLED"],[">","deferred","x","TODO"],["/","in progress, or half-done","x","IN_PROGRESS"],["!","Important","x","TODO"],["?","question","x","TODO"],["R","review","x","TODO"],["+","Inbox / task that should be processed later","x","TODO"],["b","bookmark","x","TODO"],["B","brainstorm","x","TODO"],["D","deferred or scheduled","x","TODO"],["I","Info","x","TODO"],["i","idea","x","TODO"],["N","note","x","TODO"],["Q","quote","x","TODO"],["W","win / success / reward","x","TODO"],["P","pro","x","TODO"],["C","con","x","TODO"]]}function T_(){return[[" ","Unchecked","x","TODO"],["x","Checked"," ","DONE"],["-","Cancelled"," ","CANCELLED"],["/","In Progress","x","IN_PROGRESS"],[">","Deferred","x","TODO"],["!","Important","x","TODO"],["?","Question","x","TODO"],["r","Review","x","TODO"]]}function b_(){return[[" ","Unchecked","x","TODO"],["x","Regular"," ","DONE"],["X","Checked"," ","DONE"],["-","Dropped"," ","CANCELLED"],[">","Forward","x","TODO"],["D","Date","x","TODO"],["?","Question","x","TODO"],["/","Half Done","x","IN_PROGRESS"],["+","Add","x","TODO"],["R","Research","x","TODO"],["!","Important","x","TODO"],["i","Idea","x","TODO"],["B","Brainstorm","x","TODO"],["P","Pro","x","TODO"],["C","Con","x","TODO"],["Q","Quote","x","TODO"],["N","Note","x","TODO"],["b","Bookmark","x","TODO"],["I","Information","x","TODO"],["p","Paraphrase","x","TODO"],["L","Location","x","TODO"],["E","Example","x","TODO"],["A","Answer","x","TODO"],["r","Reward","x","TODO"],["c","Choice","x","TODO"],["d","Doing","x","IN_PROGRESS"],["T","Time","x","TODO"],["@","Character / Person","x","TODO"],["t","Talk","x","TODO"],["O","Outline / Plot","x","TODO"],["~","Conflict","x","TODO"],["W","World","x","TODO"],["f","Clue / Find","x","TODO"],["F","Foreshadow","x","TODO"],["H","Favorite / Health","x","TODO"],["&","Symbolism","x","TODO"],["s","Secret","x","TODO"]]}function __(){return[[" ","Unchecked","x","TODO"],["x","Checked"," ","DONE"],[">","Rescheduled","x","TODO"],["<","Scheduled","x","TODO"],["!","Important","x","TODO"],["-","Cancelled"," ","CANCELLED"],["/","In Progress","x","IN_PROGRESS"],["?","Question","x","TODO"],["*","Star","x","TODO"],["n","Note","x","TODO"],["l","Location","x","TODO"],["i","Information","x","TODO"],["I","Idea","x","TODO"],["S","Amount","x","TODO"],["p","Pro","x","TODO"],["c","Con","x","TODO"],["b","Bookmark","x","TODO"],["f","Fire","x","TODO"],["k","Key","x","TODO"],["w","Win","x","TODO"],["u","Up","x","TODO"],["d","Down","x","TODO"]]}function v_(){return[[" ","to-do","x","TODO"],["/","incomplete","x","IN_PROGRESS"],["x","done"," ","DONE"],["-","canceled"," ","CANCELLED"],[">","forwarded","x","TODO"],["<","scheduling","x","TODO"],["?","question","x","TODO"],["!","important","x","TODO"],["*","star","x","TODO"],['"',"quote","x","TODO"],["l","location","x","TODO"],["b","bookmark","x","TODO"],["i","information","x","TODO"],["S","savings","x","TODO"],["I","idea","x","TODO"],["p","pros","x","TODO"],["c","cons","x","TODO"],["f","fire","x","TODO"],["k","key","x","TODO"],["w","win","x","TODO"],["u","up","x","TODO"],["d","down","x","TODO"]]}function E_(){return[[" ","to-do","x","TODO"],["/","incomplete","x","IN_PROGRESS"],["x","done"," ","DONE"],["-","canceled"," ","CANCELLED"],[">","forwarded","x","TODO"],["<","scheduling","x","TODO"],["?","question","x","TODO"],["!","important","x","TODO"],["*","star","x","TODO"],['"',"quote","x","TODO"],["l","location","x","TODO"],["b","bookmark","x","TODO"],["i","information","x","TODO"],["S","savings","x","TODO"],["I","idea","x","TODO"],["p","pros","x","TODO"],["c","cons","x","TODO"],["f","fire","x","TODO"],["k","key","x","TODO"],["w","win","x","TODO"],["u","up","x","TODO"],["d","down","x","TODO"]]}var w_=[{text:"Core Statuses",level:"h3",class:"",open:!0,notice:{class:"setting-item-description",text:null,html:"<p>These are the core statuses that Tasks supports natively, with no need for custom CSS styling or theming.</p><p>You can add edit and add your own custom statuses in the section below.</p>"},settings:[{name:"",description:"",type:"function",initialValue:"",placeholder:"",settingName:"insertTaskCoreStatusSettings",featureFlag:"",notice:null}]},{text:"Custom Statuses",level:"h3",class:"",open:!0,notice:{class:"setting-item-description",text:null,html:`<p>You should first <b>select and install a CSS Snippet or Theme</b> to style custom checkboxes.</p><p>Then, use the buttons below to set up your custom statuses, to match your chosen CSS checkboxes.</p><p><b>Note</b> Any statuses with the same symbol as any earlier statuses will be ignored. You can confirm the actually loaded statuses by running the 'Create or edit task' command and looking at the Status drop-down.</p><p></p><p>See the <a href="https://publish.obsidian.md/tasks/Getting+Started/Statuses">documentation</a> to get started!</p>`},settings:[{name:"",description:"",type:"function",initialValue:"",placeholder:"",settingName:"insertCustomTaskStatusSettings",featureFlag:"",notice:null}]}];var dr=require("obsidian");var Kn=class{validate(e){let t=[];return t.push(...this.validateSymbol(e)),t.push(...this.validateName(e)),t.push(...this.validateNextSymbol(e)),t}validateStatusCollectionEntry(e){let[t,n,i,s]=e,a=[];if(a.push(...this.validateType(s)),t===i&&s!=="NON_TASK"&&a.push(`Status symbol '${t}' toggles to itself`),a.length>0)return a;let o=te.createFromImportedValue(e).configuration;return a.push(...this.validateSymbolTypeConventions(o)),a.push(...this.validate(o)),a}validateSymbol(e){return Kn.validateOneSymbol(e.symbol,"Task Status Symbol")}validateNextSymbol(e){return Kn.validateOneSymbol(e.nextStatusSymbol,"Task Next Status Symbol")}validateName(e){let t=[];return e.name.length===0&&t.push("Task Status Name cannot be empty."),t}validateType(e){let t=Qt[e],n=[];return t||n.push(`Status Type "${e}" is not a valid type`),t=="EMPTY"&&n.push('Status Type "EMPTY" is not permitted in user data'),n}validateSymbolTypeConventions(e){let t=[],n=e.symbol,i=new De,s=n==="X"?"x":n,a=i.bySymbol(s);return a.type!=="EMPTY"&&(e.nextStatusSymbol!==a.nextStatusSymbol&&t.push(`Next Status Symbol for symbol '${n}': '${e.nextStatusSymbol}' is inconsistent with convention '${a.nextStatusSymbol}'`),e.type!==a.type&&t.push(`Status Type for symbol '${n}': '${e.type}' is inconsistent with convention '${a.type}'`)),t}static validateOneSymbol(e,t){let n=[];return e.length===0&&n.push(`${t} cannot be empty.`),e.length>1&&n.push(`${t} ("${e}") must be a single character.`),n}};var Vn=new Kn,Ut=class extends dr.Modal{constructor(t,n,i){super(t.app);this.plugin=t;this.saved=!1;this.error=!1;this.statusSymbol=n.symbol,this.statusName=n.name,this.statusNextSymbol=n.nextStatusSymbol,this.statusAvailableAsCommand=n.availableAsCommand,this.type=n.type,this.isCoreStatus=i}statusConfiguration(){return new Je(this.statusSymbol,this.statusName,this.statusNextSymbol,this.statusAvailableAsCommand,this.type)}display(){return q(this,null,function*(){let{contentEl:t}=this;t.empty();let n=t.createDiv(),i;new dr.Setting(n).setName("Task Status Symbol").setDesc("This is the character between the square braces. (It can only be edited for Custom statuses, and not Core statuses.)").addText(l=>{i=l,l.setValue(this.statusSymbol).onChange(c=>{this.statusSymbol=c,Ut.setValid(l,Vn.validateSymbol(this.statusConfiguration()))})}).setDisabled(this.isCoreStatus).then(l=>{Ut.setValid(i,Vn.validateSymbol(this.statusConfiguration()))});let s;new dr.Setting(n).setName("Task Status Name").setDesc("This is the friendly name of the task status.").addText(l=>{s=l,l.setValue(this.statusName).onChange(c=>{this.statusName=c,Ut.setValid(l,Vn.validateName(this.statusConfiguration()))})}).then(l=>{Ut.setValid(s,Vn.validateName(this.statusConfiguration()))});let a;new dr.Setting(n).setName("Task Next Status Symbol").setDesc("When clicked on this is the symbol that should be used next.").addText(l=>{a=l,l.setValue(this.statusNextSymbol).onChange(c=>{this.statusNextSymbol=c,Ut.setValid(l,Vn.validateNextSymbol(this.statusConfiguration()))})}).then(l=>{Ut.setValid(a,Vn.validateNextSymbol(this.statusConfiguration()))}),new dr.Setting(n).setName("Task Status Type").setDesc("Control how the status behaves for searching and toggling.").addDropdown(l=>{["TODO","IN_PROGRESS","DONE","CANCELLED","NON_TASK"].forEach(p=>{l.addOption(p,p)}),l.setValue(this.type).onChange(p=>{this.type=te.getTypeFromStatusTypeString(p)})}),te.tasksPluginCanCreateCommandsForStatuses()&&new dr.Setting(n).setName("Available as command").setDesc("If enabled this status will be available as a command so you can assign a hotkey and toggle the status using it.").addToggle(l=>{l.setValue(this.statusAvailableAsCommand).onChange(c=>q(this,null,function*(){this.statusAvailableAsCommand=c}))});let o=t.createDiv(),u=new dr.Setting(o);u.addButton(l=>(l.setTooltip("Save").setIcon("checkmark").onClick(()=>q(this,null,function*(){let c=Vn.validate(this.statusConfiguration());if(c.length>0){let p=c.join(`
`)+`

Fix errors before saving.`;new dr.Notice(p);return}this.saved=!0,this.close()})),l)),u.addExtraButton(l=>(l.setIcon("cross").setTooltip("Cancel").onClick(()=>{this.saved=!1,this.close()}),l))})}onOpen(){this.display()}static setValidationError(t){t.inputEl.addClass("tasks-settings-is-invalid")}static removeValidationError(t){t.inputEl.removeClass("tasks-settings-is-invalid")}static setValid(t,n){n.length===0?Ut.removeValidationError(t):Ut.setValidationError(t)}};var Wt=class extends ve.PluginSettingTab{constructor({plugin:t}){super(t.app,t);this.customFunctions={insertTaskCoreStatusSettings:this.insertTaskCoreStatusSettings.bind(this),insertCustomTaskStatusSettings:this.insertCustomTaskStatusSettings.bind(this)};this.plugin=t}saveSettings(t){return q(this,null,function*(){yield this.plugin.saveSettings(),t&&this.display()})}display(){let{containerEl:t}=this;t.empty(),this.containerEl.addClass("tasks-settings"),t.createEl("h3",{text:"Tasks Settings"}),t.createEl("p",{cls:"tasks-setting-important",text:"Changing any settings requires a restart of obsidian."}),t.createEl("h4",{text:"Task Format Settings"}),new ve.Setting(t).setName("Task Format").setDesc(Wt.createFragmentWithHTML('<p>The format that Tasks uses to read and write tasks.</p><p><b>Important:</b> Tasks currently only supports one format at a time. Selecting Dataview will currently <b>stop Tasks reading its own emoji signifiers</b>.</p><p>See the <a href="https://publish.obsidian.md/tasks/Reference/Task+Formats/About+Task+Formats">documentation</a>.</p>')).addDropdown(i=>{for(let s of Object.keys(Yr))i.addOption(s,Yr[s].displayName);i.setValue(Q().taskFormat).onChange(s=>q(this,null,function*(){et({taskFormat:s}),yield this.plugin.saveSettings()}))}),t.createEl("h4",{text:"Global filter Settings"}),new ve.Setting(t).setName("Global task filter").setDesc(Wt.createFragmentWithHTML('<p><b>Recommended: Leave empty if you want all checklist items in your vault to be tasks managed by this plugin.</b></p><p>Use a global filter if you want Tasks to only act on a subset of your "<code>- [ ]</code>" checklist items, so that a checklist item must include the specified string in its description in order to be considered a task.<p><p>For example, if you set the global filter to <code>#task</code>, the Tasks plugin will only handle checklist items tagged with <code>#task</code>.</br>Other checklist items will remain normal checklist items and not appear in queries or get a done date set.</p><p>See the <a href="https://publish.obsidian.md/tasks/Getting+Started/Global+Filter">documentation</a>.</p>')).addText(i=>{i.setPlaceholder("e.g. #task or TODO").setValue(ge.getInstance().get()).onChange(s=>q(this,null,function*(){et({globalFilter:s}),ge.getInstance().set(s),yield this.plugin.saveSettings()}))}),new ve.Setting(t).setName("Remove global filter from description").setDesc("Enabling this removes the string that you set as global filter from the task description when displaying a task.").addToggle(i=>{let s=Q();i.setValue(s.removeGlobalFilter).onChange(a=>q(this,null,function*(){et({removeGlobalFilter:a}),ge.getInstance().setRemoveGlobalFilter(a),yield this.plugin.saveSettings()}))}),t.createEl("h4",{text:"Global Query"}),MC(new ve.Setting(t).setDesc(Wt.createFragmentWithHTML('<p>A query that is automatically included at the start of every Tasks block in the vault. Useful for adding default filters, or layout options.</p><p>See the <a href="https://publish.obsidian.md/tasks/Queries/Global+Query">documentation</a>.</p>')).addTextArea(i=>{let s=Q();i.inputEl.rows=4,i.setPlaceholder(`# For example...
path does not include _templates/
limit 300
show urgency`).setValue(s.globalQuery).onChange(a=>q(this,null,function*(){et({globalQuery:a}),Jt.getInstance().set(a),yield this.plugin.saveSettings()}))})),t.createEl("h4",{text:"Task Statuses"});let{headingOpened:n}=Q();w_.forEach(i=>{this.addOneSettingsBlock(t,i,n)}),t.createEl("h4",{text:"Date Settings"}),new ve.Setting(t).setName("Set created date on every added task").setDesc(Wt.createFragmentWithHTML(`Enabling this will add a timestamp \u2795 YYYY-MM-DD before other date values, when a task is created with 'Create or edit task', or by completing a recurring task.</br><p>See the <a href="https://publish.obsidian.md/tasks/Getting+Started/Dates#Created+date">documentation</a>.</p>`)).addToggle(i=>{let s=Q();i.setValue(s.setCreatedDate).onChange(a=>q(this,null,function*(){et({setCreatedDate:a}),yield this.plugin.saveSettings()}))}),new ve.Setting(t).setName("Set done date on every completed task").setDesc(Wt.createFragmentWithHTML('Enabling this will add a timestamp \u2705 YYYY-MM-DD at the end when a task is toggled to done.</br><p>See the <a href="https://publish.obsidian.md/tasks/Getting+Started/Dates#Done+date">documentation</a>.</p>')).addToggle(i=>{let s=Q();i.setValue(s.setDoneDate).onChange(a=>q(this,null,function*(){et({setDoneDate:a}),yield this.plugin.saveSettings()}))}),new ve.Setting(t).setName("Use filename as Scheduled date for undated tasks").setDesc(Wt.createFragmentWithHTML('Save time entering Scheduled (\u23F3) dates.</br>If this option is enabled, any undated tasks will be given a default Scheduled date extracted from their file name.</br>The date in the file name must be in one of <code>YYYY-MM-DD</code> or <code>YYYYMMDD</code> formats.</br>Undated tasks have none of Due (\u{1F4C5} ), Scheduled (\u23F3) and Start (\u{1F6EB}) dates.</br><p>See the <a href="https://publish.obsidian.md/tasks/Getting+Started/Use+Filename+as+Default+Date">documentation</a>.</p>')).addToggle(i=>{let s=Q();i.setValue(s.useFilenameAsScheduledDate).onChange(a=>q(this,null,function*(){et({useFilenameAsScheduledDate:a}),yield this.plugin.saveSettings()}))}),new ve.Setting(t).setName("Folders with default Scheduled dates").setDesc("Leave empty if you want to use default Scheduled dates everywhere, or enter a comma-separated list of folders.").addText(i=>q(this,null,function*(){let s=Q();yield this.plugin.saveSettings(),i.setValue(Wt.renderFolderArray(s.filenameAsDateFolders)).onChange(a=>q(this,null,function*(){let o=Wt.parseCommaSeparatedFolders(a);et({filenameAsDateFolders:o}),yield this.plugin.saveSettings()}))})),t.createEl("h4",{text:"Recurring task Settings"}),new ve.Setting(t).setName("Next recurrence appears on the line below").setDesc(Wt.createFragmentWithHTML('Enabling this will make the next recurrence of a task appear on the line below the completed task. Otherwise the next recurrence will appear before the completed one.</br><p>See the <a href="https://publish.obsidian.md/tasks/Getting+Started/Recurring+Tasks">documentation</a>.</p>')).addToggle(i=>{let{recurrenceOnNextLine:s}=Q();i.setValue(s).onChange(a=>q(this,null,function*(){et({recurrenceOnNextLine:a}),yield this.plugin.saveSettings()}))}),t.createEl("h4",{text:"Auto-suggest Settings"}),new ve.Setting(t).setName("Auto-suggest task content").setDesc(Wt.createFragmentWithHTML('Enabling this will open an intelligent suggest menu while typing inside a recognized task line.</br><p>See the <a href="https://publish.obsidian.md/tasks/Getting+Started/Auto-Suggest">documentation</a>.</p>')).addToggle(i=>{let s=Q();i.setValue(s.autoSuggestInEditor).onChange(a=>q(this,null,function*(){et({autoSuggestInEditor:a}),yield this.plugin.saveSettings()}))}),new ve.Setting(t).setName("Minimum match length for auto-suggest").setDesc("If higher than 0, auto-suggest will be triggered only when the beginning of any supported keywords is recognized.").addSlider(i=>{let s=Q();i.setLimits(0,3,1).setValue(s.autoSuggestMinMatch).setDynamicTooltip().onChange(a=>q(this,null,function*(){et({autoSuggestMinMatch:a}),yield this.plugin.saveSettings()}))}),new ve.Setting(t).setName("Maximum number of auto-suggestions to show").setDesc('How many suggestions should be shown when an auto-suggest menu pops up (including the "\u23CE" option).').addSlider(i=>{let s=Q();i.setLimits(3,12,1).setValue(s.autoSuggestMaxItems).setDynamicTooltip().onChange(a=>q(this,null,function*(){et({autoSuggestMaxItems:a}),yield this.plugin.saveSettings()}))}),t.createEl("h4",{text:"Dialog Settings"}),new ve.Setting(t).setName("Provide access keys in dialogs").setDesc(Wt.createFragmentWithHTML('If the access keys (keyboard shortcuts) for various controls in dialog boxes conflict with system keyboard shortcuts or assistive technology functionality that is important for you, you may want to deactivate them here.</br><p>See the <a href="https://publish.obsidian.md/tasks/Getting+Started/Create+or+edit+Task#Keyboard+shortcuts">documentation</a>.</p>')).addToggle(i=>{let s=Q();i.setValue(s.provideAccessKeys).onChange(a=>q(this,null,function*(){et({provideAccessKeys:a}),yield this.plugin.saveSettings()}))})}addOneSettingsBlock(t,n,i){let s=t.createEl("details",{cls:"tasks-nested-settings",attr:pe({},n.open||i[n.text]?{open:!0}:{})});s.empty(),s.ontoggle=()=>{i[n.text]=s.open,et({headingOpened:i}),this.plugin.saveSettings()};let a=s.createEl("summary");if(new ve.Setting(a).setHeading().setName(n.text),a.createDiv("collapser").createDiv("handle"),n.notice!==null){let o=s.createEl("div",{cls:n.notice.class,text:n.notice.text});n.notice.html!==null&&o.insertAdjacentHTML("beforeend",n.notice.html)}n.settings.forEach(o=>{if(!(o.featureFlag!==""&&!ob(o.featureFlag))&&(o.type==="checkbox"?new ve.Setting(s).setName(o.name).setDesc(o.description).addToggle(u=>{let l=Q();l.generalSettings[o.settingName]||Fn(o.settingName,o.initialValue),u.setValue(l.generalSettings[o.settingName]).onChange(c=>q(this,null,function*(){Fn(o.settingName,c),yield this.plugin.saveSettings()}))}):o.type==="text"?new ve.Setting(s).setName(o.name).setDesc(o.description).addText(u=>{let l=Q();l.generalSettings[o.settingName]||Fn(o.settingName,o.initialValue);let c=p=>q(this,null,function*(){Fn(o.settingName,p),yield this.plugin.saveSettings()});u.setPlaceholder(o.placeholder.toString()).setValue(l.generalSettings[o.settingName].toString()).onChange((0,ve.debounce)(c,500,!0))}):o.type==="textarea"?new ve.Setting(s).setName(o.name).setDesc(o.description).addTextArea(u=>{let l=Q();l.generalSettings[o.settingName]||Fn(o.settingName,o.initialValue);let c=p=>q(this,null,function*(){Fn(o.settingName,p),yield this.plugin.saveSettings()});u.setPlaceholder(o.placeholder.toString()).setValue(l.generalSettings[o.settingName].toString()).onChange((0,ve.debounce)(c,500,!0)),u.inputEl.rows=8,u.inputEl.cols=40}):o.type==="function"&&this.customFunctions[o.settingName](s,this),o.notice!==null)){let u=s.createEl("p",{cls:o.notice.class,text:o.notice.text});o.notice.html!==null&&u.insertAdjacentHTML("beforeend",o.notice.html)}})}static parseCommaSeparatedFolders(t){return t.split(",").map(n=>n.trim()).map(n=>n.replace(/^\/|\/$/g,"")).filter(n=>n!=="")}static renderFolderArray(t){return t.join(",")}insertTaskCoreStatusSettings(t,n){let{statusSettings:i}=Q();i.coreStatuses.forEach(s=>{k_(t,s,i.coreStatuses,i,n,n.plugin,!0)})}insertCustomTaskStatusSettings(t,n){let{statusSettings:i}=Q();i.customStatuses.forEach(l=>{k_(t,l,i.customStatuses,i,n,n.plugin,!1)}),t.createEl("div"),new ve.Setting(t).addButton(l=>{l.setButtonText("Add New Task Status").setCta().onClick(()=>q(this,null,function*(){je.addStatus(i.customStatuses,new Je("","","",!1,"TODO")),yield Bi(i,n)}))}).infoEl.remove();let a=[["AnuPpuccin Theme",g_()],["Aura Theme",y_()],["Ebullientworks Theme",T_()],["ITS Theme & SlRvb Checkboxes",b_()],["Minimal Theme",v_()],["Things Theme",E_()],["LYT Mode Theme (Dark mode only)",__()]];for(let[l,c]of a)new ve.Setting(t).addButton(h=>{let _=`${l}: Add ${c.length} supported Statuses`;h.setButtonText(_).onClick(()=>q(this,null,function*(){yield RC(c,i,n)}))}).infoEl.remove();new ve.Setting(t).addButton(l=>{l.setButtonText("Add All Unknown Status Types").setCta().onClick(()=>q(this,null,function*(){let p=this.plugin.getTasks().map(_=>_.status),h=De.getInstance().findUnknownStatuses(p);h.length!==0&&(h.forEach(_=>{je.addStatus(i.customStatuses,_)}),yield Bi(i,n))}))}).infoEl.remove(),new ve.Setting(t).addButton(l=>{l.setButtonText("Reset Custom Status Types to Defaults").setWarning().onClick(()=>q(this,null,function*(){je.resetAllCustomStatuses(i),yield Bi(i,n)}))}).infoEl.remove()}},Oa=Wt;Oa.createFragmentWithHTML=t=>createFragment(n=>n.createDiv().innerHTML=t);function k_(r,e,t,n,i,s,a){let o=r.createEl("pre");o.addClass("row-for-status"),o.textContent=new te(e).previewText();let u=new ve.Setting(r);u.infoEl.replaceWith(o),a||u.addExtraButton(l=>{l.setIcon("cross").setTooltip("Delete").onClick(()=>q(this,null,function*(){je.deleteStatus(t,e)&&(yield Bi(n,i))}))}),u.addExtraButton(l=>{l.setIcon("pencil").setTooltip("Edit").onClick(()=>q(this,null,function*(){let c=new Ut(s,e,a);c.onClose=()=>q(this,null,function*(){c.saved&&je.replaceStatus(t,e,c.statusConfiguration())&&(yield Bi(n,i))}),c.open()}))}),u.infoEl.remove()}function RC(r,e,t){return q(this,null,function*(){je.bulkAddStatusCollection(e,r).forEach(i=>{new ve.Notice(i)}),yield Bi(e,t)})}function Bi(r,e){return q(this,null,function*(){et({statusSettings:r}),je.applyToStatusRegistry(r,De.getInstance()),yield e.saveSettings(!0)})}function MC(r){let{settingEl:e,infoEl:t,controlEl:n}=r,i=n.querySelector("textarea");i!==null&&(e.style.display="block",t.style.marginRight="0px",i.style.minWidth="-webkit-fill-available")}var O_=require("obsidian");var xu=class extends O_.EditorSuggest{constructor(t,n){super(t);this.settings=n}onTrigger(t,n,i){if(!this.settings.autoSuggestInEditor)return null;let s=n.getLine(t.line);return sb(s,t.ch)?{start:{line:t.line,ch:0},end:{line:t.line,ch:s.length},query:s}:null}getSuggestions(t){var a,o,u;let n=t.query,i=t.editor.getCursor();return((u=(o=(a=ca()).buildSuggestions)==null?void 0:o.call(a,n,i.ch,this.settings))!=null?u:[]).map(l=>Tt(pe({},l),{context:t}))}renderSuggestion(t,n){n.setText(t.displayText)}selectSuggestion(t,n){var u,l,c;let i=t.context.editor;if(t.suggestionType==="empty"){this.close();let p=new KeyboardEvent("keydown",{code:"Enter",key:"Enter"});(l=(u=i==null?void 0:i.cm)==null?void 0:u.contentDOM)==null||l.dispatchEvent(p);return}let s=t.context.editor.getCursor(),a={line:s.line,ch:(c=t.insertAt)!=null?c:s.ch},o=t.insertSkip?{line:s.line,ch:a.ch+t.insertSkip}:void 0;t.context.editor.replaceRange(t.appendText,a,o),t.context.editor.setCursor({line:s.line,ch:a.ch+t.appendText.length})}};var S_=(r,e)=>{let t,n=new Promise((a,o)=>{t=a});return e(r,a=>{let o=a.map(u=>u.toFileLineString()).join(`
`);t(o)}).open(),n};var D_=(r,e)=>{let t=Go({line:"",path:""});return new dn({app:r,task:t,onSubmit:e})};var R_=r=>({createTaskLineModal:()=>S_(r,D_)});var Au=class extends M_.Plugin{get apiV1(){return R_(app)}onload(){return q(this,null,function*(){Eu.registerConsoleLogger(),console.log('loading plugin "tasks"'),yield this.loadSettings(),this.addSettingTab(new Oa({plugin:this})),s_({metadataCache:this.app.metadataCache,vault:this.app.vault,workspace:this.app.workspace}),yield this.loadTaskStatuses();let t=new vu({obsidianEvents:this.app.workspace});this.cache=new Ln({metadataCache:this.app.metadataCache,vault:this.app.vault,events:t}),this.inlineRenderer=new Du({plugin:this}),this.queryRenderer=new Mu({plugin:this,events:t}),this.registerEditorExtension(h_()),this.registerEditorSuggest(new xu(this.app,Q())),new jo({plugin:this})})}loadTaskStatuses(){return q(this,null,function*(){let{statusSettings:t}=Q();je.applyToStatusRegistry(t,De.getInstance())})}onunload(){var t;console.log('unloading plugin "tasks"'),(t=this.cache)==null||t.unload()}loadSettings(){return q(this,null,function*(){let t=yield this.loadData();et(t),t=Q(),ge.getInstance().set(t.globalFilter),ge.getInstance().setRemoveGlobalFilter(t.removeGlobalFilter),Jt.getInstance().set(t.globalQuery),yield this.loadTaskStatuses()})}saveSettings(){return q(this,null,function*(){yield this.saveData(Q())})}getTasks(){var t;return(t=this.cache)==null?void 0:t.getTasks()}};
/*!
 * EventEmitter2
 * https://github.com/hij1nx/EventEmitter2
 *
 * Copyright (c) 2013 hij1nx
 * Licensed under the MIT license.
 */
/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */
